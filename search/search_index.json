{"config":{"lang":["zh"],"separator":"[\\s\\u200b\\-]","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u9996\u9875","text":""},{"location":"book/","title":"\u7535\u5b50\u4e66","text":"<ul> <li>Library Genesis</li> <li>SaltTiger</li> </ul>"},{"location":"diango/","title":"django","text":""},{"location":"diango/#cheetsheet","title":"cheetsheet","text":"<pre><code># \u200b\u5b89\u88c5\u200b Python 3.12\nsudo apt update\nsudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev wget\nmkdir ./python &amp;&amp; cd ./python\nwget https://www.python.org/ftp/python/3.12.1/Python-3.12.1.tgz\ntar -xvf Python-3.12.1.tgz\ncd Python-3.12.0b3\n./configure --enable-optimizations\nsudo make install\n</code></pre>"},{"location":"diango/#faq","title":"FAQ","text":"<pre><code>pip install mysqlclient\n\n#Exception: Can not find valid pkg-config name.\n#Specify MYSQLCLIENT_CFLAGS and MYSQLCLIENT_LDFLAGS env vars manually\nsudo apt-get install python3-dev default-libmysqlclient-dev build-essential pkg-config\n</code></pre>"},{"location":"diango/#links","title":"Links","text":"<ul> <li>Docker Alpine build fails on mysqlclient installation with error: Exception: Can not find valid pkg-config name</li> </ul>"},{"location":"python/","title":"Python","text":""},{"location":"python/#cheetsheet","title":"cheetsheet","text":"<pre><code># \u200b\u83b7\u53d6\u200b\u5f53\u524d\u200b\u65f6\u95f4\u200b\nnow = datetime.datetime.now()\n\n# \u200b\u83b7\u53d6\u200b 15 \u200b\u5206\u949f\u200b\u524d\u200b\u7684\u200b\u65f6\u95f4\u200b\ndatetime.datetime.now() - datetime.timedelta(minutes = 15)\n</code></pre>"},{"location":"python/#google-fonts","title":"\u4e0b\u8f7d\u200b google fonts","text":"<pre><code>import requests\n\nwith open(\"example.css\", \"r\") as f:\n    text = f.read()\n    urls = re.findall(r'(https?://[^\\)]+)', text)\n\nfor url in urls:\n    filename = url.split(\"/\")[-1]\n    r = requests.get(url)\n    with open(\"./fonts/\" + filename, \"wb\") as f: \n        f.write(r.content)\n    text = text.replace(url, \"/fonts/\" + filename)\n\nwith open(\"example.css\", \"w\") as f:\n        f.write(text)\n</code></pre>"},{"location":"python/#links","title":"Links","text":"<ul> <li>How to create a DateTime equal to 15 minutes ago?</li> <li>Downloading a Google font and setting up an offline site that uses it</li> <li>google-font-dl.py</li> </ul>"},{"location":"tools/","title":"Tools","text":"<ul> <li>\u200b\u4e0b\u8f7d\u200b Youtube \u200b\u89c6\u9891\u200b https://ytshorts.savetube.me </li> <li>\u200b\u53bb\u9664\u200b\u80cc\u666f\u200b\uff0c\u200b\u53d8\u6210\u200b\u900f\u660e\u200b https://www.remove.bg/zh</li> <li>\u200b\u53bb\u9664\u200b\u6c34\u5370\u200b https://www.watermarkremover.io/zh/upload</li> <li>\u200b\u56fe\u7247\u683c\u5f0f\u200b\u8f6c\u6362\u200b https://cloudconvert.com/</li> <li>\u200b\u56fe\u7247\u7d20\u6750\u200b https://616pic.com/</li> <li>\u200b\u514d\u8d39\u200b\u56fe\u6807\u200b https://www.flaticon.com/</li> <li>PDF \u200b\u5168\u6587\u200b\u7ffb\u8bd1\u200b https://www.onlinedoctranslator.com/en/translationform</li> <li>Stirling-PDF \u200b\u56fe\u7247\u200b\u7f16\u8f91\u200b https://github.com/Stirling-Tools/Stirling-PDF</li> </ul>"},{"location":"tools/#_1","title":"\u56fe\u7247\u200b\u7f16\u8f91","text":""},{"location":"tools/#kolourpaint","title":"KolourPaint","text":"<pre><code>sudo snap remove kolourpaint\nsudo apt install kolourpaint\n</code></pre> <ul> <li>https://flathub.org/apps/org.kde.kolourpaint</li> </ul>"},{"location":"RPA/","title":"RPA","text":"<pre><code># install wps\nunzip wps.zip\ncd wps\nrpm -ivh wps-office-10.1.0.6634-1.x86_64.rpm\n\nunzip wps-office-19-missing-fonts-on-Linux-main.zip\nmv wps-office-19-missing-fonts-on-Linux-main special-wps-office-fonts\ncp -r ttf-ms-win10 /usr/share/fonts/\n\nunzip ttf-ms-win10-master.zip\nmv ttf-ms-win10-master ttf-ms-win10\ncp -r ttf-ms-win10 /usr/share/fonts/\n\nsudo fc-cache -f -v\n\n# \u200b\u6ce8\u610f\u200b\u8981\u200b\u5148\u200b\u914d\u7f6e\u200b\u597d\u200b yum \u200b\u6e90\u200b\n# install chrome\nyum localinstall google-chrome-stable-133.0.6943.126-1.x86_64.rpm\n</code></pre>"},{"location":"RPA/#links","title":"links","text":"<ul> <li>\u200b\u94f6\u6cb3\u200b\u9e92\u9e9f\u200bliunux\u200b\u4e0b\u200b\u7684\u200b\u5c4f\u5e55\u200b\u4fdd\u62a4\u200b\u4e0e\u200b\u9501\u200b\u5c4f\u200b\u8bbe\u7f6e\u200b</li> <li>https://github.com/iykrichie/wps-office-19-missing-fonts-on-Linux</li> <li>https://gitee.com/aisuhua/ttf-ms-win10</li> <li>https://rpm.pkgs.org/packages/google-chrome-x86_64/</li> </ul>"},{"location":"ai/","title":"AI","text":""},{"location":"ai/#_1","title":"\u6570\u5b66\u77e5\u8bc6","text":"<ul> <li>\u200b\u9ad8\u65af\u5206\u5e03\u200b</li> <li>\u200b\u6807\u91cf\u200b\u51fd\u6570\u200b - ok</li> <li>\u200b\u5411\u91cf\u200b - ok</li> <li> <p>\u200b\u6c42\u200b\u5e42\u200b\u8fd0\u7b97\u200b</p> </li> <li> <p>\u200b\u6807\u91cf\u200b (\u200b\u7269\u7406\u5b66\u200b)</p> </li> </ul>"},{"location":"ai/#_2","title":"\u5b9e\u64cd","text":"<pre><code>(d2l) suhua@g7-7588:~/Downloads$ pip install mxnet-cu91==1.7.0\nLooking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\nCollecting mxnet-cu101==1.7.0\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/40/26/9655677b901537f367c3c473376e4106abc72e01a8fc25b1cb6ed9c37e8c/mxnet_cu101-1.7.0-py2.py3-none-manylinux2014_x86_64.whl (846.0 MB)\n     \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 846.0/846.0 MB 2.7 MB/s eta 0:00:00\nCollecting numpy&lt;2.0.0,&gt;1.16.0 (from mxnet-cu101==1.7.0)\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/54/30/c2a907b9443cf42b90c17ad10c1e8fa801975f01cb9764f3f8eb8aea638b/numpy-1.26.4-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (18.2 MB)\n     \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 18.2/18.2 MB 3.8 MB/s eta 0:00:00\nCollecting requests&lt;3,&gt;=2.20.0 (from mxnet-cu101==1.7.0)\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/f9/9b/335f9764261e915ed497fcdeb11df5dfd6f7bf257d4a6a2a686d80da4d54/requests-2.32.3-py3-none-any.whl (64 kB)\n     \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 64.9/64.9 kB 6.4 MB/s eta 0:00:00\nCollecting graphviz&lt;0.9.0,&gt;=0.8.1 (from mxnet-cu101==1.7.0)\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/53/39/4ab213673844e0c004bed8a0781a0721a3f6bb23eb8854ee75c236428892/graphviz-0.8.4-py2.py3-none-any.whl (16 kB)\nCollecting charset-normalizer&lt;4,&gt;=2 (from requests&lt;3,&gt;=2.20.0-&gt;mxnet-cu101==1.7.0)\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/98/69/5d8751b4b670d623aa7a47bef061d69c279e9f922f6705147983aa76c3ce/charset_normalizer-3.3.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (142 kB)\n     \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 142.3/142.3 kB 7.2 MB/s eta 0:00:00\nCollecting idna&lt;4,&gt;=2.5 (from requests&lt;3,&gt;=2.20.0-&gt;mxnet-cu101==1.7.0)\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/e5/3e/741d8c82801c347547f8a2a06aa57dbb1992be9e948df2ea0eda2c8b79e8/idna-3.7-py3-none-any.whl (66 kB)\n     \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 66.8/66.8 kB 7.4 MB/s eta 0:00:00\nCollecting urllib3&lt;3,&gt;=1.21.1 (from requests&lt;3,&gt;=2.20.0-&gt;mxnet-cu101==1.7.0)\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/a2/73/a68704750a7679d0b6d3ad7aa8d4da8e14e151ae82e6fee774e6e0d05ec8/urllib3-2.2.1-py3-none-any.whl (121 kB)\n     \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 121.1/121.1 kB 7.7 MB/s eta 0:00:00\nCollecting certifi&gt;=2017.4.17 (from requests&lt;3,&gt;=2.20.0-&gt;mxnet-cu101==1.7.0)\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/5b/11/1e78951465b4a225519b8c3ad29769c49e0d8d157a070f681d5b6d64737f/certifi-2024.6.2-py3-none-any.whl (164 kB)\n     \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 164.4/164.4 kB 6.6 MB/s eta 0:00:00\nInstalling collected packages: urllib3, numpy, idna, graphviz, charset-normalizer, certifi, requests, mxnet-cu101\nSuccessfully installed certifi-2024.6.2 charset-normalizer-3.3.2 graphviz-0.8.4 idna-3.7 mxnet-cu101-1.7.0 numpy-1.26.4 requests-2.32.3 urllib3-2.2.1\n\n$ pip install d2l==0.17.6\nSuccessfully installed anyio-4.4.0 argon2-cffi-23.1.0 argon2-cffi-bindings-21.2.0 arrow-1.3.0 asttokens-2.4.1 attrs-23.2.0 beautifulsoup4-4.12.3 bleach-6.1.0 cffi-1.16.0 chardet-4.0.0 comm-0.2.2 cycler-0.12.1 d2l-0.17.6 debugpy-1.8.1 decorator-5.1.1 defusedxml-0.7.1 entrypoints-0.4 exceptiongroup-1.2.1 executing-2.0.1 fastjsonschema-2.19.1 fonttools-4.53.0 fqdn-1.5.1 idna-2.10 importlib-metadata-7.1.0 ipykernel-6.29.4 ipython-8.18.1 ipython-genutils-0.2.0 ipywidgets-8.1.3 isoduration-20.11.0 jedi-0.19.1 jinja2-3.1.4 jsonpointer-3.0.0 jsonschema-4.22.0 jsonschema-specifications-2023.12.1 jupyter-1.0.0 jupyter-client-7.4.9 jupyter-console-6.6.3 jupyter-core-5.7.2 jupyter-events-0.10.0 jupyter-server-2.14.1 jupyter-server-terminals-0.5.3 jupyterlab-pygments-0.3.0 jupyterlab-widgets-3.0.11 kiwisolver-1.4.5 markupsafe-2.1.5 matplotlib-3.5.1 matplotlib-inline-0.1.7 mistune-3.0.2 nbclassic-1.1.0 nbclient-0.10.0 nbconvert-7.16.4 nbformat-5.10.4 nest-asyncio-1.6.0 notebook-6.5.7 notebook-shim-0.2.4 numpy-1.21.5 overrides-7.7.0 packaging-24.1 pandas-1.2.4 pandocfilters-1.5.1 parso-0.8.4 pexpect-4.9.0 pillow-10.3.0 platformdirs-4.2.2 prometheus-client-0.20.0 prompt-toolkit-3.0.47 psutil-5.9.8 ptyprocess-0.7.0 pure-eval-0.2.2 pycparser-2.22 pygments-2.18.0 pyparsing-3.1.2 python-dateutil-2.9.0.post0 python-json-logger-2.0.7 pytz-2024.1 pyyaml-6.0.1 pyzmq-26.0.3 qtconsole-5.5.2 qtpy-2.4.1 referencing-0.35.1 requests-2.25.1 rfc3339-validator-0.1.4 rfc3986-validator-0.1.1 rpds-py-0.18.1 send2trash-1.8.3 six-1.16.0 sniffio-1.3.1 soupsieve-2.5 stack-data-0.6.3 terminado-0.18.1 tinycss2-1.3.0 tornado-6.4.1 traitlets-5.14.3 types-python-dateutil-2.9.0.20240316 typing-extensions-4.12.2 uri-template-1.3.0 urllib3-1.26.18 wcwidth-0.2.13 webcolors-24.6.0 webencodings-0.5.1 websocket-client-1.8.0 widgetsnbextension-4.0.11 zipp-3.19.2\n</code></pre>"},{"location":"ai/#links","title":"links","text":"<ul> <li>\u200b\u52a8\u624b\u200b\u5b66\u200b\u6df1\u5ea6\u200b\u5b66\u4e60\u200b</li> </ul>"},{"location":"ansible/","title":"Ansible","text":"<pre><code># \u200b\u4ee5\u200b JSON \u200b\u683c\u5f0f\u200b\u8fd4\u56de\u200b\u7ed3\u679c\u200b\n# \u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b ansible.cfg\n[defaults]\ncallback_whitelist=json\nstdout_callback=json\n\n# \u200b\u901a\u8fc7\u200b\u73af\u5883\u53d8\u91cf\u200b \nANSIBLE_CALLBACK_WHITELIST=json ANSIBLE_STDOUT_CALLBACK=json ansible-playbook ...\n\n# \u200b\u4fee\u6539\u200b\u5e76\u53d1\u200b\u6570\u200b\n# ansible.cfg\n[defaults]\nforks=50\n\n# \u200b\u547d\u4ee4\u884c\u200b\u53c2\u6570\u200b\nansible-playbook site.yaml --forks 50\n\n# \u200b\u81ea\u5b9a\u4e49\u200b\u53c2\u6570\u200b\nmy_hostname ansible_host=192.168.12.34\n</code></pre>"},{"location":"ansible/#_1","title":"\u95ee\u9898","text":"<p>ansible 2.x sudo regression on old systems</p> <pre><code># in 1.9x (ansible.cfg)\nsudo_flags = -H\n\n# in 2.x\nsudo_flags = -H -S -n\n\n# \u200b\u914d\u7f6e\u200b\u662f\u200b\u4f7f\u7528\u200b\u7684\u200b python \u200b\u89e3\u6790\u5668\u200b\n# in the scope of a task\n- hosts: test_server\n  tasks:\n    - name: install pip\n      apt:\n        name: python-pip\n      vars:\n        ansible_python_interpreter: /usr/bin/python2\n\n# or in the scope of a play\n- hosts: test_server\n  vars:\n    ansible_python_interpreter: /usr/bin/python\n  tasks:\n    - name: install pip\n      apt:\n        name: python-pip\n\n# or global\n- set_fact:\n    ansible_python_interpreter: /usr/bin/python3\n  when: \n    - ansible_distribution == 'Kylin Linux Advanced Server'\n</code></pre>"},{"location":"ansible/#_2","title":"\u53c2\u8003","text":"<ol> <li>8 ways to speed up your Ansible playbooks</li> <li>ansible 2.x sudo regression on old systems</li> <li>Is it possible to combine jinja templates in ansible like this is possible with erbs in puppet?</li> <li>how can I specify the version of Python to use in an Ansible playbook?</li> <li>ansible_python_interpreter is not templated before use</li> </ol>"},{"location":"ansible/archive/","title":"Ansible","text":"<pre><code># \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b raw \u200b\u548c\u200b script \u200b\u6a21\u5757\u200b\u4e0d\u200b\u4f9d\u8d56\u4e8e\u200b Python\uff0c\u200b\u6240\u4ee5\u200b\u53ef\u4ee5\u200b\u7528\u200b\u5b83\u200b\u6765\u200b\u5b89\u88c5\u200b Python\nansible myhost --become -m raw -a \"yum install -y python2\"\n\n# Ansible \u200b\u6309\u7167\u200b\u4ee5\u4e0b\u200b\u987a\u5e8f\u200b\u8bfb\u53d6\u200b\u914d\u7f6e\u200b\uff0c\u200b\u4e00\u65e6\u200b\u627e\u5230\u200b\u7b2c\u4e00\u4e2a\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u5176\u4ed6\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u5ffd\u7565\u200b\n1. ANSIBLE_CONFIG (environment variable if set)\n2. ansible.cfg (in the current directory)\n3. ~/.ansible.cfg (in the home directory)\n4. /etc/ansible/ansible.cfg\n\n# \u200b\u7528\u200b\u8d26\u53f7\u5bc6\u7801\u200b\u767b\u5f55\u200b\nansible -i hosts -u bakroot02 --extra-vars ansible_ssh_pass=mypassword -m ping all\n\n# \u200b\u5ffd\u7565\u200b Host Key Checking\nvim /etc/ansible/ansible.cfg\n[defaults]\nhost_key_checking=False\n\n# \u200b\u7981\u6b62\u200b fact cache\nexport ANSIBLE_INVENTORY_CACHE=False\n\n# \u200b\u6ca1\u6709\u200b\u505a\u200b\u4e92\u4fe1\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u5bc6\u7801\u200b\u5c06\u200b\u6709\u6548\u200b\n[all]\n172.31.96.101\n172.31.96.102\n\n[all:vars]\nansible_user=bakroot02\nansible_password=suhua123\n\n# \u200b\u6307\u5b9a\u200b\u5177\u4f53\u200b IP \u200b\u6267\u884c\u200b\nansible all -i \"10.168.101.179,\" -m ping\nansible-playbook -i \"10.168.101.179,\" test.yml\nansible localhost -m setup\n\n\n# \u200b\u67e5\u770b\u200b hosts \u200b\u5217\u8868\u200b\nansible all --list-hosts\nansible -i hosts all --list\nansible -i hosts all -m ping\nansible-playbook -i hosts.yaml playbook.yaml\n\n# \u200b\u547d\u4ee4\u884c\u200b\u6307\u5b9a\u200b\u53c2\u6570\u200b\nexport ANSIBLE_HOST_KEY_CHECKING=False\nansible -i 172.31.96.101, -u bakroot02 --extra-vars ansible_ssh_pass=mypassword -m ping all\nansible -i 172.31.96.101,172.31.96.102, -u bakroot02 --extra-vars ansible_ssh_pass=mypassword -m ping all\n\n# command \u200b\u6a21\u5757\u200b\uff0c\u200b\u5b83\u200b\u662f\u200b\u9ed8\u8ba4\u200b\u6a21\u5757\u200b\uff0c\u200b\u4e0d\u200b\u652f\u6301\u200b pipe \u200b\u548c\u200b redirect\nansible -i hosts.yaml all -a \"id\"\nansible -i hosts.yaml all -m ansible.builtin.command -a \"id\"\n\n# shell \u200b\u6a21\u5757\u200b\uff0c\u200b\u652f\u6301\u200b pipe \u200b\u548c\u200b redirect\nansible -i hosts.yaml all -m ansible.builtin.shell -a \"cat /etc/kylin-release || cat /etc/redhat-release\"\n\n# copy \u200b\u6a21\u5757\u200b\uff0c\u200b\u5e42\u200b\u7b49\u200b\u6027\u200b\nansible -i hosts.yaml all -m ansible.builtin.copy -a \"src=/etc/hosts dest=/tmp/hosts\"\n\n# file \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.file -a \"dest=/tmp/hosts mode=600 owner=1001 group=1001\" --become\nansible -i hosts.yaml all -m ansible.builtin.file -a \"dest=/opt/suhua owner=bakroot02 group=bakroot02 state=directory\" --become\nansible -i hosts.yaml all -m ansible.builtin.file -a \"dest=/opt/suhua state=absent\" --become\n\n# yum \u200b\u6a21\u5757\u200b RHEL 7\nansible -i hosts.yaml all -m ansible.builtin.yum -a \"name=vim state=present\" --become\nansible -i hosts.yaml all -m ansible.builtin.yum -a \"name=vim state=absent\" --become\n\n# Kylin V10\nansible -i hosts.yaml all -m ansible.builtin.dnf -a \"use_backend=dnf4 name=vim state=present\" --become\nansible -i hosts.yaml all -m ansible.builtin.yum -a \"use_backend=dnf4 name=vim state=absent\" --become\n\n# user \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.user -a \"name=foo password=&lt;hash password&gt; state=present\" --become\nansible -i hosts.yaml all -m ansible.builtin.user -a \"name=foo password=&lt;hash password&gt; state=absent\" --become\n\n# service \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.service -a \"name=crond state=started\" --become\nansible -i hosts.yaml all -m ansible.builtin.service -a \"name=crond state=stopped\" --become\n\n# setup \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.setup --become\n\n# authorized_key \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -u bakroot02 -m authorized_key -a \"user=bakroot02 key='{{ lookup('file', '/root/.ssh/id_rsa.pub') }}' state=present path=/home/bakroot02/.ssh/authorized_keys\" --ask-pass\nansible -i hosts.yaml all -u bakroot02 -m authorized_key -a \"user=bakroot02 key='{{ lookup('file', '/root/.ssh/id_rsa.pub') }}' state=present\" --ask-pass\nansible -i hosts.yaml all -u bakroot02 -m authorized_key -a \"user=bakroot02 key='{{ lookup('file', '/root/.ssh/id_rsa.pub') }}' state=present exclusive=True\" --ask-pass\nansible -i 10.0.0.14, all -u root -m authorized_key -a \"user=bakroot key='{{ lookup('file', '.ssh/id_rsa.pub') }}' state=present\" --ask-pass\n\n# \u200b\u9a8c\u8bc1\u200b\nansible all -a \"date +'%Y-%m-%d %T'\"\n\n# \u200b\u53ea\u200b\u68c0\u67e5\u200b\u4e0d\u200b\u771f\u6b63\u200b\u6267\u884c\u200b --check / -C\nansible -i hosts.yaml all -m ansible.builtin.copy -a \"content=foo dest=/tmp/bar.txt\" --become --check\n\n# \u200b\u4fee\u6539\u200b\u5e76\u53d1\u200b\u6570\u200b By default Ansible uses only 5 simultaneous processes\nansible atlanta -a \"/sbin/reboot\" -f 10\n\n# sudo \u200b\u6267\u884c\u547d\u4ee4\u200b\nansible -i hosts.yaml all -a \"/sbin/reboot\" --become\n\n# Docker\nsudo -i\ndocker run --rm -it -v $(pwd):/ansible -v /root/.ssh:/root/.ssh --net host aisuhua/ansible:latest /bin/sh\ndocker run --rm -it -v $(pwd):/ansible -v ~/.ssh/id_rsa:/root/id_rsa --net host aisuhua/ansible:latest /bin/sh\n\n# ansible-playbook\n# --check, --diff, --list-hosts, --list-tasks, and --syntax-check\nansible-playbook -i hosts.yaml playbook.yaml --check\nansible-playbook -i hosts.yaml playbook.yaml --list-hosts\n\n## \u200b\u521d\u59cb\u5316\u200b\n\n# \u200b\u521b\u5efa\u200b\u7528\u6237\u200b\npassword='Pawrd01!'\nansible -i hosts.ini all -u bakroot02 -m ansible.builtin.user -a \"name=bakroot state=present password=\\\"{{ \\\"$password\\\" | password_hash('sha512') }}\\\"\" --ask-pass --become\n\n# \u200b\u62f7\u8d1d\u200b\u79d8\u94a5\u200b\nansible -i hosts.ini all -u bakroot -m ansible.builtin.authorized_key -a \"user=bakroot key='{{ lookup('file', '/opt/www/ansible/.ssh/id_rsa.pub') }}' state=present\" --ask-pass\n\n## FAQ\n\n[WARNING]: Platform linux on host 172.31.96.101 is using the discovered Python interpreter at /usr/bin/python, but future installation of another Python interpreter could change this. See\nhttps://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.\n\n```ansible.cfg\n[defaults]\ninterpreter_python=auto_silent\n\n# \u200b\u5f00\u542f\u200b debug\nexport ANSIBLE_DEBUG=True\n</code></pre>"},{"location":"ansible/archive/#links","title":"Links","text":"<ul> <li>the-configuration-file</li> <li>ansible.cfg</li> <li>Module Index</li> <li>Ansible passing ssh username and Password using command line is not working</li> <li>YAML Syntax</li> <li>playbook-keywords</li> <li>Creating a new user and password with Ansible</li> <li>How to create a new partition with Ansible</li> <li>Ansible: create a user with sudo privileges</li> <li>Ansible playbook to determine OS release</li> </ul>"},{"location":"ansible/artile/","title":"\u7cbe\u9009\u200b\u6587\u7ae0","text":"<ul> <li>ansible\u200b\u81ea\u52a8\u5316\u200b\uff1a\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u521d\u59cb\u5316\u200b\u5177\u4f53\u200b\u5b9e\u73b0\u200b</li> <li>Is there a way to run with_items loops in parallel in Ansible?</li> <li>unarchive module feature request: allow to extract specific files</li> </ul>"},{"location":"ansible/become/","title":"become","text":"<pre><code># \u200b\u63d0\u53d6\u200b\u4ee5\u200b root \u200b\u8eab\u4efd\u200b\u6267\u884c\u200b\n- do: something\n  become: true\n\n# \u200b\u5207\u6362\u200b\u5230\u200b\u6307\u5b9a\u200b\u7528\u6237\u200b\u6267\u884c\u200b\n- do: something\n  become: true\n  become_user: nginx\n</code></pre> <ul> <li>Difference between become and become_user in Ansible</li> </ul>"},{"location":"ansible/book/","title":"Book","text":"<pre><code># \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b\nansible all -m dnf -a 'name=php state=present use_backend=dnf4' --become\nansible all -m yum -a 'name=haproxy state=present' --become\n\n# \u200b\u7ba1\u7406\u8f6f\u4ef6\u200b\nansible all -m service -a \"name=haproxy state=started\" --become\n\n# \u200b\u88c5\u200b\u8f6f\u4ef6\u200b\nsudo yum -y install net-tools\n\n# \u200b\u67e5\u770b\u200b\u4e3b\u673a\u200b\u7684\u200b\u5173\u7cfb\u200b\nansible-inventory --graph\n\n# \u200b\u67e5\u770b\u200b\u4e3b\u673a\u200b\u5217\u8868\u200b\nansible -i hosts.yaml icms --list-hosts\nansible-playbook -i hosts.yaml playbook.yaml --list-hosts\n\n# \u200b\u8bed\u6cd5\u200b\u68c0\u67e5\u200b\nansible-playbook playbook.yaml --syntax-check\nansible-playbook playbook.yaml --check\n\n# \u200b\u67e5\u770b\u200b Module \u200b\u5e2e\u52a9\u200b\u624b\u518c\u200b\nansible-doc service\n\n# \u200b\u641c\u7d22\u200b\u6a21\u5757\u200b\nansible-doc -l | grep yum\n\n# \u200b\u68c0\u67e5\u200b playbook \u200b\u8bed\u6cd5\u200b\u662f\u5426\u200b\u6709\u8bef\u200b\nansible-playbook playbook.yaml --syntax-check\n</code></pre>"},{"location":"ansible/book/#inventory","title":"Inventory","text":"<pre><code># \u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b inventory\nansible all -i 'localhost,' -a date\n\n# \u200b\u67e5\u770b\u200b inventory \u200b\u63d2\u4ef6\u200b\nansible-doc -t inventory -l\n\n# \u200b\u7b80\u5355\u200b\u6267\u884c\u200b\nansible -i 'localhost,' all -a date\n\n# \u200b\u67e5\u770b\u200b facts\nansible -i hosts.ini all -m setup\nansible -i hosts.ini all -m setup -a 'filter=ansible_all_ipv4_addresses'\nansible -i hosts.ini all -m setup -a 'filter=ansible_env'\n\n# \u200b\u547d\u4ee4\u884c\u200b\u4f20\u9012\u200b\u53d8\u91cf\u200b\nansible-playbook playbook.yaml  -e \"greeting=hello\"\n</code></pre>"},{"location":"ansible/book/#chapter7","title":"Chapter7","text":"<pre><code># \u200b\u5b89\u88c5\u200b\u4f9d\u8d56\u200b\nsudo apt-get install libjpeg-dev zlib1g-dev\n\n# \u200b\u67e5\u770b\u200b task \u200b\u6e05\u5355\u200b \nansible-playbook --list-tasks playbook.yaml\n\n# \u200b\u514d\u8d39\u200b\u57df\u540d\u89e3\u6790\u200b\n192.168.1.5.nip.io\nwww.192.168.1.5.nip.io\n\n# \u200b\u6307\u5b9a\u200b ansible_python_interpreter \u200b\u6267\u884c\u200b\nansible-playbook playbook.yaml  -e 'ansible_python_interpreter=/usr/bin/python3'\n</code></pre>"},{"location":"ansible/book/#chapter8","title":"Chapter8","text":"<pre><code># \u200b\u67e5\u770b\u200b\u8be6\u7ec6\u200b\u6267\u884c\u200b\u8fc7\u7a0b\u200b\nansible -i hosts.yaml -m ping -vvvv\n\n# \u200b\u8bed\u6cd5\u200b\u68c0\u67e5\u200b\nansible-playbook --syntax-check playbook.yml\n\n# \u200b\u7f57\u5217\u200b\u4e3b\u673a\u200b\nansible-playbook --list-hosts playbook.yml\n\n# \u200b\u7f57\u5217\u200b\u4efb\u52a1\u200b\u6e05\u5355\u200b\nansible-playbook --list-tasks playbook.yaml\n\n# \u200b\u8bd5\u8fd0\u884c\u200b dry run\nansible-playbook --check playbook.yaml\n\n# \u200b\u67e5\u770b\u200b\u53ef\u80fd\u200b\u66f4\u65b0\u200b\u5230\u200b\u7684\u200b\u90e8\u5206\u200b\nansible-playbook --check --diff playbook.yaml\n\n# \u200b\u53ea\u200b\u8fd0\u884c\u200b\u6307\u5b9a\u200b\u7684\u200b tags role\nansible-playbook --tags=yuminstall playbook.yaml\n\n# \u200b\u53ea\u200b\u5728\u200b\u6307\u5b9a\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u8fd0\u884c\u200b\nansible-playbook --limit 172.31.96.101 playbook.yaml\nansible -i hosts.ini all --limit 172.31.96.102 -m setup\n</code></pre>"},{"location":"ansible/book/#chapter8_1","title":"Chapter8","text":"<pre><code># \u200b\u5b89\u88c5\u200b role\nansible-galaxy install oefenweb.ntp\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u7684\u200b role\nansible-galaxy role list\n\n# \u200b\u5378\u8f7d\u200b role\nansible-galaxy remove oefenweb.ntp\n</code></pre>"},{"location":"ansible/book/#chapter10","title":"Chapter10","text":"<pre><code># \u200b\u67e5\u770b\u200b\u6240\u6709\u200b lookup \u200b\u7c7b\u578b\u200b\u7684\u200b\u7ec4\u4ef6\u200b\nansible-doc  -t lookup --list\n\n# \u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u76f8\u5173\u200b fact \u200b\u53d8\u91cf\u200b\n\"ansible_os_family\": \"RedHat\"\n\"ansible_distribution\": \"Kylin Linux Advanced Server\"\n\"ansible_distribution_major_version\": \"V10\"\n\"ansible_distribution_release\": \"Tercel\"\n\"ansible_distribution_version\": \"V10\"\n\n# become \u200b\u65e0\u6cd5\u200b\u5e94\u7528\u200b\u5728\u200b include_tasks\ntasks:\n- ansible.builtin.include_tasks: redhat.yaml\n  vars:\n    ansible_become: yes\n\n# become \u200b\u65e0\u6cd5\u200b\u5e94\u7528\u200b\u5728\u200b include_role\ninclude_role:\n   name: myrole\n   apply:\n     become: true\n</code></pre>"},{"location":"ansible/book/#chapter11","title":"Chapter11","text":"<pre><code># \u200b\u5206\u6b65\u200b\u8c03\u8bd5\u200b\nansible-playbook playbook.yaml --step\n</code></pre>"},{"location":"ansible/book/#links","title":"Links","text":"<ul> <li>Using 'creates' arg in Ansible shell module</li> <li>How to install and use Nginx on CentOS 7 / RHEL 7</li> <li>Python 3 Support</li> <li>how can I specify the version of Python to use in an Ansible playbook?</li> <li>How to check if a file exists in Ansible?</li> <li>test-syntax</li> <li>playbooks_filters.html</li> <li>ansible_error_become_is_not_a_valid_attribute_for</li> <li>Use ansible_become instead of become in multinode devstack gate</li> <li>How To Use Variables in Ansible Playbooks</li> <li>Ansible - Looking for files and compare their hash</li> <li>Grouping tasks with blocks</li> <li>Controlling playbook execution: strategies and more</li> <li>Send the output from Ansible to a file [duplicate]</li> <li>Ansible: how to get output of shell script command on stdout?</li> <li>How to get current role name in an ansible task</li> </ul>"},{"location":"ansible/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":"<pre><code># Unable to restart service sshd: Failed to restart sshd.service: Connection timed out\\nSee system logs and 'systemctl status sshd.service' for details.\n# Unable to restart service sshd: Failed to restart sshd.service: Method call timed out\\nSee system logs and 'systemctl status sshd.service' for details.\n# \u200b\u8981\u200b\u6ce8\u610f\u200b\u7ed9\u200b handlers \u200b\u6dfb\u52a0\u200b become: true\nhandlers:\n- name: restart ssh\n  become: true\n  service:\n    name: sshd\n    state: restarted\n\n# sudo: must be setuid root\nchown root:root /usr/bin/sudo\nchmod 4755 /usr/bin/sudo\n\n# \u200b\u68c0\u67e5\u200b IP \u200b\u662f\u5426\u200b\u5728\u200b\u67d0\u4e2a\u200b\u7ec4\u200b\u91cc\u9762\u200b\n# when: inventory_hostname in groups[\"&lt;group name&gt;\"]\nwhen: inventory_hostname in groups[\"appservers\"]\n\n# \u200b\u78c1\u76d8\u200b\u5355\u4f4d\u200b\nkibibyte (k or KiB) - 1024 bytes\nkilobyte (K or KB) - 1000 bytes\nmebibyte (m or MiB) - 1024 kibibytes\nmegabyte (M or MB) - 1000 kilobytes\ngibibyte (g or GiB) - 1024 mebibytes\ngigabyte (G or GB) - 1000 megabytes\ntebibyte (t or TiB) - 1024 gibibytes\nterabyte (T or TB) - 1000 gigabytes\npibibyte (p or PiB) - 1024 tebibytes\npetabyte (P or PB) - 1000 gigabytes\nexbibyte (e or EiB) - 1024 pibibytes\nexabyte (E or EX) - 1000 petabytes\n</code></pre>"},{"location":"ansible/faq/#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Ubuntu 22.04 - how to properly restart sshd?</li> <li>Ansible delegate_to task trying to ssh</li> <li>Is it possible to copy a local file to a remove server without using the Copy module?</li> <li>Error after sudo-ing \"sudo: must be setuid root\"</li> <li>New Line in an Ansible String</li> <li>How to set a task to run for a specific inventory group?</li> <li>Ansible - Manage LVM logical volumes using the lvol module</li> <li>Closed add optional backup_dir for the backup option</li> <li>Controlling where tasks run: delegation and local actions</li> <li>How to use Linux shell command exit codes</li> <li>ansible\u200b\u4e2d\u6587\u200b\u6b0a\u5a01\u200b\u6307\u5357\u200b</li> <li>Configure your Chrony daemon with an Ansible playbook</li> <li>Using Ansible to manage RHEL 5 yesterday, today and tomorrow</li> <li>ansible user module always shows changed</li> </ul>"},{"location":"ansible/inventory/","title":"inventory","text":""},{"location":"ansible/inventory/#_1","title":"\u5b9a\u4e49\u200b\u6570\u7ec4","text":"<pre><code>[example]\n127.0.0.1 timezone=\"Europe/Amsterdam\" locales='[\"en_US\", \"nl_NL\"]'\n</code></pre> <ul> <li>How specify a list value as variable in ansible inventory file?</li> </ul>"},{"location":"ansible/skills/","title":"\u6280\u5de7","text":"<pre><code># \u200b\u5982\u679c\u200b\u503c\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u5ffd\u7565\u200b\u6539\u503c\u200b\nid: \"{{ item.state | default(omit) }}\"\n\n# \u200b\u5220\u9664\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\n- find:\n    paths: /opt/logs\n    patterns: \"*.log\"\n  register: find_results\n\n- file:\n    path: \"{{ item['path'] }}\"\n    state: absent\n  with_items: \"{{ find_results['files'] }}\"\n\n# \u200b\u8fd4\u56de\u200b JSON \u200b\u6570\u636e\u200b\n# \u200b\u901a\u8fc7\u200b\u914d\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b\nANSIBLE_CALLBACK_WHITELIST=json ANSIBLE_STDOUT_CALLBACK=json ansible-playbook ...\n# \u200b\u5168\u5c40\u200b\u914d\u7f6e\u200b ansible.cfg\n[defaults]\ncallback_whitelist=json\nstdout_callback=json\n\n# \u200b\u5411\u200b template \u200b\u6a21\u5757\u200b\u4f20\u9012\u200b\u53d8\u91cf\u200b\nvar1: \"{{ lookup('template', 'lookup-test.j2', template_vars=dict(variable1='var1')) | trim }}\"\nvar2: \"{{ lookup('template', 'lookup-test.j2', template_vars=dict(variable1='var1', variable2='var2')) | trim }}\"\n\n# connection \u200b\u548c\u200b delegate_to \u200b\u7684\u200b\u533a\u522b\u200b\n# The main difference between connection and delegate_to is that connection can be used at a play or task level, \n# whereas delegate_to operates at a task level only.\n# \u200b\u901a\u8fc7\u200b\u547d\u4ee4\u884c\u200b\nansible-playbook playbook.yml --connection=local\n\n# \u200b\u5728\u200b playbook \u200b\u914d\u7f6e\u200b\n- hosts: 127.0.0.1\n  connection: local\n\n# \u200b\u53ea\u200b\u5728\u200b\u4e00\u53f0\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u6267\u884c\u200b \nrun_once: true\n\n# if else \u200b\u4f7f\u7528\u200b\ndebug: \n  msg: \"{{ 'me' if st.stat.exists else 'you' }}\"\n\n# in \u200b\u6761\u4ef6\u200b\u7684\u200b\u4f7f\u7528\u200b\nwhen: 'item.id | string not in sh_vlan_id'\n\n# \u200b\u591a\u884c\u200b\u6a21\u5f0f\u200b\nshell: |\n  This text\n  has multiple\n  lines\n</code></pre>"},{"location":"ansible/skills/#links","title":"Links","text":"<ul> <li>How to delete *.web files only if they exist</li> <li>How do I make ansible-playbook log its output in a machine readable format like xml or json?</li> <li>writing ansible facts to a file from a playbook</li> <li>template_vars are not reset between calls for template lookup #55113</li> <li>ClosedAllow variables to be passed in to lookup</li> <li>Ansible - what is the purpose of the key \"run_once\" in a task file.yml?</li> <li>Controlling where tasks run: delegation and local actions\uf0c1</li> <li>How to do multiline shell script in Ansible</li> <li>ansible if else construct</li> <li>[WARNING]: when statements should not include jinja2 templating delimiters</li> <li>How to do multiline shell script in Ansible</li> <li>Ansible unarchive exclude syntax</li> <li>connection: local vs delegate_to: localhost</li> <li>Running Your Ansible Playbooks in Parallel and other strategies</li> </ul>"},{"location":"ansible/todo/","title":"TODO","text":"<ul> <li>Failed to get LVM version number</li> </ul>"},{"location":"ansible/use-cases/","title":"Use Cases","text":"<ul> <li>Using Ansible to automate Logical Volume Manager configurations</li> </ul>"},{"location":"apollo/install/","title":"Apollo \u200b\u914d\u7f6e\u200b\u4e2d\u5fc3\u200b\u5b89\u88c5\u200b\u6559\u7a0b","text":"<p>\u200b\u4e0b\u9762\u200b\u5c06\u200b\u6309\u7167\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72\u200b\u6307\u5357\u200b\u5b89\u88c5\u200b Apollo 2.3.0</p>"},{"location":"apollo/install/#_1","title":"\u4e0b\u8f7d\u5b89\u88c5\u200b\u4ecb\u8d28","text":"<p>\u200b\u5c06\u200b\u6240\u6709\u200b\u5b89\u88c5\u200b\u4ecb\u8d28\u200b\u4e0b\u8f7d\u200b\u5230\u200b <code>/opt</code> \u200b\u76ee\u5f55\u200b</p> <pre><code>cd /opt\nsudo wget https://github.com/apolloconfig/apollo/blob/master/scripts/sql/profiles/mysql-default/apolloconfigdb.sql\nsudo wget https://github.com/apolloconfig/apollo/blob/master/scripts/sql/profiles/mysql-default/apolloportaldb.sql\nsudo wget https://github.com/apolloconfig/apollo/releases/download/v2.3.0/apollo-portal-2.3.0-github.zip\nsudo wget https://github.com/apolloconfig/apollo/releases/download/v2.3.0/apollo-configservice-2.3.0-github.zip\nsudo wget https://github.com/apolloconfig/apollo/releases/download/v2.3.0/apollo-adminservice-2.3.0-github.zip\n</code></pre>"},{"location":"apollo/install/#_2","title":"\u5b89\u88c5\u200b\u524d\u200b\u51c6\u5907","text":""},{"location":"apollo/install/#_3","title":"\u521b\u5efa\u200b\u7a0b\u5e8f\u200b\u7528\u6237","text":"<pre><code>sudo useradd apollo\nsudo useradd apollo;echo Pawrd01\\!|passwd --stdin apollo\nsudo chage -M 99999 apollo\n</code></pre>"},{"location":"apollo/install/#_4","title":"\u521b\u5efa\u200b\u5b89\u88c5\u200b\u76ee\u5f55","text":"<pre><code>sudo mkdir /opt/apollo-configservice \nsudo mkdir /opt/apollo-adminservice\nsudo mkdir /opt/apollo-portal\nsudo mkdir /opt/logs\nsudo chown apollo:apollo /opt/apollo-* /opt/logs\n</code></pre>"},{"location":"apollo/install/#_5","title":"\u521b\u5efa\u200b\u6570\u636e\u5e93","text":"<p>\u200b\u521b\u5efa\u200b <code>ApolloPortalDB</code> \u200b\u548c\u200b <code>ApolloConfigDB</code> \u200b\u4e24\u4e2a\u200b\u6570\u636e\u5e93\u200b\uff0c\u200b\u4f7f\u7528\u200b\u7ba1\u7406\u5458\u200b\u767b\u5f55\u200b\u5230\u200b\u6570\u636e\u5e93\u200b\u540e\u200b\uff0c\u200b\u6267\u884c\u200b\u4e0b\u9762\u200b\u8bed\u53e5\u200b</p> <pre><code>source /opt/apolloportaldb.sql\nsource /opt/apolloconfigdb.sql\n</code></pre> <p>\u200b\u8be5\u200b\u6b65\u9aa4\u200b\u4e00\u822c\u200b\u7531\u200b\u6570\u636e\u5e93\u7ba1\u7406\u5458\u200b\u6267\u884c\u200b</p>"},{"location":"apollo/install/#configservice","title":"\u5b89\u88c5\u200b ConfigService","text":"<p>\u200b\u89e3\u538b\u200b\u5b89\u88c5\u5305\u200b</p> <pre><code>sudo mv /opt/apollo-configservice-2.3.0-github.zip /opt/apollo-configservice\ncd /opt/apollo-configservice\nsudo unzip apollo-configservice-2.3.0-github.zip\nsudo rm -f apollo-configservice-2.3.0-github.zip\nchown -R apollo:apollo /opt/apollo-configservice\n</code></pre> <p>\u200b\u4fee\u6539\u200b\u6570\u636e\u5e93\u200b\u8fde\u63a5\u200b\u914d\u7f6e\u200b</p> <pre><code>sudo vim /opt/apollo-configservice/config/application-github.properties\n</code></pre> <p>\u200b\u6309\u200b\u5b9e\u9645\u200b\u586b\u5199\u200b\u6570\u636e\u5e93\u200b IP\u3001\u200b\u8d26\u53f7\u200b\u548c\u200b\u5bc6\u7801\u200b\u4fe1\u606f\u200b</p> <pre><code>spring.datasource.url = jdbc:mysql://DB_HOST:DB_PORT/ApolloConfigDB?characterEncoding=utf8\nspring.datasource.username = DB_USERNAME\nspring.datasource.password = DB_PASSWORD\n</code></pre> <p>\u200b\u65b0\u589e\u200b systemd \u200b\u8fdb\u7a0b\u200b\u7ba1\u7406\u200b\u914d\u7f6e\u200b</p> <pre><code>sudo vim /etc/systemd/system/apollo-configservice.service\n</code></pre> <p>\u200b\u5c06\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\u7c98\u8d34\u200b\u8fdb\u53bb\u200b</p> <pre><code>[Unit]\nDescription=apollo-configservice\nRequires=network.target\nAfter=network.target\n\n[Service]\nType=forking\nUser=apollo\nGroup=apollo\nWorkingDirectory=/opt/apollo-configservice\nExecStart=/opt/apollo-configservice/scripts/startup.sh\nExecStop=/opt/apollo-configservice/scripts/shutdown.sh\nLimitNOFILE=65536\nTimeoutSec=120\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>\u200b\u542f\u52a8\u200b ConfigService \u200b\u670d\u52a1\u200b</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl start apollo-configservice.service\n</code></pre>"},{"location":"apollo/install/#adminservice","title":"\u5b89\u88c5\u200b AdminService","text":"<p>\u200b\u89e3\u538b\u200b\u5b89\u88c5\u5305\u200b</p> <pre><code>sudo mv /opt/apollo-adminservice-2.3.0-github.zip /opt/apollo-adminservice\ncd /opt/apollo-adminservice\nsudo unzip apollo-adminservice-2.3.0-github.zip\nsudo rm -f apollo-adminservice-2.3.0-github.zip\nchown -R apollo:apollo /opt/apollo-adminservice\n</code></pre> <p>\u200b\u4fee\u6539\u200b\u6570\u636e\u5e93\u200b\u8fde\u63a5\u200b\u914d\u7f6e\u200b</p> <pre><code>sudo vim /opt/apollo-adminservice/config/application-github.properties\n</code></pre> <p>\u200b\u6309\u200b\u5b9e\u9645\u200b\u586b\u5199\u200b\u6570\u636e\u5e93\u200b IP\u3001\u200b\u8d26\u53f7\u200b\u548c\u200b\u5bc6\u7801\u200b\u4fe1\u606f\u200b</p> <pre><code>spring.datasource.url = jdbc:mysql://DB_HOST:DB_PORT/ApolloConfigDB?characterEncoding=utf8\nspring.datasource.username = DB_USERNAME\nspring.datasource.password = DB_PASSWORD\n</code></pre> <p>\u200b\u65b0\u589e\u200b systemd \u200b\u8fdb\u7a0b\u200b\u7ba1\u7406\u200b\u914d\u7f6e\u200b</p> <pre><code>sudo vim /etc/systemd/system/apollo-adminservice.service\n</code></pre> <p>\u200b\u5c06\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\u7c98\u8d34\u200b\u8fdb\u53bb\u200b</p> <pre><code>[Unit]\nDescription=apollo-adminservice\nRequires=network.target\nAfter=network.target\n\n[Service]\nType=forking\nUser=apollo\nGroup=apollo\nWorkingDirectory=/opt/apollo-adminservice\nExecStart=/opt/apollo-adminservice/scripts/startup.sh\nExecStop=/opt/apollo-adminservice/scripts/shutdown.sh\nLimitNOFILE=65536\nTimeoutSec=120\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>\u200b\u542f\u52a8\u200b AdminService \u200b\u670d\u52a1\u200b</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl start apollo-adminservice.service\n</code></pre>"},{"location":"apollo/install/#portal","title":"\u5b89\u88c5\u200b Portal","text":"<p>\u200b\u89e3\u538b\u200b\u5b89\u88c5\u5305\u200b</p> <pre><code>sudo mv /opt/apollo-portal-2.3.0-github.zip /opt/apollo-portal\ncd /opt/apollo-portal\nsudo unzip apollo-portal-2.3.0-github.zip\nsudo rm -f apollo-portal-2.3.0-github.zip\nchown -R apollo:apollo /opt/apollo-portal\n</code></pre> <p>\u200b\u4fee\u6539\u200b\u6570\u636e\u5e93\u200b\u8fde\u63a5\u200b\u914d\u7f6e\u200b</p> <pre><code>sudo vim /opt/apollo-portal/config/application-github.properties\n</code></pre> <p>\u200b\u6309\u200b\u5b9e\u9645\u200b\u586b\u5199\u200b\u6570\u636e\u5e93\u200b IP\u3001\u200b\u8d26\u53f7\u200b\u548c\u200b\u5bc6\u7801\u200b\u4fe1\u606f\u200b</p> <pre><code>spring.datasource.url = jdbc:mysql://DB_HOST:DB_PORT/ApolloPortalDB?characterEncoding=utf8\nspring.datasource.username = DB_USERNAME\nspring.datasource.password = DB_PASSWORD\n</code></pre> <p>\u200b\u4fee\u6539\u200b apollo.portal.envs</p> <pre><code>sudo vim /opt/apollo-portal/config/apollo-env.properties\n</code></pre> <p>\u200b\u6d4b\u8bd5\u73af\u5883\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b</p> <pre><code>dev.meta=http://CONFIGSERVICE_SERVER1:8080,http://CONFIGSERVICE_SERVER2:8080,...\n</code></pre> <p>\u200b\u751f\u4ea7\u200b\u73af\u5883\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b</p> <pre><code>pro.meta=http://CONFIGSERVICE_SERVER1:8080,http://CONFIGSERVICE_SERVER2:8080,...\n</code></pre> <p>\u200b\u65b0\u589e\u200b systemd \u200b\u8fdb\u7a0b\u200b\u7ba1\u7406\u200b\u914d\u7f6e\u200b</p> <pre><code>sudo vim /etc/systemd/system/apollo-portal.service\n</code></pre> <p>\u200b\u5c06\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\u7c98\u8d34\u200b\u8fdb\u53bb\u200b</p> <pre><code>[Unit]\nDescription=apollo-portal\nRequires=network.target\nAfter=network.target\n\n[Service]\nType=forking\nUser=apollo\nGroup=apollo\nWorkingDirectory=/opt/apollo-portal\nExecStart=/opt/apollo-portal/scripts/startup.sh\nExecStop=/opt/apollo-portal/scripts/shutdown.sh\nLimitNOFILE=65536\nTimeoutSec=120\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>\u200b\u542f\u52a8\u200b Portal \u200b\u670d\u52a1\u200b</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl start apollo-portal.service\n</code></pre>"},{"location":"apollo/install/#_6","title":"\u90e8\u7f72\u200b\u540e\u200b\u9a8c\u8bc1","text":"<p>\u200b\u6d4f\u89c8\u5668\u200b\u6253\u5f00\u200b http://PORTAL_SERVER:8070\uff0c\u200b\u4f7f\u7528\u200b\u7528\u6237\u540d\u200b apollo\uff0c\u200b\u5bc6\u7801\u200b admin \u200b\u767b\u5f55\u200b\u5230\u200b\u63a7\u5236\u53f0\u200b\u8fdb\u884c\u200b\u7ba1\u7406\u200b\u3002</p>"},{"location":"cheetsheet/ansible/","title":"Ansible","text":""},{"location":"cheetsheet/ansible/#touch-changed","title":"touch \u200b\u6bcf\u6b21\u200b\u6267\u884c\u200b\u90fd\u200b\u662f\u200b changed","text":"<p>\u200b\u6dfb\u52a0\u200b <code>access_time: preserve</code> \u200b\u548c\u200b <code>modification_time: preserve</code> \u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u53c2\u6570\u200b\uff0c\u200b\u5f53\u7136\u200b\u4f60\u200b\u4e0d\u7ba1\u200b\u5b83\u200b\u4e5f\u200b\u53ef\u4ee5\u200b</p> <pre><code>- name: Touch file\n  file:\n    path: /etc/file.conf\n    state: touch\n    access_time: preserve\n    modification_time: preserve\n</code></pre> <ul> <li>file touch always 'changed' - [was: need a separate touch module]</li> </ul>"},{"location":"cheetsheet/ansible/#forks","title":"forks \u200b\u7684\u200b\u4f7f\u7528","text":"<p>\u200b\u8be5\u200b\u53c2\u6570\u200b\u6307\u5b9a\u200b\u4e86\u200b task \u200b\u6bcf\u6b21\u200b\u6700\u591a\u80fd\u200b\u5728\u200b\u591a\u5c11\u200b\u53f0\u200b\u673a\u5668\u200b\u4e0a\u200b\u6267\u884c\u200b</p> <p>\u200b\u5728\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u4f7f\u7528\u200b</p> <pre><code>ansible-playbook --forks=100 ...\n</code></pre> <p>\u200b\u5728\u200b ansible.cfg \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u914d\u7f6e\u200b</p> <pre><code>[defaults]\nforks=100\n</code></pre>"},{"location":"cheetsheet/ansible/#run_once","title":"run_once \u200b\u7684\u200b\u4f7f\u7528","text":"<p>\u200b\u53ea\u200b\u5728\u200b\u5176\u4e2d\u200b\u4e00\u53f0\u200b\u670d\u52a1\u5668\u200b\u6267\u884c\u200b\u8be5\u200b task\uff0c\u200b\u4e00\u822c\u200b\u662f\u200b\u7b2c\u4e00\u53f0\u200b</p> <pre><code>- name: First task that will only be run on dns.example.com\n  command: echo \"This is the first task\"\n  run_once: true\n</code></pre>"},{"location":"cheetsheet/ansible/#if-else","title":"if else \u200b\u7684\u200b\u4f7f\u7528","text":"<p>\u200b\u5728\u200b task \u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u4e2d\u200b\u4f7f\u7528\u200b</p> <pre><code># \u200b\u6ce8\u610f\u200b\u5b83\u200b\u7684\u200b\u8bed\u6cd5\u200b\u662f\u200b 'value1' if xxx else 'value1'\n# \u200b\u540c\u65f6\u200b\uff0c\u200b\u8981\u200b\u5224\u65ad\u200b\u53d8\u91cf\u200b\u662f\u5426\u200b\u4e3a\u200b true\uff0c\u200b\u9700\u200b\u4f7f\u7528\u200b filter variable | bool \u200b\u8fd9\u6837\u200b\u7684\u200b\u5199\u6cd5\u200b\n- debug:\n  msg: \"{{ '/usr/sbin/nologin' if nginx_run_noshell is defined and (nginx_run_noshell | bool) else '/bin/bash' }}\"\n\n# omit \u200b\u5173\u952e\u5b57\u200b\u7684\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u5ffd\u7565\u200b\u8be5\u5b57\u6bb5\u200b\n- user:\n    password: \"{{ nginx_run_pass | password_hash('sha512', 'suhua123') if nginx_run_pass is defined else omit }}\"\n\n# \u200b\u5728\u200b when \u200b\u4e2d\u200b\u4f7f\u7528\u200b\nwhen:\n  - nginx_run_noshell | bool\n\n# not \u200b\u5426\u5b9a\u200b\nwhen: not nginx_status.stat.exists\n</code></pre> <ul> <li>Ansible \"when variable == true\" not behaving as expected</li> </ul>"},{"location":"cheetsheet/ansible/#password_hash","title":"password_hash \u200b\u7684\u200b\u4f7f\u7528","text":"<p>\u200b\u5728\u200b ansible \u200b\u4e2d\u200b\u4f7f\u7528\u200b\u660e\u6587\u200b\u7684\u200b\u7528\u6237\u200b\u5bc6\u7801\u200b\uff0c\u200b\u5f53\u7136\u200b\u4f60\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u7528\u200b ansible-vault</p> <pre><code>- user:\n    password: \"{{ mypassword | password_hash('sha512', 'saltsecret') }}\"\n</code></pre> <p>\u200b\u5982\u679c\u200b\u4f60\u200b\u4e0d\u60f3\u200b\u522b\u4eba\u200b\u77e5\u9053\u200b\u5bc6\u7801\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5b9a\u4e49\u200b\u4e00\u4e2a\u200b\u52a0\u5bc6\u200b\u540e\u200b\u7684\u200b\u5bc6\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b\u4e0b\u9762\u200b\u65b9\u6cd5\u200b\u751f\u6210\u200b\u5bc6\u7801\u200b</p> <pre><code>ansible -i localhost, all -m debug -a \"msg={{ 'mypassword' | password_hash('sha512') }}\"\n</code></pre>"},{"location":"cheetsheet/docker/","title":"Docker","text":""},{"location":"cheetsheet/docker/#_1","title":"\u8fc1\u79fb\u200b\u6570\u636e\u200b\u76ee\u5f55","text":"<p>\u200b\u5982\u679c\u200b\u5b58\u653e\u200b Docker \u200b\u955c\u50cf\u200b\u7684\u200b\u78c1\u76d8\u7a7a\u95f4\u200b\u4e0d\u591f\u200b\u4e86\u200b\uff0c\u200b\u4f60\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u5c06\u200b\u5b83\u200b\u79fb\u52a8\u200b\u5230\u200b\u5176\u4ed6\u200b\u78c1\u76d8\u200b\u4e0a\u200b</p> <pre><code># \u200b\u505c\u6b62\u200b\u670d\u52a1\u200b\nsudo systemctl stop docker\nsudo systemctl stop docker.socket\nsudo systemctl stop containerd\n\n# \u200b\u79fb\u52a8\u200b\u6570\u636e\u200b\u76ee\u5f55\u200b\nsudo mv /var/lib/docker /opt\n\n# \u200b\u4fee\u6539\u200b\u6570\u636e\u200b\u76ee\u5f55\u200b\u4f4d\u7f6e\u200b\nsudo vim /etc/docker/daemon.json\n{\n  \"data-root\": \"/opt/docker\"\n}\n\n# \u200b\u542f\u52a8\u200b Docker\nsudo systemctl start docker\n\n# \u200b\u68c0\u67e5\u200b Docker \u200b\u6570\u636e\u200b\u76ee\u5f55\u200b\u662f\u5426\u200b\u5df2\u200b\u66f4\u65b0\u200b\nsudo docker info -f '{{ .DockerRootDir}}'\n</code></pre> <ul> <li>Relocating the Docker root directory</li> </ul>"},{"location":"cheetsheet/linux/cron/","title":"cron","text":""},{"location":"cheetsheet/linux/cron/#contab","title":"\u5141\u8bb8\u200b\u666e\u901a\u7528\u6237\u200b\u4f7f\u7528\u200b contab \u200b\u547d\u4ee4","text":"<p>\u200b\u6709\u4e9b\u200b\u53d1\u884c\u7248\u200b\uff0c\u200b\u5982\u200b RHEL \u200b\u548c\u200b Kylin \u200b\u7b49\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u666e\u901a\u7528\u6237\u200b\u4f7f\u7528\u200b crontab \u200b\u914d\u7f6e\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\uff0c\u200b\u5728\u200b\u4e00\u4e2a\u200b\u5206\u5de5\u200b\u4e0d\u662f\u200b\u90a3\u4e48\u200b\u660e\u786e\u200b\u7684\u200b\u7ec4\u7ec7\u200b\u91cc\u200b\u6216\u8005\u200b\u5176\u4ed6\u200b\u539f\u56e0\u200b\uff0c\u200b\u6709\u65f6\u5019\u200b\u6388\u4e88\u200b\u666e\u901a\u7528\u6237\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u914d\u7f6e\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b</p> <pre><code># \u200b\u5141\u8bb8\u200b suhua \u200b\u4f7f\u7528\u200b crontab \necho 'suhua' &gt;&gt; /etc/cron.allow\n</code></pre> <p>\u200b\u6216\u8005\u200b\u5141\u8bb8\u200b\u6240\u6709\u4eba\u200b\u4f7f\u7528\u200b crontab\uff0c\u200b\u5b83\u200b\u7684\u200b\u89c4\u5219\u200b\u5f88\u200b\u7b80\u5355\u200b\uff0c\u200b\u5982\u679c\u200b /etc/cron.allow \u200b\u6587\u4ef6\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u7528\u6237\u200b\u5fc5\u987b\u200b\u5728\u200b\u8be5\u200b\u6587\u4ef6\u200b\u624d\u80fd\u200b\u4f7f\u7528\u200b crontab\u3002\u200b\u800c\u200b\u5982\u679c\u200b /etc/cron.allow \u200b\u4e0d\u200b\u5728\u200b\uff0c\u200b\u4f46\u662f\u200b /etc/cron.deny \u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u9664\u4e86\u200b\u5728\u200b /etc/cron.deny \u200b\u7684\u200b\u7528\u6237\u200b\u4e0d\u80fd\u200b\u4f7f\u7528\u200b crontab \u200b\u5916\u200b\uff0c\u200b\u5176\u4ed6\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u3002</p> <pre><code>rm -f /etc/cron.allow\ntouch /etc/cron.deny\nchmod 600 /etc/cron.deny\n</code></pre> <ul> <li>How to allow or deny users the <code>cron</code> or <code>at</code> command.</li> </ul>"},{"location":"cheetsheet/linux/file/","title":"file","text":""},{"location":"cheetsheet/linux/file/#_1","title":"\u4fee\u6539\u200b\u6587\u4ef6\u200b\u7684\u200b\u4fee\u6539\u200b\u65f6\u95f4\u200b\u5c5e\u6027","text":"<pre><code>touch -a -m -t 201512180130.09 fileName.ext\n\n# -a = accessed\n# -m = modified\n# -t = timestamp - use [[CC]YY]MMDDhhmm[.ss] time format\n</code></pre> <ul> <li>How can I change the date modified/created of a file?</li> </ul>"},{"location":"coredns/","title":"CoreOS","text":"<p>\u200b\u540c\u7c7b\u200b\u7684\u200b DNS \u200b\u8fd8\u6709\u200b dnsmasq\u3001bind \u200b\u7b49\u200b\u3002\u200b\u4e4b\u6240\u4ee5\u200b\u9009\u62e9\u200b CoreDNS \u200b\u662f\u56e0\u4e3a\u200b\u5b83\u200b\u975e\u5e38\u200b\u8f7b\u4fbf\u200b\u548c\u200b\u6613\u7528\u200b\uff0c\u200b\u540c\u65f6\u200b\u4e5f\u200b\u662f\u200b\u4e3a\u4e86\u200b\u719f\u6089\u200b Kubenetes \u200b\u7684\u200b\u8fd0\u4f5c\u200b\u3002</p>"},{"location":"coredns/client/","title":"\u5ba2\u6237\u7aef\u200b\u914d\u7f6e","text":""},{"location":"coredns/client/#kylin-v10","title":"Kylin V10","text":"<p>\u200b\u4fee\u6539\u200b DNS \u200b\u914d\u7f6e\u200b</p> <pre><code># /etc/systemd/resolved.conf\n[Resolve]\nDNS=192.168.1.100\n</code></pre> <p>\u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\u751f\u6548\u200b</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart systemd-resolved\n</code></pre>"},{"location":"coredns/install/","title":"\u5b89\u88c5","text":"<p>\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b Docker \u200b\u6216\u8005\u200b\u4e8c\u8fdb\u5236\u200b\u65b9\u5f0f\u200b\u5b89\u88c5\u200b\uff0c\u200b\u4e2a\u4eba\u200b\u504f\u5411\u200b\u4e8e\u200b\u4f7f\u7528\u200b Docker\uff0c\u200b\u5e76\u200b\u5728\u200b\u5b98\u65b9\u200b\u955c\u50cf\u200b\u57fa\u7840\u200b\u4e0a\u200b\u505a\u200b\u4e86\u200b\u5c01\u88c5\u200b\uff0c\u200b\u8be6\u89c1\u200b aisuhua/docker-coredns\u3002</p>"},{"location":"coredns/install/#_2","title":"\u5b89\u88c5","text":"<pre><code>git clone git@github.com:aisuhua/docker-coredns.git\ncd docker-coredns\ndocker-compose up\n</code></pre>"},{"location":"coredns/install/#_3","title":"\u9a8c\u8bc1","text":"<pre><code>dig @127.0.0.1 master1.ocp1.example.com\ndig @127.0.0.1 -x 192.168.1.20\n</code></pre>"},{"location":"css/","title":"CSS","text":"<pre><code>/* \u200b\u4ee3\u7801\u200b\u8fc7\u957f\u200b\u81ea\u52a8\u200b\u6362\u884c\u200b\uff0c\u200b\u907f\u514d\u51fa\u73b0\u200b\u6a2a\u5411\u200b\u6eda\u52a8\u6761\u200b */\npre code {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n\n/* \u200b\u9875\u9762\u200b\u7070\u8272\u200b\u6548\u679c\u200b */\nhtml{\n  filter: grayscale(100%) !important;\n}\n\n* {\n  filter: gray !important;\n}\n</code></pre>"},{"location":"docker/","title":"Docker","text":""},{"location":"docker/#_1","title":"\u7a7a\u95f4\u200b\u6e05\u7406","text":"<pre><code>docker system prune\ndocker volume prune\ndocker image prune,\ndocker container prune\n</code></pre> <ul> <li>How to remove all docker volumes?</li> </ul>"},{"location":"docker/#container","title":"Container","text":"<pre><code># \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u5df2\u200b\u505c\u6b62\u200b\u7684\u200b\u5bb9\u5668\u200b\ndocker container prune -f\n\n# \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u5bb9\u5668\u200b\uff0c\u200b\u9664\u4e86\u200b php \u200b\u548c\u200b nginx\ndocker rm $(docker ps -a | grep -Ewv \"php|nginx\" | awk 'NR&gt;1 {print $1}')\n\n# \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u5bb9\u5668\u200b\ndocker rm -vf $(docker ps -aq)\n\n# \u200b\u4ea4\u4e92\u5f0f\u200b\u4f7f\u7528\u200b\nocker run -u \"$(id -u):$(id -g)\" -v $PWD:/app --tty --interactive --workdir /app ghcr.io/getzola/zola:v0.16.0 init\n</code></pre>"},{"location":"docker/#volume","title":"Volume","text":"<pre><code># \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u6ca1\u200b\u5728\u200b\u4f7f\u7528\u200b\u7684\u200b\u5377\u200b\ndocker volume prune\n</code></pre>"},{"location":"docker/#image","title":"Image","text":"<pre><code># \u200b\u4ece\u5c0f\u5230\u5927\u200b\u6392\u5e8f\u200b\u955c\u50cf\u200b\ndocker images --format \"{{.ID}}\\t{{.Size}}\\t{{.Repository}}:{{.Tag}}\" | sort -k 2 -h\n\n# \u200b\u6e05\u7406\u200b none \u200b\u955c\u50cf\u200b\ndocker rmi $(docker images --filter \"dangling=true\" -q --no-trunc)\n\n# \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u955c\u50cf\u200b\uff0c\u200b\u9664\u4e86\u200b php \u200b\u548c\u200b alpine\ndocker rmi $(docker images -a | grep -Ewv 'php|alpine' | awk {'print $1'})\n\n# \u200b\u6e05\u7a7a\u200b\u6240\u6709\u200b\u955c\u50cf\u200b\ndocker rmi -f $(docker images -aq)\n\n# \u200b\u5bfc\u51fa\u200b\u955c\u50cf\u200b\ndocker save nginx:latest | gzip &gt; nginx.gz\n\n# \u200b\u5bfc\u5165\u200b\u955c\u50cf\u200b\ndocker load -i nginx.gz\n</code></pre>"},{"location":"docker/#build","title":"Build","text":"<pre><code># Ubuntu \u200b\u975e\u200b\u4ea4\u4e92\u65b9\u5f0f\u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b\nARG DEBIAN_FRONTEND=noninteractive\n</code></pre>"},{"location":"docker/#ssl","title":"SSL","text":"<pre><code># \u200b\u5355\u72ec\u200b\u7ed9\u200b\u4ed3\u5e93\u200b\u914d\u7f6e\u200b\u6839\u200b\u8bc1\u4e66\u200b\ncp ca.crt /etc/docker/certs.d/yourdomain.com:port/\n</code></pre>"},{"location":"docker/#backup","title":"Backup","text":"<pre><code># \u200b\u5b89\u88c5\u200b\nsudo curl -sSL https://raw.githubusercontent.com/BretFisher/docker-vackup/main/vackup &gt; /usr/local/bin/vackup\nsudo chmod +x /usr/local/bin/vackup\n\n# \u200b\u5907\u4efd\u200b\u548c\u200b\u6062\u590d\u200b volume\nvackup export VOLUME_NAME VOLUME_NAME.tar.gz\nvackup import VOLUME_NAME.tar.gz VOLUME_NAME\n</code></pre>"},{"location":"docker/#_2","title":"\u8fc1\u79fb\u200b\u6570\u636e\u200b\u76ee\u5f55","text":"<pre><code>sudo systemctl stop docker\nsudo systemctl stop docker.socket\nsudo systemctl stop containerd\n\nsudo mkdir -p /new_dir_structure\nsudo mv /var/lib/docker /new_dir_structure\nsudo vim /etc/docker/daemon.json\n{\n  \"data-root\": \"/new_dir_structure/docker\"\n}\nsudo systemctl start docker\ndocker info -f '{{ .DockerRootDir}}'\n</code></pre>"},{"location":"docker/#_3","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Back Up and Share Docker Volumes with This Extension</li> <li>https://github.com/BretFisher/docker-vackup</li> <li>Relocating the Docker root directory</li> </ul>"},{"location":"docker/build/","title":"build","text":"<pre><code># \u200b\u907f\u514d\u200b\u8054\u7f51\u200b\u62c9\u53d6\u200b\u8fdc\u7a0b\u200b\u955c\u50cf\u200b\nDOCKER_BUILDKIT=0 docker compose build\n</code></pre> <ul> <li>https://github.com/docker/compose/issues/9939#issuecomment-1332668317</li> </ul>"},{"location":"docker/install/","title":"\u5b89\u88c5","text":""},{"location":"docker/install/#docker","title":"\u5b89\u88c5\u200b Docker","text":"<pre><code>sudo apt-get update\n\nsudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common\nsudo curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\nsudo add-apt-repository -y \"deb [arch=$(dpkg --print-architecture)] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"\n\nsudo apt-get -y install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\nsudo systemctl start docker\nsudo systemctl enable docker\n</code></pre> <ul> <li>\u200b\u5b89\u88c5\u200bDocker</li> </ul>"},{"location":"docker/install/#_2","title":"\u56fd\u5185\u200b\u6e90","text":"<pre><code>cat &lt;&lt; EOF | sudo tee /etc/docker/daemon.json\n{\n  \"registry-mirrors\":[\n    \"https://hub-mirror.c.163.com\",\n    \"https://mirror.baidubce.com\",\n    \"https://qby02i3s.mirror.aliyuncs.com\",\n    \"https://docker.mirrors.ustc.edu.cn\"\n  ],\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  }\n}\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n</code></pre>"},{"location":"docker/install/#_3","title":"\u6388\u6743\u200b\u666e\u901a\u7528\u6237","text":"<pre><code>sudo groupadd docker\nsudo usermod -aG docker $USER\n\n# activate the changes to groups\nnewgrp docker\n</code></pre>"},{"location":"docker/install/#_4","title":"\u6dfb\u52a0\u200b\u975e\u200b\u5b89\u5168\u200b\u955c\u50cf\u200b\u4ed3\u5e93","text":"<p><code>vim /etc/docker/daemon.json</code></p> <pre><code>{\n  \"insecure-registries\" : [\n    \"http://registry.example.com:5000\"\n  ]\n}\n</code></pre>"},{"location":"docker/install/#links","title":"Links","text":"<ul> <li>Linux post-installation steps for Docker Engine</li> </ul>"},{"location":"docker/multi-platform/","title":"multi-platform","text":"<p>\u200b\u4ece\u200b yum \u200b\u6e90\u200b\u5b89\u88c5\u200b docker \u200b\u548c\u200b buildx</p> <pre><code>sudo yum -y update\nsudo wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/rhel/docker-ce.repo\nsudo yum -y install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre> <p>\u200b\u4ece\u200b\u4e8c\u8fdb\u5236\u200b\u5b89\u88c5\u200b</p> <pre><code># install docker engine\nwget https://download.docker.com/linux/static/stable/x86_64/docker-24.0.9.tgz\ntar -zcvf docker-24.0.9.tgz\ncp docker-24.0.9/* /usr/local/bin/\n\n# install docker buildx\nwget https://github.com/docker/buildx/releases/download/v0.19.2/buildx-v0.19.2.linux-amd64\nmkdir -p ~/.docker/cli-plugins\ncp buildx-v0.19.2.linux-amd64 ~/.docker/cli-plugins/docker-buildx\nchmod a+x ~/.docker/cli-plugins/docker-buildx\n</code></pre> <p>\u200b\u4fee\u6539\u200b containerd image store</p> <pre><code>vim /etc/docker/daemon.json\n{\n  \"features\": {\n    \"containerd-snapshotter\": true\n  }\n}\n\nsystemctl restart docker\n</code></pre> <p>\u200b\u5b89\u88c5\u200b QEMU</p> <pre><code>docker run --privileged --rm tonistiigi/binfmt --install all\n</code></pre> <p>\u200b\u68c0\u67e5\u200b\u652f\u6301\u200b\u7f16\u8bd1\u6210\u200b\u7684\u200b\u67b6\u6784\u200b</p> <pre><code>docker buildx ls\n</code></pre> <p>\u200b\u7f16\u5199\u200b\u591a\u200b\u5e73\u53f0\u200b\u955c\u50cf\u200b</p> <pre><code># Dockerfile\nFROM hub.geekery.cn/ubuntu:24.04\nRUN uname -m &gt; /arch\n\ndocker build -t test:v1 --platform linux/arm64 --load .\ndocker build -t 10.0.0.1:5000/test:v1 --platform linux/arm64,linux/amd64 --push .\n</code></pre> <p>\u200b\u4ee5\u200b\u6307\u5b9a\u200b CPU \u200b\u67b6\u6784\u200b\u8fd0\u884c\u200b\u955c\u50cf\u200b</p> <pre><code>docker run --rm --platform linux/amd64 test:v1 cat /arch\ndocker run --rm --platform linux/arm64 test:v1 cat /arch\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u955c\u50cf\u200b\u7684\u200b manifest \u200b\u4fe1\u606f\u200b</p> <pre><code>docker inspect test:v1\ncurl https://10.0.0.1:5000/v2/test/manifests/v1 -H 'Accept: application/vnd.oci.image.index.v1+json'\n</code></pre> <p>\u200b\u62c9\u53d6\u200b\u6307\u5b9a\u200b\u67b6\u6784\u200b\u7684\u200b\u955c\u50cf\u200b</p> <pre><code>docker pull --platform linux/arm64 test:v1\ndocker pull --platform linux/amd64 test:v1\n</code></pre> <p>\u200b\u6216\u8005\u200b\u901a\u8fc7\u200b sha256 \u200b\u62c9\u53d6\u200b\u6307\u5b9a\u200b\u67b6\u6784\u200b\u7684\u200b\u955c\u50cf\u200b</p> <pre><code>docker pull test@sha256xxxxx\n</code></pre>"},{"location":"docker/multi-platform/#ref","title":"ref","text":"<ul> <li>https://docs.docker.com/build/building/multi-platform/</li> <li>https://docs.docker.com/build/concepts/overview/</li> <li>https://github.com/docker/buildx/issues/59#issuecomment-1168619521</li> <li>https://blog.csdn.net/liuzhenghua66/article/details/140269971</li> <li>\u200b\u5b89\u88c5\u200bDocker</li> <li>https://docs.docker.com/engine/storage/containerd/</li> <li>Docker: How to Build and Push multi-arch Docker Images to Docker Hub</li> </ul>"},{"location":"docker/other/","title":"\u5176\u4ed6","text":"<pre><code>curl --silent --request GET ${REPO}/${PROJECT}/${IMAGE}/manifests/${TAG}\n\ncurl https://10.0.0.1:5000/v2/test/manifests/v1 -H 'Accept: application/vnd.oci.image.index.v1+json'\ncurl -sS -X DELETE https://10.0.0.1:5000/v2/test/manifests/v1\n\ndocker buildx ls\ndocker build -t 10.0.0.1:5000/test:v1 --platform linux/arm64,linux/amd64 --push .\ndocker build -t docker.io/aisuhua/demo:v1 --platform linux/arm64,linux/amd64 --push .\n\ndocker inspect image_name\n\ndocker run --privileged --rm tonistiigi/binfmt --install all\n</code></pre>"},{"location":"docker/other/#ref","title":"ref","text":"<ul> <li>https://docs.docker.com/build/building/multi-platform/</li> <li>https://docs.docker.com/build/concepts/overview/</li> <li>https://github.com/docker/buildx/issues/59#issuecomment-1168619521</li> <li> <p>https://blog.csdn.net/liuzhenghua66/article/details/140269971</p> <p>\"features\": { \"containerd-snapshotter\": true   },</p> </li> </ul>"},{"location":"docker/private/","title":"\u79c1\u6709\u200b\u4ed3\u5e93","text":"<p>\u200b\u767b\u5f55\u200b\u5730\u5740\u200b</p> <ul> <li>https://cr.console.aliyun.com/cn-shenzhen</li> </ul> <p>\u200b\u4f7f\u7528\u200b\u65b9\u5f0f\u200b</p> <pre><code>docker login --username=1079087531@qq.com registry.cn-shenzhen.aliyuncs.com\ndocker pull registry.cn-shenzhen.aliyuncs.com/aisuhua/demo:latest\n</code></pre>"},{"location":"docker/registry/","title":"registry","text":"<p>git clone </p> <ul> <li>Deploy a registry server</li> </ul>"},{"location":"elastic/","title":"Elastic","text":""},{"location":"elastic/#links","title":"Links","text":"<ul> <li>How to Update Security Certificates in Elasticsearch</li> <li>Efficiently Deleting Snapshots in Elasticsearch</li> <li>\u200b\u591a\u200bes \u200b\u96c6\u7fa4\u200b\u6570\u636e\u200b\u8fc1\u79fb\u200b\u65b9\u6848\u200b</li> <li>ES\u200b\u5f02\u5730\u200b\u53cc\u6d3b\u200b\u65b9\u6848\u200b</li> <li>\u200b\u517c\u5bb9\u6027\u200b\u5217\u8868\u200b</li> <li>Upgrade to Elastic 8.13.3</li> <li>Important system configuration</li> <li>Day 15 Create DataStream</li> <li>Elasticsearch\u200b\u5bb9\u91cf\u200b\u89c4\u5212\u200b-\u200b\u5e72\u8d27\u200b</li> <li>filebeat\u200b\u6536\u96c6\u200bk8s\u200b\u7684\u200b\u5bb9\u5668\u200b\u65e5\u5fd7\u200b\u9700\u8981\u200b\u5173\u6ce8\u200b\u7684\u200b\u51e0\u4e2a\u200b\u70b9\u200b</li> <li>Elasticsearch Cluster</li> <li>ELK\u200b\u65e5\u5fd7\u200b\u544a\u8b66\u200belastalert2</li> </ul>"},{"location":"elastic/elastalert/","title":"ELastAlert","text":"<ul> <li>elastalert\u200b\u57fa\u672c\u200b\u914d\u7f6e\u200b\u8bf4\u660e\u200b</li> <li>\u200b\u76d1\u63a7\u200b\u544a\u8b66\u200b\u4e4b\u200belastalert\u200b\u90e8\u7f72\u200b\u53ca\u200b\u914d\u7f6e\u200b\u5168\u89e3\u200b</li> <li>elastalert \u200b\u544a\u8b66\u200b\u914d\u7f6e\u200b\u8bf4\u660e\u200b</li> <li>ELK\u200b\u8be6\u89e3\u200b\uff08\u200b\u4e8c\u5341\u4e09\u200b\uff09\u2014\u2014elastalert\u200b\u544a\u8b66\u200b\u4f18\u5316\u200b</li> <li>elastalert\u200b\u5b89\u88c5\u200b\u4f7f\u7528\u200b</li> <li>[elk]elastalert\u200b\u90ae\u7bb1\u200b\u544a\u8b66\u200b</li> </ul>"},{"location":"elastic/logstash/","title":"Logstash","text":""},{"location":"elastic/logstash/#sample","title":"Sample","text":"<pre><code># the json input\nroot@monitoring:~# cat tmp.json\n{\"message\":{\"someField\":\"someValue\"}}\n\n\n# the logstash configuration file\nroot@monitoring:~# cat /etc/logstash/conf.d/test.conf\ninput {\n  tcp {\n    port =&gt; 5400\n    codec =&gt; json\n  }\n}\n\nfilter{\n}\n\noutput {\n   stdout {\n     codec =&gt; rubydebug\n   }\n}\n\n\n# starting the logstash server\n/opt/logstash/bin/logstash -f /etc/logstash/conf.d/test.conf\n\n\n# sending the json to logstash with netcat\nnc localhost 5400 &lt;  tmp.json\n\n# the logstash output via stdout\n{\n       \"message\" =&gt; {\n        \"someField\" =&gt; \"someValue\"\n    },\n      \"@version\" =&gt; \"1\",\n    \"@timestamp\" =&gt; \"2016-02-02T13:31:18.703Z\",\n          \"host\" =&gt; \"0:0:0:0:0:0:0:1\",\n          \"port\" =&gt; 56812\n}\n</code></pre>"},{"location":"elastic/logstash/#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Sending data to logstash via tcp</li> </ul>"},{"location":"git/","title":"Git","text":""},{"location":"git/#tag","title":"Tag","text":"<pre><code># \u200b\u6dfb\u52a0\u200b tag\ngit tag &lt;tagname&gt;\ngit push origin --tags\n</code></pre>"},{"location":"git/#cheetsheet","title":"CheetSheet","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u5206\u652f\u200b\ngit config --global init.defaultBranch master\n\n# \u200b\u7a7a\u76ee\u5f55\u200b\u4fdd\u6301\u200b\n# Ignore everything in this directory\n*\n# Except this file\n!.gitignore\n\n\n# \u200b\u7f57\u5217\u200b\u53d1\u751f\u200b\u8fc7\u200b\u4fee\u6539\u200b\u7684\u200b\u6587\u4ef6\u200b\ngit diff --name-only START_COMMIT..END_COMMIT\n# \u200b\u53bb\u200b\u91cd\u200b\ngit show --pretty=\"format:\" --name-only START_COMMIT..END_COMMIT | sort | uniq\n</code></pre>"},{"location":"git/#_1","title":"\u81ea\u52a8\u200b\u63d0\u4ea4","text":"<pre><code># \u200b\u5b89\u88c5\u200b\nsudo wget https://raw.githubusercontent.com/aisuhua/git-auto/master/git-auto -o /usr/local/bin/git-auto\nsudo chmod a+x /usr/local/bin/git-auto\n\n# \u200b\u914d\u7f6e\u200b crontab \u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\n* * * * * /usr/local/bin/git-auto -d /opt/www/aisuhua.github.io -o -p\n</code></pre>"},{"location":"git/#links","title":"Links","text":"<ul> <li>https://stackoverflow.com/a/2713363</li> </ul>"},{"location":"git/gitea/","title":"Gitea","text":"<ul> <li>Gitea deactivates user every day</li> </ul>"},{"location":"gpfs/gpfs/","title":"GPFS","text":"<ul> <li>GPFS</li> </ul>"},{"location":"https/import/","title":"\u5bfc\u5165\u200b\u8bc1\u4e66","text":""},{"location":"https/import/#ubuntu","title":"Ubuntu","text":"<pre><code>sudo cp local-ca.crt /usr/local/share/ca-certificates\nsudo update-ca-certificates\n</code></pre>"},{"location":"https/import/#centos","title":"CentOS","text":"<pre><code>sudo cp local-ca.crt /etc/pki/ca-trust/source/anchors\nsudo update-ca-trust\n</code></pre>"},{"location":"https/import/#windows","title":"Windows","text":"<p>\u200b\u5bfc\u5165\u200b\u6839\u200b\u8bc1\u4e66\u200b</p> <pre><code>Import-Certificate -FilePath 'C:\\local-ca.crt' -CertStoreLocation Cert:\\LocalMachine\\Root\n</code></pre> <p>\u200b\u5bfc\u5165\u200b\u5ba2\u6237\u7aef\u200b\u8bc1\u4e66\u200b</p> <pre><code># \u200b\u5bfc\u5165\u200b\u4e0d\u200b\u542b\u200b\u5bc6\u7801\u200b\u7684\u200b\u8bc1\u4e66\u200b\nSet-Location -Path cert:\\CurrentUser\\My\nImport-PfxCertificate -Filepath 'C:\\client.p12'\n\n# \u200b\u5bfc\u5165\u200b\u542b\u200b\u5bc6\u7801\u200b\u7684\u200b\u8bc1\u4e66\u200b\n$pfxPassword = \"PASSWORD\" | ConvertTo-SecureString -AsPlainText -Force\nSet-Location -Path cert:\\CurrentUser\\My\nImport-PfxCertificate -Filepath 'C:\\client.p12' -Password $pfxPassword\n</code></pre>"},{"location":"https/import/#_2","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u67e5\u770b\u200b p12 \u200b\u8bc1\u4e66\u200b\u7684\u200b\u5185\u5bb9\u200b\nopenssl pkcs12 -in ~/cert.p12 -nodes -passin pass:\"my password\" | openssl x509 -noout -text\n</code></pre>"},{"location":"https/import/#links","title":"links","text":"<ul> <li>How to add Certificate Authority file in CentOS 7</li> <li>Adding trusted root certificates to the server</li> <li>Working with openssl to extract information from a pkcs12 certificate</li> </ul>"},{"location":"java/","title":"Java","text":"<ul> <li>Java SE 9 Archive Downloads</li> <li>Links to JDK documentation</li> </ul>"},{"location":"java/jvm/","title":"JVM","text":""},{"location":"java/jvm/#heap","title":"\u914d\u7f6e\u200b heap \u200b\u5185\u5b58\u5927\u5c0f","text":"<pre><code>-Xms: initial heap size\n-Xmx: Maximum heap size\n\njava -Xms128m -Xmx256m demo.java\n</code></pre> <ul> <li>How to increase Heap size of JVM</li> </ul>"},{"location":"java/jvm/#_1","title":"\u67e5\u770b\u200b\u9ed8\u8ba4\u200b\u914d\u7f6e","text":"<pre><code># openjdk\njava -XX:+PrintFlagsFinal -version\n\n# IBM jdk\njava -verbose:sizes -version\n</code></pre> <ul> <li>What's the default heap size for IBM's J9VM?</li> </ul>"},{"location":"java/jvm/#jvm_1","title":"\u67e5\u770b\u200b\u8fdb\u7a0b\u200b JVM \u200b\u542f\u52a8\u200b\u53c2\u6570","text":"<pre><code>jps -lvm\n\njcmd -l\njcmd $PID VM.system_properties\njcmd $PID VM.flags\n\njinfo -flags $PID\n</code></pre> <ul> <li>Getting the parameters of a running JVM</li> <li>Check JVM settings of running java process</li> </ul>"},{"location":"java/jvm/#heap-heap","title":"heap \u200b\u548c\u200b \u200b\u975e\u200b heap \u200b\u5185\u5b58","text":"<ul> <li>\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\uff1aHeap (\u200b\u5806\u533a\u200b\uff09</li> <li>JVM\u200b\u5806\u200b\u5185\u5b58\u200b\u548c\u200b\u975e\u5806\u200b\u5185\u5b58\u200b</li> </ul>"},{"location":"java/jvm/#heapdump","title":"\u751f\u6210\u200b heapdump","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5e2e\u52a9\u200b\njattach &lt;pid&gt; jcmd help -all\n\n# \u200b\u67e5\u770b\u200b heap \u200b\u548c\u200b\u975e\u200b heap \u200b\u5185\u5bb9\u200b\u4f7f\u7528\u200b\u60c5\u51b5\u200b\njattach &lt;pid&gt; jcmd GC.heap_info\n\n# \u200b\u751f\u6210\u200b heapdump \u200b\u6587\u4ef6\u200b\njattach &lt;pid&gt; jcmd GC.heapdump /tmp/dump.bin\n</code></pre> <ul> <li>https://github.com/jattach/jattach</li> </ul>"},{"location":"java/notes/","title":"\u5b66\u4e60\u200b\u7b14\u8bb0","text":""},{"location":"java/notes/#_2","title":"\u5b98\u65b9\u200b\u5b66\u4e60\u6750\u6599","text":"<ul> <li>https://docs.oracle.com/javase/8/index.html</li> <li>http://docs.oracle.com/javase/tutorial/java/index.html</li> <li>https://docs.oracle.com/javase/8/docs/api/index.html</li> </ul> <pre><code># \u200b\u6574\u5f62\u200b\u7c7b\u578b\u200b\nbyte\uff1a-128 ~ 127\nshort: -32768 ~ 32767\nint: -2147483648 ~ 2147483647\nlong: -9223372036854775808 ~ 9223372036854775807\n\n# \u200b\u6d6e\u70b9\u200b\u578b\u200b\n# float \u200b\u6570\u5b57\u200b\u6700\u540e\u200b\u8bb0\u5f97\u200b\u52a0\u200b f\uff0c\u200b\u4e0d\u200b\u52a0\u200b\u9ed8\u8ba4\u200b\u662f\u200b double\nfloat f1 = 3.14f;\ndouble d = 1.79e308;\n\n# char \u200b\u7c7b\u578b\u200b\uff0c\u200b\u90fd\u200b ' \u200b\u5355\u5f15\u53f7\u200b\u62ec\u200b\u8d77\u6765\u200b\nchar c1 = 'a';\nchar c2 = '\u200b\u4e2d\u200b';\n\n# String \u200b\u5f15\u7528\u200b\u7c7b\u578b\u200b\uff0c\u200b\u4e0d\u53ef\u200b\u53d8\u200b\u7c7b\u578b\u200b\n# final \u200b\u58f0\u660e\u200b\u4e0d\u53ef\u200b\u53d8\u200b\u7684\u200b\u53d8\u91cf\u200b\u5373\u200b\u5e38\u91cf\u200b\uff0c\u200b\u540e\u7eed\u200b\u65e0\u6cd5\u200b\u8d4b\u503c\u200b\nfinal double PI = 3.14;\n\n# var \u200b\u5173\u952e\u5b57\u200b\u58f0\u660e\u200b\u53d8\u91cf\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u6839\u636e\u200b\u503c\u200b\u7684\u200b\u7c7b\u578b\u200b\u521b\u5efa\u200b\nvar i = 100; // int\n# \u200b\u4e24\u8005\u200b\u6548\u679c\u200b\u4e00\u6837\u200b\nStringBuilder sb = new StringBuilder();\nvar sb = new StringBuilder();\n\n# \u200b\u53d8\u91cf\u200b\u7684\u200b\u4f5c\u7528\u57df\u200b\n{\n    ...\n    int i = 0; // \u200b\u53d8\u91cf\u200bi\u200b\u4ece\u200b\u8fd9\u91cc\u200b\u5f00\u59cb\u200b\u5b9a\u4e49\u200b\n    ...\n    {\n        ...\n        int x = 1; // \u200b\u53d8\u91cf\u200bx\u200b\u4ece\u200b\u8fd9\u91cc\u200b\u5f00\u59cb\u200b\u5b9a\u4e49\u200b\n        ...\n        {\n            ...\n            String s = \"hello\"; // \u200b\u53d8\u91cf\u200bs\u200b\u4ece\u200b\u8fd9\u91cc\u200b\u5f00\u59cb\u200b\u5b9a\u4e49\u200b\n            ...\n        } // \u200b\u53d8\u91cf\u200bs\u200b\u4f5c\u7528\u57df\u200b\u5230\u6b64\u7ed3\u675f\u200b\n        ...\n        // \u200b\u6ce8\u610f\u200b\uff0c\u200b\u8fd9\u662f\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u53d8\u91cf\u200bs\uff0c\u200b\u5b83\u200b\u548c\u200b\u4e0a\u9762\u200b\u7684\u200b\u53d8\u91cf\u200b\u540c\u540d\u200b\uff0c\n        // \u200b\u4f46\u662f\u200b\u56e0\u4e3a\u200b\u4f5c\u7528\u57df\u200b\u4e0d\u540c\u200b\uff0c\u200b\u5b83\u4eec\u200b\u662f\u200b\u4e24\u4e2a\u200b\u4e0d\u540c\u200b\u7684\u200b\u53d8\u91cf\u200b:\n        String s = \"hi\";\n        ...\n    } // \u200b\u53d8\u91cf\u200bx\u200b\u548c\u200bs\u200b\u4f5c\u7528\u57df\u200b\u5230\u6b64\u7ed3\u675f\u200b\n    ...\n} // \u200b\u53d8\u91cf\u200bi\u200b\u4f5c\u7528\u57df\u200b\u5230\u6b64\u7ed3\u675f\u200b\n\n# \u200b\u6574\u6570\u200b\u76f8\u9664\u200b\u5f97\u5230\u200b\u7cbe\u786e\u200b\u7ed3\u679c\u200b\nint x = 12345 / 67; // 184\n# \u200b\u6c42\u200b\u4f59\u6570\u200b\nint y = 12345 % 67; // 12345\u00f767\u200b\u7684\u200b\u4f59\u6570\u200b\u662f\u200b17\n\n# \u200b\u8fd0\u7b97\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u5c06\u200b\u5c0f\u200b\u7c7b\u578b\u200b\u8f6c\u6210\u200b\u5927\u200b\u7c7b\u578b\u200b\uff0c\u200b\u53cd\u200b\u65b9\u5411\u200b\u8f6c\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u6ea2\u51fa\u200b\u5bfc\u81f4\u200b\u7ed3\u679c\u200b\u4e0d\u200b\u6b63\u786e\u200b\n# \u200b\u5982\u200b short \u200b\u8f6c\u200b\u6210\u200b int \u200b\u518d\u200b\u8fd0\u7b97\u200b\nshort s = 1234;\nint i = 123456;\nint x = s + i; // s\u200b\u81ea\u52a8\u200b\u8f6c\u578b\u200b\u4e3a\u200bint\n\n# \u200b\u5f3a\u5236\u200b\u7c7b\u578b\u8f6c\u6362\u200b\nint i = 12345;\nshort s = (short) i; // 12345\nint n1 = (int) 12.3; // 12 \u200b\u53ea\u200b\u4fdd\u7559\u200b\u6574\u6570\u200b\u90e8\u5206\u200b\nint n2 = (int) 12.7; // 12\nint n2 = (int) -12.7; // -12\nint n3 = (int) (12.7 + 0.5); // 13\nint n4 = (int) 1.2e20; // 2147483647\n\n# \u200b\u56db\u820d\u4e94\u5165\u200b\uff0c\u200b\u52a0\u200b 0.5 \u200b\u7136\u540e\u200b\u5f3a\u5236\u200b\u8f6c\u6362\u6210\u200b int \u200b\u7c7b\u578b\u200b\u5373\u53ef\u200b\ndouble d = 2.6;\nint n = (int) (d + 0.5);\n\n# \u200b\u5b57\u7b26\u4e32\u200b\u4f7f\u7528\u200b + \u200b\u53f7\u200b\u8fde\u63a5\u200b\nSystem.out.println(\"Hello\" + \" \" + \"World!\")\n\n# \u200b\u4f7f\u7528\u200b \"\"\" \u200b\u591a\u884c\u200b\u6a21\u5f0f\u200b\nString s2 = \"\"\"\n        Hello \n            second Hello\n        third Hello\"\"\";\n\n# \u200b\u5728\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\u91cc\u200b\u53ef\u4ee5\u200b\u5199\u200b\u591a\u4e2a\u200b\u7c7b\u200b\uff0c\u200b\u4f46\u662f\u200b\u53ea\u80fd\u200b\u6709\u200b\u4e00\u4e2a\u200b public class \u200b\u7c7b\u200b\n\n# \u200b\u624b\u5de5\u200b\u7f16\u8bd1\u200b packages\nfind src -name \"*.java\" | xargs javac -d bin\n\n# \u200b\u8fd0\u884c\u200b\u5305\u200b\u7a0b\u5e8f\u200b\njava -cp /opt/www/java/tutorial/demo03/package/bin  my.Main\n# \u200b\u6216\u8005\u200b\ncd  /opt/www/java/tutorial/demo03/package\njava -cp bin my.Main\n\n# \u200b\u67e5\u770b\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\ncd /opt/www/java/tutorial/demo03/package\ntree\n.\n\u251c\u2500\u2500 bin\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 my\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.class\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 org\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 baidu\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 Student.class\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 suhua\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 Person.class\n\u251c\u2500\u2500 hello.jar\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 my\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.java\n    \u251c\u2500\u2500 org\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 baidu\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 Student.java\n    \u2514\u2500\u2500 suhua\n        \u2514\u2500\u2500 Person.java\n\n# \u200b\u6253\u6210\u200b jar \u200b\u5305\u200b\n# The c option indicates that you want to create a JAR file.\n# The f option indicates that you want the output to go to a file rather than to stdout.\n# jar-file is the name that you want the resulting JAR file to have. You can use any filename for a JAR file. By convention, JAR filenames are given a .jar extension, though this is not required.\n# The -C images part of this command directs the Jar tool to go to the bin directory, and the . following -C bin directs the Jar tool to archive all the contents of that directory.\n# -C \u200b\u662f\u200b\u544a\u77e5\u200b jar \u200b\u5de5\u5177\u200b\u5148\u200b\u8fdb\u5165\u200b bin \u200b\u76ee\u5f55\u200b\uff0c. \u200b\u8868\u793a\u200b\u6253\u5305\u200b\u8be5\u200b\u76ee\u5f55\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\njar -cvf hello.jar -C bin .\n\n# \u200b\u6216\u8005\u200b\ncd bin\njar -cvf hello.jar *\n\n# \u200b\u6267\u884c\u200b jar \u200b\u5305\u200b\njava -cp ./hello.jar my.Main\n\n# \u200b\u4fee\u6539\u200b mainfest \u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\n# The m option indicates that you want to merge information from an existing file into the manifest file of the JAR file you're creating.\njar -cvfm hello.jar manifest.txt -C bin .\n\n# manifest.txt\nMain-Class: my.Main\nBuilt-By: aisuhua\n\n# \u200b\u6267\u884c\u200b jar\njava -jar hello.jar\n\n# \u200b\u5b57\u7b26\u4e32\u200b\nString str = \"suhua123\";\nSystem.out.println(str);\n\nString str2 = new String(\"suhua123\");\nSystem.out.println(str2);\n\n# \u200b\u5185\u90e8\u200b\u5b9e\u9645\u4e0a\u200b\u7528\u200b\u5b57\u7b26\u200b\u6570\u7ec4\u200b\u6765\u200b\u8868\u793a\u200b\nString str3 = new String(new char[] {'s', 'u', 'h', 'u', 'a', '1', '2', '3'});\nSystem.out.println(str3);\n\n# for \u200b\u5faa\u73af\u200b\nfor (String value : str.split(\" \")) {\n    System.out.println(value);\n}\n\nString arr[] = str.split(\" \");\nfor (int i = 0; i &lt; arr.length; i++) {\n    System.out.println(arr[i]);\n}\n\n# Integer.valueOf()\u200b\u5c31\u662f\u200b\u9759\u6001\u200b\u5de5\u5382\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5b83\u200b\u5c3d\u53ef\u80fd\u200b\u5730\u200b\u8fd4\u56de\u200b\u7f13\u5b58\u200b\u7684\u200b\u5b9e\u4f8b\u200b\u4ee5\u200b\u8282\u7701\u200b\u5185\u5b58\u200b\u3002\n# \u200b\u521b\u5efa\u200b\u65b0\u200b\u5bf9\u8c61\u200b\u65f6\u200b\uff0c\u200b\u4f18\u5148\u200b\u9009\u7528\u200b\u9759\u6001\u200b\u5de5\u5382\u200b\u65b9\u6cd5\u200b\u800c\u200b\u4e0d\u662f\u200bnew\u200b\u64cd\u4f5c\u7b26\u200b\u3002\n\n# \u200b\u5b57\u7b26\u4e32\u200b\u548c\u200b\u6570\u5b57\u200b\u7c7b\u578b\u200b\u4e92\u8f6c\u200b\nint x = Integer.parseInt(\"100\");\nString s = Integer.toString(100);\n\n# \u200b\u6570\u636e\u200b\u7684\u200b\u5b58\u50a8\u200b\u548c\u200b\u663e\u793a\u200b\u8981\u200b\u5206\u79bb\u200b\n\n# record \u200b\u5173\u952e\u5b57\u200b\u7528\u4e8e\u200b\u5b9a\u4e49\u200b Data Class\n# \u200b\u4f7f\u7528\u200brecord\u200b\u5b9a\u4e49\u200b\u7684\u200b\u662f\u200b\u4e0d\u53d8\u200b\u7c7b\u200b\uff1b\n# \u200b\u53ef\u4ee5\u200b\u7f16\u5199\u200bCompact Constructor\u200b\u5bf9\u200b\u53c2\u6570\u200b\u8fdb\u884c\u200b\u9a8c\u8bc1\u200b\uff1b\n# \u200b\u53ef\u4ee5\u200b\u5b9a\u4e49\u200b\u9759\u6001\u65b9\u6cd5\u200b\u3002\n\n# \u200b\u8fed\u4ee3\u200b\u5668\u200b\nList&lt;Integer&gt; list = List.of(1, 2, 3);\nfor (Integer i : list) {\n    System.out.println(i);\n}\n\nIterator&lt;Integer&gt; iterator = list.iterator();\nwhile (iterator.hasNext()) {\n    System.out.println(iterator.next());\n}\n\n# \u200b\u6570\u7ec4\u200b\u7684\u200b\u521b\u5efa\u200b\u65b9\u5f0f\u200b\n# \u200b\u65b9\u5f0f\u200b1\nString[] arr = new String[3];\narr[0] = \"A\";\narr[1] = \"B\";\narr[2] = \"C\";\n# \u200b\u65b9\u5f0f\u200b2\nString[] arr = new String[]{\"A\", \"B\", \"C\"};\n# \u200b\u65b9\u5f0f\u200b3\nString[] arr = {\"A\", \"B\", \"C\"};\n\n# List \u200b\u521b\u5efa\u200b\u7684\u200b\u65b9\u5f0f\u200b\n# \u200b\u65b9\u5f0f\u200b\uff11\uff1a\u200b\u6bcf\u4e2a\u200b\u9879\u200b\u7c7b\u578b\u200b\u4e0d\u200b\u786e\u5b9a\u200b\nList list = new ArrayList();\n# \u200b\u65b9\u5f0f\u200b2\n List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n# \u200b\u65b9\u5f0f\u200b3\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\nlist.add(\"A\");\nlist.add(\"B\");\nSystem.out.println(list);\n# \u200b\u65b9\u5f0f\u200b4 list.of()\nList&lt;String&gt; list = List.of(\"A\", \"B\");\n</code></pre>"},{"location":"java/notes/#links","title":"links","text":"<ul> <li>How to create jar file with package structure?</li> <li>Creating a JAR File</li> <li>Modifying a Manifest File</li> </ul>"},{"location":"java/notes2/","title":"notes2","text":"<pre><code># Java \u200b\u6574\u5f62\u200b\u53ea\u6709\u200b\u6709\u200b\u7b26\u53f7\u200b\u6574\u5f62\u200b\uff0c\u200b\u6ca1\u6709\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6574\u5f62\u200b\u3002\u200b\u8fd9\u200b\u4e00\u6761\u200b\u8ddf\u200b C \u200b\u6709\u70b9\u200b\u533a\u522b\u200b\u3002\n\n# float \u200b\u7c7b\u578b\u200b\u7684\u200b\u503c\u200b\u9700\u8981\u200b\u4ee5\u200b f \u200b\u7ed3\u5c3e\u200b\uff0c\u200b\u6d6e\u70b9\u200b\u578b\u200b\u9ed8\u8ba4\u200b\u662f\u200b double \u200b\u7c7b\u578b\u200b\nfloat f1 = 100.0f;\n# error: incompatible types: possible lossy conversion from double to float\n# float f2 = 100.0;\n\nfinal double PI = 3.14;\n# \u200b\u4f7f\u7528\u200b final \u200b\u5b9a\u4e49\u200b\u5e38\u91cf\u200b\uff0c\u200b\u5e38\u91cf\u200b\u4e00\u822c\u200b\u5b9a\u4e49\u200b\u4e3a\u200b\u5927\u5199\u200b\n\n# \u200b\u4f7f\u7528\u200b var \u200b\u547d\u4ee4\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\u7c7b\u578b\u5b9a\u4e49\u200b\uff0c\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u6839\u636e\u200b\u503c\u200b\u7684\u200b\u7c7b\u578b\u200b\u7f16\u8bd1\u6210\u200b\u7c7b\u578b\u5b9a\u4e49\u200b\nvar str = \"suhua is a good boy\";\nvar num1 = 100;\nvar num2 = 100.0f;\nvar sb = new StringBuilder();\n# \u200b\u7f16\u8bd1\u200b\u540e\u200b \nStringBuilder sb = new StringBuilder();\n\n# \u200b\u82b1\u200b\u62ec\u53f7\u200b {} \u200b\u662f\u200b\u4e00\u4e2a\u200b\u4f5c\u7528\u57df\u200b\uff0c\u200b\u5b9a\u4e49\u200b\u7684\u200b\u53d8\u91cf\u200b\u5728\u200b\u5916\u90e8\u200b\u65e0\u6cd5\u8bbf\u95ee\u200b\nif {\n  int x = 100;\n  System.out.println(x);\n} \n\nSystem.out.println(x);\n</code></pre>"},{"location":"java/servlet/","title":"Servlet","text":""},{"location":"java/servlet/#ref","title":"ref","text":"<ul> <li>Servlets | Servlet Tutorial</li> </ul>"},{"location":"java/springboot/","title":"Spring Boot","text":"<pre><code># \u200b\u5b89\u88c5\u200b JDK\nwget https://download.oracle.com/java/17/archive/jdk-17.0.8_linux-x64_bin.tar.gz\ntar -zxvf jdk-17.0.8_linux-x64_bin.tar.gz\nexport PATH=/path/to/jdk-17.0.8/bin:$PATH\njava -version\n\n# \u200b\u5b89\u88c5\u200b maven\nwget https://dlcdn.apache.org/maven/maven-3/3.8.8/binaries/apache-maven-3.8.8-bin.tar.gz\ntar apache-maven-3.8.8-bin.tar.gz\n# vim /etc/profile.d/maven.sh\nexport JAVA_HOME=/path/to/jdk-17.0.8\nexport M2_HOME=/path/to/apache-maven-3.8.8\nexport MAVEN_HOME=/path/to/apache-maven-3.8.8\nexport PATH=${M2_HOME}/bin:${PATH}\nmvn --version\n\n# Spring Boot demo\n# vim pom.yaml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;myproject&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.5&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;!-- Additional lines to be added here... --&gt;\n\n&lt;/project&gt;\n\nmvn dependency:tree\nmkdir -p src/main/java\n# vim MyApplication.java\npackage com.example;\n\n@RestController\n@SpringBootApplication\npublic class MyApplication {\n\n    @RequestMapping(\"/\")\n    String home() {\n        return \"Hello World!\";\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n\n}\n\nmvn spring-boot:run\n\n# Exception\npackage com.example;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@SpringBootApplication\npublic class MyApplication {\n\n    @RequestMapping(\"/\")\n    String home() throws Exception {\n        throw new Exception(\"Exception message\");\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n\n}\n\n# maven \u200b\u56fd\u5185\u200b\u6e90\u200b\n# vim /opt/to/apache-maven-3.8.8/conf/settings.xml \n# \u200b\u8ffd\u52a0\u200b\u5230\u200b mirrors\n&lt;mirror&gt;\n    &lt;id&gt;aliyunmaven&lt;/id&gt;\n    &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;\n    &lt;name&gt;\u200b\u963f\u91cc\u200b\u4e91\u200b\u516c\u5171\u200b\u4ed3\u5e93\u200b&lt;/name&gt;\n    &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;\n&lt;/mirror&gt;\n</code></pre>"},{"location":"java/springboot/#links","title":"links","text":"<ul> <li>How to Install Apache Maven on Ubuntu 18.04</li> <li>Maven \u200b\u955c\u50cf\u200b</li> <li>Throwing Exceptions in Java</li> <li>Java SE Development Kit 17.0.8</li> <li>https://dlcdn.apache.org/maven/maven-3/3.8.8/binaries/</li> <li>Getting Started</li> <li>https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-logging.html</li> <li>https://docs.spring.io/spring-boot/docs/1.2.1.RELEASE/reference/html/boot-features-logging.html#:~:text=Spring%20Boot%20uses%20Commons%20Logging,optional%20file%20output%20also%20available.</li> <li>https://github.com/hpcugent/logstash-patterns/blob/master/files/grok-patterns</li> </ul>"},{"location":"java/war-sample/","title":"War Sample","text":"<p>\u200b\u4e00\u4e2a\u200b\u5feb\u901f\u200b\u5165\u95e8\u200b\u7684\u200b\u4f7f\u7528\u200b tomcat \u200b\u90e8\u7f72\u200b Java \u200b\u5e94\u7528\u200b\u7684\u200b\u4f8b\u5b50\u200b\u3002</p>"},{"location":"java/war-sample/#tomcat","title":"\u5b89\u88c5\u200b tomcat","text":"<pre><code># \u200b\u5b89\u88c5\u200b JDK\nsudo apt install default\u2013jdk\n\n# \u200b\u89e3\u538b\u200b\u5b89\u88c5\u5305\u200b\ncd /opt/www\nwget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.83/bin/apache-tomcat-9.0.83.tar.gz\ntar -zxvf apache-tomcat-9.0.83.tar.gz\n\n# \u200b\u8bbe\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b\nexport JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nexport CATALINA_HOME=/opt/www/apache-tomcat-9.0.83\n\n# \u200b\u4fee\u6539\u200b\u6210\u200b\u81ea\u52a8\u200b reload\nvim $CATALINA_HOME/conf/context.xml\n&lt;Context reloadable=\"true\"&gt;\n...\n&lt;/Context&gt;\n\n# \u200b\u542f\u52a8\u200b tomcat\n$CATALINA_HOME/bin/startup.sh\n</code></pre>"},{"location":"java/war-sample/#java","title":"Java \u200b\u6e90\u7801\u200b\u90e8\u7f72","text":"<p>\u200b\u6e90\u4ee3\u7801\u200b: https://github.com/aisuhua/war-sample</p> <pre><code># \u200b\u4e0b\u8f7d\u200b\u6e90\u4ee3\u7801\u200b\u5230\u200b webapps \u200b\u76ee\u5f55\u200b\ncd $CATALINA_HOME/webapps\ngit clone git@github.com:aisuhua/war-sample.git\n\n# \u200b\u6d4b\u8bd5\u200b \ncurl http://localhost:8080/war-sample/\n</code></pre>"},{"location":"java/war-sample/#class","title":"\u91cd\u65b0\u200b\u7f16\u8bd1\u200b class \u200b\u6587\u4ef6","text":"<pre><code># \u200b\u5148\u200b\u786e\u5b9a\u200b servlet jar \u200b\u5305\u200b\u7684\u200b\u4f4d\u7f6e\u200b\n$ ls /usr/share/java/ | grep servlet\nguice-servlet-4.0.jar\nguice-servlet.jar\ntomcat8-servlet-api-8.5.39.jar\ntomcat8-servlet-api.jar\n\n# \u200b\u8bbe\u7f6e\u200b CLASSPATH \u200b\u73af\u5883\u53d8\u91cf\u200b\nexport CLASSPATH=\"/usr/share/java/*\"\n\n# \u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u200b HelloServlet.java\ncd $CATALINA_HOME/webapps/war-sample/WEB-INF/classes/test\njavac HelloServlet.java\n</code></pre>"},{"location":"java/war-sample/#war","title":"War \u200b\u5305\u200b\u90e8\u7f72","text":"<pre><code># \u200b\u5c06\u200b\u6e90\u4ee3\u7801\u200b\u6253\u5305\u200b\u6210\u200b War \u200b\u5305\u200b\ngit clone git clone git@github.com:aisuhua/war-sample.git\ncd war-sample\njar -cvf war-sample.war *\n\n# \u200b\u5c06\u200b war \u200b\u5305\u200b\u653e\u7f6e\u200b\u5230\u200b webapps \u200b\u76ee\u5f55\u200b\nmv war-sample.war $CATALINA_HOME/webapps/\n\n# \u200b\u6d4b\u8bd5\u200b \ncurl http://localhost:8080/war-sample/\n</code></pre>"},{"location":"java/war-sample/#_1","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u67e5\u770b\u200b Java \u200b\u53ef\u7528\u200b\u7248\u672c\u200b\nupdate-java-alternatives -l\n\n# \u200b\u67e5\u770b\u200b\u65e5\u5fd7\u200b\ntail -f $CATALINA_HOME/logs/*.log\n</code></pre>"},{"location":"java/war-sample/#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>Sample Application</li> <li>a hello, world servlet</li> <li>Servlets - Examples</li> <li>How to Install Apache Tomcat 8 on Ubuntu</li> <li>Tomcat - CATALINA_BASE and CATALINA_HOME variables</li> <li>javac command line compile error: package javax.servlet does not exist</li> <li>War File</li> <li>How do I update a Tomcat webapp without restarting the entire service?</li> <li>How To Install Apache Tomcat 8 on Ubuntu 16.04</li> </ol>"},{"location":"kafka/REAEMD/","title":"Kafka","text":"<pre><code>./bin/kafka-topics.sh --bootstrap-server 172.31.96.149:9092 --create --topic hello\n./bin/kafka-topics.sh --bootstrap-server 172.31.96.149:9092 --list\n\n./bin/kafka-topics.sh --bootstrap-server 172.31.96.149:9092 --describe --topic hello\n\n./bin/kafka-console-producer.sh --bootstrap-server 172.31.96.149:9092 --topic hello\n./bin/kafka-console-consumer.sh --bootstrap-server 172.31.96.149:9092 --topic hello --from-beginning\n\n\u200b\u67e5\u770b\u200b\u96c6\u7fa4\u200b\u72b6\u6001\u200b\n./bin/kafka-metadata-quorum.sh --bootstrap-server 172.31.96.149:9092 describe --status\n./bin/kafka-broker-api-versions.sh --bootstrap-server 172.31.96.149:9092\n\n# create topic\n/opt/kafka/3.8.0/server1/bin/kafka-topics.sh --bootstrap-server 172.31.96.149:19093 --command-config /opt/kafka/3.8.0/server1/config/kraft/admin.conf --list\n/opt/kafka/3.8.0/server1/bin/kafka-topics.sh --bootstrap-server 172.31.96.149:19093 --command-config /opt/kafka/3.8.0/server1/config/kraft/admin.conf --create --topic hello\n/opt/kafka/3.8.0/server1/bin/kafka-topics.sh --bootstrap-server 172.31.96.149:19093 --command-config /opt/kafka/3.8.0/server1/config/kraft/admin.conf --describe --topic hello \n\n# product and consume\n/opt/kafka/3.8.0/server1-kafka1/bin/kafka-topics.sh --bootstrap-server 172.31.96.149:19093 --command-config /opt/kafka/3.8.0/server1-kafka1/config/kraft/admin.conf --create --topic hello\n\n/opt/kafka/3.8.0/server1-kafka1/bin/kafka-console-producer.sh --bootstrap-server 172.31.96.149:19093 --producer.config /opt/kafka/3.8.0/server1-kafka1/config/kraft/admin.conf --topic hello\n/opt/kafka/3.8.0/server1-kafka1/bin/kafka-console-consumer.sh --bootstrap-server 172.31.96.149:19093 --consumer.config /opt/kafka/3.8.0/server1-kafka1/config/kraft/admin.conf --topic hello --from-beginning\n\n/opt/kafka/3.8.0/server1/bin/kafka-console-producer.sh --bootstrap-server 172.31.96.149:19093,172.31.96.149:19094,172.31.96.149:19095 --producer.config /opt/kafka/3.8.0/server1/config/kraft/admin.conf --topic hello\n/opt/kafka/3.8.0/server1/bin/kafka-console-consumer.sh --bootstrap-server 172.31.96.149:19093,172.31.96.149:19094,172.31.96.149:19095 --consumer.config /opt/kafka/3.8.0/server1/config/kraft/admin.conf --topic hello --from-beginning\n\n# version\n/opt/kafka/3.8.0/server1/bin/kafka-metadata-quorum.sh --bootstrap-server 172.31.96.149:19093 --command-config /opt/kafka/3.8.0/server1/config/kraft/admin.conf describe --status\n/opt/kafka/3.8.0/server1/bin/kafka-broker-api-versions.sh --bootstrap-server 172.31.96.149:19093 --command-config /opt/kafka/3.8.0/server1/config/kraft/admin.conf\n/opt/kafka/3.8.0/server1-kafka1/bin/kafka-broker-api-versions.sh --bootstrap-server 172.31.96.149:19093,172.31.96.149:19094,172.31.96.149:19095 --command-config /opt/kafka/3.8.0/server1-kafka1/config/kraft/admin.conf\n\n# one time\ncurl -sL http://192.168.88.61/other/kafka_2.12-3.5.2.tgz -o /opt/kafka_2.12-3.5.2.tgz\ntar -xzf /opt/kafka_2.12-3.5.2.tgz -C /opt/\n\n# node1\ncp -r /opt/kafka_2.12-3.5.2 /data/kafka_19093\ncp /data/kafka_19093/config/kraft/server.properties /data/kafka_19093/config/kraft/server.properties.bak.$(date +%Y%m%d%H%M%S)\nsed -i 's/^process.roles=.*/process.roles=broker,controller/' /data/kafka_19093/config/kraft/server.properties\nsed -i 's/^controller.quorum.voters=.*/controller.quorum.voters=1@172.31.96.149:29093,2@172.31.96.149:29094,3@172.31.96.149:29095/' /data/kafka_19093/config/kraft/server.properties\nsed -i 's/^log.dirs=.*/log.dirs=\\/data\\/kafka_19093\\/logs/' /data/kafka_19093/config/kraft/server.properties\n\nsed -i 's/^node.id=.*/node.id=1/' /data/kafka_19093/config/kraft/server.properties\nsed -i 's/^listeners=.*/listeners=PLAINTEXT:\\/\\/172.31.96.149:19093,CONTROLLER:\\/\\/172.31.96.149:29093/' /data/kafka_19093/config/kraft/server.properties\nsed -i 's/^advertised.listeners=.*/advertised.listeners=PLAINTEXT:\\/\\/172.31.96.149:19093/' /data/kafka_19093/config/kraft/server.properties\ncat /data/kafka_19093/config/kraft/server.properties | grep -Ev '^$|#' | egrep \"(process.|node.id|controller.|listeners|log.dir|sadvertised.)\"\n\nKAFKA_CLUSTER_ID=asjC792iR3CMelxQGh923A\n/data/kafka_19093/bin/kafka-storage.sh format -t $KAFKA_CLUSTER_ID -c /data/kafka_19093/config/kraft/server.properties\n\n# node2\ncp -r /opt/kafka_2.12-3.5.2 /data/kafka_19094\ncp /data/kafka_19094/config/kraft/server.properties /data/kafka_19094/config/kraft/server.properties.bak.$(date +%Y%m%d%H%M%S)\nsed -i 's/^process.roles=.*/process.roles=broker,controller/' /data/kafka_19094/config/kraft/server.properties\nsed -i 's/^controller.quorum.voters=.*/controller.quorum.voters=1@172.31.96.149:29093,2@172.31.96.149:29094,3@172.31.96.149:29095/' /data/kafka_19094/config/kraft/server.properties\nsed -i 's/^log.dirs=.*/log.dirs=\\/data\\/kafka_19094\\/logs/' /data/kafka_19094/config/kraft/server.properties\n\nsed -i 's/^node.id=.*/node.id=2/' /data/kafka_19094/config/kraft/server.properties\nsed -i 's/^listeners=.*/listeners=PLAINTEXT:\\/\\/172.31.96.149:19094,CONTROLLER:\\/\\/172.31.96.149:29094/' /data/kafka_19094/config/kraft/server.properties\nsed -i 's/^advertised.listeners=.*/advertised.listeners=PLAINTEXT:\\/\\/172.31.96.149:19094/' /data/kafka_19094/config/kraft/server.properties\ncat /data/kafka_19094/config/kraft/server.properties | grep -Ev '^$|#' | egrep \"(process.|node.id|controller.|listeners|log.dir|sadvertised.)\"\n\nKAFKA_CLUSTER_ID=asjC792iR3CMelxQGh923A\n/data/kafka_19094/bin/kafka-storage.sh format -t $KAFKA_CLUSTER_ID -c /data/kafka_19094/config/kraft/server.properties\n\n# node2\ncp -r /opt/kafka_2.12-3.5.2 /data/kafka_19095\ncp /data/kafka_19095/config/kraft/server.properties /data/kafka_19095/config/kraft/server.properties.bak.$(date +%Y%m%d%H%M%S)\nsed -i 's/^process.roles=.*/process.roles=broker,controller/' /data/kafka_19095/config/kraft/server.properties\nsed -i 's/^controller.quorum.voters=.*/controller.quorum.voters=1@172.31.96.149:29093,2@172.31.96.149:29094,3@172.31.96.149:29095/' /data/kafka_19095/config/kraft/server.properties\nsed -i 's/^log.dirs=.*/log.dirs=\\/data\\/kafka_19095\\/logs/' /data/kafka_19095/config/kraft/server.properties\n\nsed -i 's/^node.id=.*/node.id=3/' /data/kafka_19095/config/kraft/server.properties\nsed -i 's/^listeners=.*/listeners=PLAINTEXT:\\/\\/172.31.96.149:19095,CONTROLLER:\\/\\/172.31.96.149:29095/' /data/kafka_19095/config/kraft/server.properties\nsed -i 's/^advertised.listeners=.*/advertised.listeners=PLAINTEXT:\\/\\/172.31.96.149:19095/' /data/kafka_19095/config/kraft/server.properties\ncat /data/kafka_19095/config/kraft/server.properties | grep -Ev '^$|#' | egrep \"(process.|node.id|controller.|listeners|log.dir|sadvertised.)\"\n\nKAFKA_CLUSTER_ID=asjC792iR3CMelxQGh923A\n/data/kafka_19095/bin/kafka-storage.sh format -t $KAFKA_CLUSTER_ID -c /data/kafka_19095/config/kraft/server.properties\n\n/data/kafka_19095/bin/kafka-broker-api-versions.sh --bootstrap-server 172.31.96.149:19093\n</code></pre>"},{"location":"kafka/REAEMD/#links","title":"links","text":"<ul> <li>What is the proper way to check kafka cluster health?</li> <li>Kafka retention policies</li> </ul>"},{"location":"kubenetes/events/","title":"Events","text":"<ul> <li>Collecting and storing Kubernetes events</li> <li>eventrouter</li> </ul>"},{"location":"kubenetes/minikube/","title":"minikube","text":""},{"location":"kubenetes/minikube/#_1","title":"\u5b89\u88c5","text":"<pre><code>minikube start --driver=docker --container-runtime=containerd --image-mirror-country=cn\n</code></pre>"},{"location":"kubenetes/probe/","title":"\u5065\u5eb7\u68c0\u67e5","text":"<p>\u200b\u6709\u200b\u5b58\u6d3b\u200b\u3001\u200b\u5c31\u7eea\u200b\u548c\u200b\u542f\u52a8\u200b 3 \u200b\u79cd\u200b\u68c0\u67e5\u200b\u65b9\u5f0f\u200b</p>"},{"location":"kubenetes/probe/#links","title":"Links","text":"<ul> <li>\u200b\u5b58\u6d3b\u200b\u3001\u200b\u5c31\u7eea\u200b\u548c\u200b\u542f\u52a8\u200b\u63a2\u9488\u200b</li> <li>\u200b\u914d\u7f6e\u200b\u5b58\u6d3b\u200b\u3001\u200b\u5c31\u7eea\u200b\u548c\u200b\u542f\u52a8\u200b\u63a2\u9488\u200b</li> <li>Pod \u200b\u7684\u200b\u751f\u547d\u5468\u671f\u200b</li> </ul>"},{"location":"linux/","title":"Linux","text":""},{"location":"linux/#_1","title":"\u521d\u59cb\u5316","text":"<pre><code>sudo systemctl disable firewalld\nsudo systemctl stop firewalld\nsudo sed -i 's/SELINUX\\=enforcing/SELINUX\\=disabled/' /etc/selinux/config\nsudo setenforce 0\n</code></pre>"},{"location":"linux/#journalctl","title":"journalctl","text":"<pre><code># \u200b\u67e5\u770b\u200b\u67d0\u4e2a\u200b\u670d\u52a1\u200b\u7684\u200b\u65e5\u5fd7\u200b\nsudo journalctl -u sshd --no-pager\n</code></pre>"},{"location":"linux/#user","title":"User","text":"<pre><code># \u200b\u52a0\u5165\u200b\u7ec4\u200b\nusermod -a -G sudo suhua\n\n# sudo \u200b\u4e0d\u200b\u9700\u8981\u200b\u5bc6\u7801\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5199\u200b\u5728\u200b %sudo \u200b\u7ec4\u200b\u7684\u200b\u540e\u9762\u200b\nsuhua ALL=(ALL:ALL) NOPASSWD:ALL\n\n# \u200b\u5c06\u200b\u7528\u6237\u200b\u52a0\u5165\u200b\u7ec4\u200b\nsudo usermod -aG sudo username\n\n# \u200b\u5c06\u200b\u7528\u6237\u200b\u4ece\u200b\u7ec4\u4e2d\u200b\u5220\u9664\u200b\nsudo gpasswd --delete username sudo\n</code></pre>"},{"location":"linux/#vim","title":"Vim","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u4e00\u4e2a\u200b tab \u200b\u7b49\u4e8e\u200b 2 \u200b\u4e2a\u200b\u7a7a\u683c\u200b\ncat &lt;&lt; EOF | sudo tee -a /etc/vim/vimrc.local\n\" one tab 2 space\nset tabstop=2\nset shiftwidth=2\nset autoindent\nset expandtab\nset softtabstop=0\nEOF\n\n# \u200b\u7f16\u8f91\u200b\u65f6\u200b\u51fa\u73b0\u200b 1H \u200b\u5947\u602a\u200b\u5b57\u7b26\u200b\nexport LANG=en.UTF-8\n</code></pre>"},{"location":"linux/#grep","title":"grep","text":"<pre><code># \u200b\u5305\u542b\u200b\u4efb\u610f\u200b\u4e00\u4e2a\u200b\u5173\u952e\u5b57\u200b\ngrep -E 'google|youtube' file.txt\n</code></pre>"},{"location":"linux/#generate-password","title":"generate password","text":""},{"location":"linux/NetworkManager/","title":"NetworkManager","text":""},{"location":"linux/NetworkManager/#etcresolvconf","title":"/etc/resolv.conf","text":"<pre><code># \u200b\u53d6\u6d88\u200b\u901a\u8fc7\u200b NetworkManager \u200b\u7ba1\u7406\u200b /etc/resolv.conf \u200b\u6587\u4ef6\u200b\n# vim /etc/NetworkManager/conf.d/90-dns-none.conf\n[main]\ndns=none\n\n# \u200b\u91cd\u8f7d\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b\nsystemctl reload NetworkManager\n\n# \u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b /etc/resolv.conf \u200b\u5373\u53ef\u200b\nvim /etc/resolv.conf\n\n# \u200b\u9a8c\u8bc1\u200b\n# vim /etc/resolv.conf \u200b\u4fee\u6539\u200b\u540e\u200b\n# systemctl reload NetworkManager\n# \u200b\u67e5\u770b\u200b /etc/resolv.conf \u200b\u662f\u4e0d\u662f\u200b\u6ca1\u6709\u200b\u53d8\u5316\u200b\n\n# \u200b\u67e5\u770b\u200b NetworkManager \u200b\u73b0\u6709\u200b\u914d\u7f6e\u200b\nNetworkManager --print-config\n</code></pre>"},{"location":"linux/NetworkManager/#link","title":"link","text":"<ul> <li>Chapter 20. Manually configuring the /etc/resolv.conf file</li> </ul>"},{"location":"linux/TODO/","title":"TODO","text":"<ul> <li>/var/log/audit/audit.log</li> <li>journalctl</li> <li>gpart</li> <li>grub2</li> <li>systemd</li> <li>PV \u200b\u5b58\u5728\u200b not usable 4.00 MiB [root@localhost ~]# pvdisplay   --- Physical volume ---   PV Name               /dev/sda3   VG Name               ROOTVG   PV Size               58.63 GiB / not usable 4.00 MiB   Allocatable           yes    PE Size               4.00 MiB   Total PE              15009   Free PE               1   Allocated PE          15008   PV UUID               HmgWNM-F3Cs-NGAb-Xz1V-DLtN-fN0g-eJJ512</li> </ul>"},{"location":"linux/TODO/#links","title":"Links","text":"<ul> <li>How to Create Your Own Repositories for Packages</li> <li>SUSE Linux Enterprise Server \u200b\u6587\u6863\u200b</li> </ul>"},{"location":"linux/answer/","title":"answer","text":"<pre><code># \u200b\u9501\u5b9a\u200b Fn \u200b\u952e\u200b\nEsc + Fn\n</code></pre>"},{"location":"linux/answer/#links","title":"Links","text":"<ol> <li>How can I toggle the Fn (function) key?</li> </ol>"},{"location":"linux/cheetsheet/","title":"cheetsheet","text":""},{"location":"linux/cheetsheet/#_1","title":"\u67e5\u770b\u200b\u5e8f\u5217\u53f7","text":"<pre><code># &gt; RHEL6\ncat /sys/devices/virtual/dmi/id/product_serial\n\n# RHEL5\nsudo dmidecode -s system-serial-number\n</code></pre>"},{"location":"linux/cheetsheet/#_2","title":"\u53c2\u8003","text":"<ol> <li>Extract the Linux serial number without sudo</li> </ol>"},{"location":"linux/chrony/","title":"Chrony","text":"<pre><code># \u200b\u624b\u5de5\u200b\u540c\u6b65\u200b\nsudo chronyc -a makestep\n</code></pre>"},{"location":"linux/chrony/#links","title":"Links","text":"<ul> <li>How to configure chrony as an NTP client or server in Linux</li> <li>chrony.conf(5) Manual Page</li> <li>Manage NTP with Chrony</li> <li>Chapter 3. Configuring the Date and Time</li> <li>Chrony\u200b\u7684\u200b\u51e0\u4e2a\u200b\u8be6\u7ec6\u200b\u914d\u7f6e\u200b\u7ec6\u8282\u200b</li> </ul>"},{"location":"linux/concepts/","title":"\u6982\u5ff5\u200b\u7406\u89e3","text":"<p>\u200b\u5bf9\u200b\u4e00\u4e9b\u200b\u96be\u61c2\u200b\u6216\u8005\u200b\u5bb9\u6613\u200b\u6df7\u6dc6\u200b\u7684\u200b\u6982\u5ff5\u200b\u8fdb\u884c\u200b\u8bf4\u660e\u200b\u3002</p>"},{"location":"linux/concepts/#chroot","title":"chroot","text":"<p>chroot\uff0c\u200b\u5373\u200b change root directory\uff08\u200b\u66f4\u6539\u200b root \u200b\u76ee\u5f55\u200b\uff09\u3002\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u4e2d\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u90fd\u200b\u662f\u200b\u4ee5\u200b /\uff0c\u200b\u5373\u200b\u4ee5\u6839\u200b (root) \u200b\u5f00\u59cb\u200b\u7684\u200b\u3002\u200b\u800c\u200b\u5728\u200b\u4f7f\u7528\u200b chroot \u200b\u4e4b\u540e\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u7684\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5c06\u200b\u4ee5\u200b\u6307\u5b9a\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u4f5c\u4e3a\u200b / \u200b\u4f4d\u7f6e\u200b\u3002</p> <ul> <li>Linux chroot \u200b\u547d\u4ee4\u200b\u8be6\u89e3\u200b</li> </ul>"},{"location":"linux/cpu/","title":"CPU","text":"<pre><code># CPUs = Threads per core X cores per socket X sockets\n$ lscpu | grep -E '^Thread|^Core|^Socket|^CPU\\('\nCPU(s):                8  # \nThread(s) per core:    2  # \u200b\u6bcf\u6838\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u6570\u200b\nCore(s) per socket:    4  # \u200b\u6bcf\u9897\u200b CPU \u200b\u7684\u200b\u6838\u6570\u200b\nSocket(s):             1  # CPU \u200b\u9897\u6570\u200b\n\n# \u200b\u83b7\u53d6\u200b CPU \u200b\u5382\u5546\u200b\u540d\u79f0\u200b\n$ lscpu | sed -nr '/Model name/ s/.*:\\s*(.*) @ .*/\\1/p'\nIntel(R) Atom(TM) CPU  Z3735F\n</code></pre>"},{"location":"linux/cpu/#links","title":"Links","text":"<ul> <li>How to know number of cores of a system in Linux?</li> <li>How do I get the model name of my processor?</li> </ul>"},{"location":"linux/debian/","title":"Debian","text":"<ul> <li>https://www.debian.org/distrib/packages</li> </ul>"},{"location":"linux/dhcp/","title":"DHCP","text":"<pre><code># \u200b\u6d4b\u8bd5\u200b DHCP Server\nsudo nmap --script broadcast-dhcp-discover\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b IP\ndhcp-lease-list\n</code></pre>"},{"location":"linux/dhcp/#links","title":"Links","text":"<ul> <li>https://serverfault.com/questions/171744/command-line-program-to-test-dhcp-service</li> </ul>"},{"location":"linux/efi/","title":"EFI","text":""},{"location":"linux/efi/#_1","title":"\u5b66\u4e60\u5fc3\u5f97","text":"<ol> <li>\u200b\u6709\u200b BIOS \u200b\u548c\u200b UEFI \u200b\u4e24\u79cd\u200b\u56fa\u4ef6\u200b\uff0c\u200b\u5176\u4e2d\u200b\u90e8\u5206\u200b UEFI \u200b\u56fa\u4ef6\u200b\u53ef\u4ee5\u200b BISO \u200b\u517c\u5bb9\u200b\u6a21\u5f0f\u200b\u5f15\u5bfc\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff1b</li> <li>BIOS/MBR/MS-DOS \u200b\u5206\u533a\u8868\u200b\u548c\u200b UEFI/GPT \u200b\u5206\u533a\u8868\u200b\u662f\u200b\u56fa\u5b9a\u200b\u7684\u200b\u7ec4\u5408\u200b\uff1b</li> <li>BIOS \u200b\u505a\u200b\u5b8c\u200b POST \u200b\u786c\u4ef6\u200b\u8bbe\u5907\u200b\u81ea\u68c0\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u9010\u4e2a\u200b\u68c0\u67e5\u200b\u6bcf\u4e2a\u200b\u786c\u4ef6\u200b\u8bbe\u5907\u200b\u7684\u200b MBR \u200b\u533a\u200b\uff0c\u200b\u76f4\u5230\u200b\u627e\u5230\u200b\u7b2c\u4e00\u4e2a\u200b\u542f\u52a8\u200b\u88c5\u8f7d\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u5e76\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u6267\u884c\u200b\u3002</li> </ol>"},{"location":"linux/efi/#uefi-iso","title":"\u521b\u5efa\u200b\u4e00\u4e2a\u200b UEFI ISO \u200b\u955c\u50cf","text":"<pre><code>sudo apt install -y grub-efi-amd64-bin mtools xorriso mkisofs\n\nmkdir -p iso/boot/grub\nmkdir -p iso/EFI/BOOT\n\ncp /path/to/initrd.img iso/boot/initrd.img\ncp /path/to/vmlinuz iso/boot/vmlinuz\n\ncat &lt;&lt;EOF&gt; iso/boot/grub/grub.cfg\nset timeout=0\nset root=(cd0)\nset prefix=(memdisk)/boot/grub\n\nmenuentry 'Linux' {\n   echo 'Loading kernel...'\n   linux /boot/vmlinuz console=tty0 rw\n   echo \"Loading initrd...\"\n   initrd /boot/initrd.img\n   echo \"Booting...\"\n}\nEOF\n\ngrub-mkstandalone -o iso/EFI/BOOT/BOOTX64.EFI -O x86_64-efi \"boot/grub/grub.cfg=iso/boot/grub/grub.cfg\"\ndd if=/dev/zero of=iso/EFI/BOOT/efiboot.img bs=1M count=10\nmkfs.msdos -F 12 -n 'EFIBOOTISO' iso/EFI/BOOT/efiboot.img\nmmd -i iso/EFI/BOOT/efiboot.img ::EFI\nmmd -i iso/EFI/BOOT/efiboot.img ::EFI/BOOT\nmcopy -i iso/EFI/BOOT/efiboot.img iso/EFI/BOOT/BOOTX64.EFI ::EFI/BOOT/BOOTX64.EFI\n\nxorriso -as mkisofs -V 'EFI_ISO_BOOT' -e EFI/BOOT/efiboot.img -no-emul-boot -o /tmp/efi-boot.iso iso/\n</code></pre>"},{"location":"linux/efi/#links","title":"Links","text":"<ul> <li>An introduction to the Linux boot and startup processes</li> <li>Guide to the Boot Process of a Linux System</li> <li>\uff08\u200b\u8bd1\u200b\uff09UEFI \u200b\u542f\u52a8\u200b\uff1a\u200b\u5b9e\u9645\u200b\u5de5\u4f5c\u200b\u539f\u7406\u200b </li> <li>UEFI boot: how does that actually work, then?</li> <li>https://github.com/linuxkit/linuxkit/blob/master/tools/mkimage-iso-efi/make-efi</li> <li>Create bootable UEFI ISO image</li> </ul>"},{"location":"linux/env/","title":"env","text":"<p>\u200b\u5173\u4e8e\u200b\u73af\u5883\u53d8\u91cf\u200b</p>"},{"location":"linux/env/#etcenvironment","title":"/etc/environment","text":"<pre><code># /etc/environment \u200b\u53ea\u200b\u652f\u6301\u200b\u4ee5\u4e0b\u200b\u683c\u5f0f\u200b\uff0c\u200b\u4e0d\u200b\u652f\u6301\u200b\u4f7f\u7528\u200b export \u200b\u7b49\u200b shell \u200b\u8bed\u6cd5\u200b\nVARIABLE_NAME=\"Value\"\n</code></pre>"},{"location":"linux/env/#_1","title":"\u7cfb\u7edf\u200b\u548c\u200b\u4e2a\u4eba\u200b\u73af\u5883\u200b\u8bbe\u7f6e","text":"<pre><code># \u200b\u7cfb\u7edf\u200b\u5168\u5c40\u200b\u7684\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\n\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b\uff1a/etc/profile\n\u200b\u975e\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b\uff1a/etc/bashrc\n\n# \u200b\u7528\u6237\u200b\u4e2a\u4eba\u200b\u7684\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\n\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b: $HOME/.bash_profile\n\u200b\u975e\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b\uff1a$HOME/.bashrc\n</code></pre>"},{"location":"linux/env/#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How to Effectively Use the \u2018/etc/environment\u2019 File in Linux</li> <li>linux PATH\u200b\u73af\u5883\u53d8\u91cf\u200b\u5168\u200b\u89e3\u6790\u200b</li> </ul>"},{"location":"linux/faq/","title":"FAQ","text":""},{"location":"linux/faq/#_1","title":"\u5176\u4ed6","text":"<pre><code># Ctrl+L \u200b\u65e0\u6548\u200b\nbind -x '\"\\C-l\": clear'\n\n# ps \u200b\u7528\u6237\u540d\u200b\u663e\u793a\u200b\u4e0d\u5168\u200b\nps axo user:20,pid,pcpu,pmem,vsz,rss,tty,stat,start,time,comm\n\n# /tmp \u200b\u76ee\u5f55\u200b\u6743\u9650\u200b 1777\nchmod 1777 /tmp\n</code></pre>"},{"location":"linux/faq/#_2","title":"\u54c1\u724c","text":"<ul> <li>x86_64<ul> <li>Intel</li> <li>\u200b\u6d77\u5149\u200b</li> </ul> </li> <li>aarch64<ul> <li>\u200b\u9cb2\u9e4f\u200b</li> <li>\u200b\u98de\u817e\u200b</li> </ul> </li> </ul>"},{"location":"linux/faq/#links","title":"Links","text":"<ol> <li>ps aux for long charactered usernames shows a plus sign</li> </ol>"},{"location":"linux/ftp/","title":"FTP","text":""},{"location":"linux/ftp/#lftp","title":"LFTP","text":"<p>\u200b\u4f7f\u7528\u200b</p> <pre><code>$ lftp 21.123.39.160 -u fhftp\nPassword:\nlftp fhftp@21.123.39.160:~&gt; put c.txt\n6 bytes transferred\nlftp fhftp@21.123.39.160:~&gt; ls\ntotal 1\n-rw-r-----   1 fhftp      fprs             6 Dec  7 12:41 c.txt\n</code></pre> <p>\u200b\u4e3b\u52a8\u200b\u6a21\u5f0f\u200b</p> <pre><code>set ftp:passive-mode off\n</code></pre> <p>\u200b\u5e38\u7528\u547d\u4ee4\u200b</p> <pre><code># ls \u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\u5185\u5bb9\u200b\n!dir \n!dir /opt/www\n\n# \u200b\u5207\u6362\u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\nlcd /tmp\n\n# \u200b\u67e5\u770b\u200b\u73b0\u5728\u200b\u6240\u5728\u200b\u672c\u5730\u200b\u4f4d\u7f6e\u200b\nlpwd\n</code></pre>"},{"location":"linux/glibc/","title":"glibc","text":"<pre><code># show version\nldd --version\n\n# On 64-bit Debian based system:\n/lib/x86_64-linux-gnu/libc.so.6\n\n# on 32-bit Debian based system:\n/lib/i386-linux-gnu/libc.so.6\n\n# On 64-bit Red Hat based system:\n/lib64/libc.so.6\n\n# On 32-bit Red Hat based systems:\n/lib/libc.so.6\n</code></pre>"},{"location":"linux/glibc/#links","title":"Links","text":"<ul> <li>How to check glibc version on Linux</li> </ul>"},{"location":"linux/grub/","title":"grub","text":"<pre><code>grub2-setpassword\n</code></pre>"},{"location":"linux/hash/","title":"hash","text":"<pre><code># sha256sum\n# \u200b\u7528\u6237\u200b\uff1a\u200b\u50cf\u200b redis \u200b\u7528\u6237\u200b\u5bc6\u7801\u200b\u7684\u200b\u751f\u6210\u200b\necho -n foobar | sha256sum\n</code></pre>"},{"location":"linux/history/","title":"history","text":"<pre><code># Enter the following command in a terminal to print all the environment variables:\nprintenv\n\n# To show a list including the \"shell variables\" you can enter the next command:\n# This will show you not only the shell variables, but the environment variables too.\n( set -o posix ; set ) | less\n\n# PROMPT_COMMAND\n# \u200b\u5728\u200b bash \u200b\u91cc\u200b\u8bbe\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b PROMPT_COMMAND\uff0c\u200b\u8fd9\u4e2a\u200b\u547d\u4ee4\u200b\u4f1a\u200b\u5728\u200b\u7528\u6237\u200b\u63d0\u793a\u7b26\u200b\u4e4b\u524d\u200b\u88ab\u200b\u6267\u884c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u6765\u200b\u8bb0\u5f55\u200b\u7528\u6237\u200b\u64cd\u4f5c\u200b\u5386\u53f2\u200b \n# Bash provides an environment variable called PROMPT_COMMAND. The contents of this variable are executed as a regular Bash command just before Bash displays a prompt.\nIf set, the value is executed as a command prior to issuing each primary prompt.\n\n# HISTSIZE\n</code></pre>"},{"location":"linux/history/#links","title":"Links","text":"<ul> <li>How to list all variables names and their current values?</li> <li>How to manage your Linux command history</li> <li>HISTTIMEFORMAT syntax</li> <li>4.1. PROMPT_COMMAND</li> </ul>"},{"location":"linux/img/","title":"\u56fe\u7247\u200b\u5904\u7406","text":"<ul> <li>https://picwish.com/</li> </ul>"},{"location":"linux/iptables/","title":"iptables","text":""},{"location":"linux/iptables/#_1","title":"\u5b89\u88c5","text":"<pre><code>systemctl stop firewalld \nsystemctl disable firewalld \n\nyum -y install iptables-services \nsystemctl enable iptables\nsystemctl start iptables\n\nvim /etc/sysconfig/iptables\nsudo systemctl restart iptables\n\n$ sudo service iptables save\niptables: Saving firewall rules to /etc/sysconfig/iptables: [  OK  ]\n\n# RHEL7\u30018\uff0cv7update6 \u200b\u9700\u200b\u5355\u72ec\u200b\u5b89\u88c5\u200b\uff0cRHEL5\u30016\u3001kylin v10 \u200b\u9ed8\u8ba4\u200b\u81ea\u5e26\u200b\nsudo yum install iptables-services\n\n# \u200b\u4fdd\u5b58\u200b\u914d\u7f6e\u200b\uff0c\u200b\u914d\u7f6e\u200b\u4fdd\u5b58\u200b\u4f4d\u7f6e\u200b /etc/sysconfig/iptables\n# RHEL 5/6/\n/etc/init.d/iptables save\n\n# RHEL7\u30018/kylin v10/v7update6/\nservice iptables save\n\nservice iptables restart \n</code></pre>"},{"location":"linux/iptables/#_2","title":"\u4f7f\u7528","text":"<pre><code># \u200b\u67e5\u770b\u200b\u89c4\u5219\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b iptables -t filter -L\niptables -L\n\n# \u200b\u53ea\u200b\u770b\u200b INPUT \u200b\u94fe\u200b\u7684\u200b filter \u200b\u8868\u200b\niptables -nvL INPUT --line-numbers\n\n# \u200b\u5728\u200b\u8868\u5934\u200b\u63d2\u5165\u200b\u89c4\u5219\u200b -I insert\niptables -t filter -I INPUT -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u6216\u8005\u200b\u5ffd\u7565\u200b -t filter \u200b\u9ed8\u8ba4\u200b\u5c31\u662f\u200b\u7f16\u8f91\u200b filter \u200b\u8868\u200b\niptables -I INPUT -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u5728\u200b\u8868\u5c3e\u200b\u8ffd\u52a0\u200b\u89c4\u5219\u200b -A append\niptables -A INPUT -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u5c06\u200b\u89c4\u5219\u200b\u63d2\u5165\u200b\u7279\u5b9a\u200b\u4f4d\u7f6e\u200b\niptables -I INPUT 2 -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u6e05\u7a7a\u200b\u6240\u6709\u200b\u94fe\u8868\u200b\u7684\u200b\u89c4\u5219\u200b\niptables -F \n\n# \u200b\u4ec5\u4ec5\u200b\u6e05\u7a7a\u200b filter \u200b\u8868\u200b\u7684\u200b\u89c4\u5219\u200b\niptables -t filter -F\n\n# \u200b\u4ec5\u4ec5\u200b\u6e05\u7a7a\u200b INPUT \u200b\u94fe\u200b filter \u200b\u8868\u200b\u7684\u200b\u89c4\u5219\u200b\niptables -t filter -F INPUT\n</code></pre>"},{"location":"linux/iptables/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<pre><code># Yes, once you have added a rule to iptables it becomes active immediately - this is why you should be careful with your rules as it is possible to lock yourself out.\n\n# The iptables-save command writes a series of iptables commands to a file such that the current state of the firewall can be saved. If you want to restore that state you can use the iptables-restore command.\n</code></pre>"},{"location":"linux/iptables/#links","title":"Links","text":"<ul> <li>iptables \u200b\u7cfb\u5217\u200b\u6587\u7ae0\u200b</li> <li>Is it enough adding iptables rules without restart?</li> <li>Is \"iptables-save\" will reload iptable configuration?</li> <li>3 ways to make iptables persistent</li> <li>Sysadmin tools: How to use iptables</li> <li>Iptables Tutorial 1.2.1</li> <li>How to save iptables firewall rules permanently on Linux</li> </ul>"},{"location":"linux/iso/","title":"\u523b\u5f55\u5149\u76d8","text":""},{"location":"linux/iso/#ks","title":"\u6267\u884c\u200b\u5305\u542b\u200b ks \u200b\u7684\u200b\u955c\u50cf","text":"<pre><code># \u200b\u67e5\u770b\u200b iso \u200b\u5757\u200b\u8bbe\u5907\u200b ID\n# blkid rhel-server-7.9-x86_64-dvd.iso \nrhel-server-7.9-x86_64-dvd.iso: UUID=\"2020-09-17-19-35-15-00\" LABEL=\"RHEL-7.9 Server.x86_64\" TYPE=\"iso9660\" PTTYPE=\"dos\" \n# \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u67e5\u770b\u200b iso \u200b\u955c\u50cf\u200b\u7684\u200b grup.cfg \u200b\u6587\u4ef6\u200b\n# \u200b\u5982\u200b\uff1aRHEL-8-3-0-BaseOS-x86_64\nlinuxefi /images/pxeboot/vmlinuz inst.stage2=hd:LABEL=RHEL-8-3-0-BaseOS-x86_64 quiet inst.ks=cdrom:/ks.cfg\n\n# RHEL7\nmkdir /mnt/iso\nmount rhel-server-7.9-x86_64-dvd.iso /mnt/iso\ncp -r /mnt/iso /tmp/rhel79\nchmod -R u+w /tmp/rhel79\ncp /opt/rhel79.cfg ks.cfg\ncd /tmp/rhel79\n\n# \u200b\u8ffd\u52a0\u200b inst.ks=cdrom:/ks.cfg\nvim EFI/BOOT/grub.cfg \nvim isolinux/isolinux.cfg \n\n# \u200b\u5b89\u88c5\u200b\u5236\u4f5c\u200b iso \u200b\u7684\u200b\u8f6f\u4ef6\u200b\nyum install -y genisoimage isomd5sum syslinux\n\n# \u200b\u5f00\u59cb\u200b\u5236\u4f5c\u200b\nmkisofs -o /opt/rhel79test.iso -b isolinux/isolinux.bin -J -R -l -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -eltorito-alt-boot -e images/efiboot.img -no-emul-boot -graft-points -joliet-long -V \"RHEL-7.9 Server.x86_64\" .\nisohybrid --uefi /opt/rhel79test.iso \nimplantisomd5 /opt/rhel79test.iso \n\n# RHEL8\nmkisofs -o /opt/rhel83test.iso -b isolinux/isolinux.bin -J -R -l -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -eltorito-alt-boot -e images/efiboot.img -no-emul-boot -graft-points -joliet-long -V \"RHEL-8-3-0-BaseOS-x86_64\" .\nisohybrid --uefi /opt/rhel83test.iso\nimplantisomd5 /opt/rhel83\n\n# Kylin V10 SP1/SP2 \u200b\u90fd\u200b\u9002\u7528\u200b\n# SP1/2 LABEL: Kylin-Server-10\nmkisofs -o /opt/v10sp2.iso -b isolinux/isolinux.bin -J -R -l -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -eltorito-alt-boot -e images/efiboot.img -no-emul-boot -graft-points -V \"Kylin-Server-10\" .\nisohybrid --uefi /opt/v10sp2.iso\nimplantisomd5 /opt/v10sp2.iso\n</code></pre>"},{"location":"linux/iso/#dd","title":"dd","text":"<pre><code>dd if=rhcos-4.8.14-x86_64-live.x86_64.iso of=&lt;dev/sdx&gt; status=progress\n</code></pre>"},{"location":"linux/iso/#ventoy","title":"Ventoy","text":"<p>\u200b\u521d\u59cb\u5316\u200b U \u200b\u76d8\u200b</p> <pre><code>wget https://github.com/ventoy/Ventoy/releases/download/v1.0.91/ventoy-1.0.91-linux.tar.gz\ntar -zxvf ventoy-1.0.91-linux.tar.gz\ncd ventoy-1.0.91\nsudo sh Ventoy2Disk.sh -i /dev/sdX\n</code></pre> <p>\u200b\u5c06\u200b iso \u200b\u6587\u4ef6\u200b\u62f7\u8d1d\u5230\u200b U \u200b\u76d8\u200b</p> <pre><code>cp Win10_22H2_Chinese_Simplified_x64v1.iso /path/to/Ventory\n</code></pre> <p>\u200b\u63d2\u5165\u200b U \u200b\u76d8\u540e\u200b\uff0c\u200b\u8fdb\u5165\u200b BIOS\uff0c\u200b\u5173\u95ed\u200b Secure Boot \u200b\u5e76\u200b\u8bbe\u7f6e\u200b\u6210\u200b\u4ece\u200b U \u200b\u76d8\u200b\u542f\u52a8\u200b\u3002</p> <p>Note</p> <p>\u200b\u5fc5\u987b\u200b\u5173\u95ed\u200b Secure Boot \u200b\u529f\u80fd\u200b\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u51fa\u73b0\u200b <code>Verification failed: (0x1A) Security Violation</code> \u200b\u62a5\u9519\u200b\u3002</p>"},{"location":"linux/iso/#_2","title":"\u53c2\u8003","text":"<ul> <li>https://www.ventoy.net/cn/doc_start.html#doc_linux_cli</li> <li>https://askubuntu.com/a/1456906</li> <li>https://github.com/pbatard/rufus</li> <li>How to create a modified Red Hat Enterprise Linux ISO with kickstart file or modified installation media?</li> </ul>"},{"location":"linux/journalctl/","title":"journalctl","text":"<pre><code># displays the messages from the current boot\njournalctl -k\n\n# view previous boots with the -b option\njournalctl -b\n</code></pre>"},{"location":"linux/kickstart/","title":"PXE \u200b\u81ea\u52a8\u200b\u88c5\u673a","text":""},{"location":"linux/kickstart/#iso","title":"\u901a\u8fc7\u200b ISO \u200b\u642d\u5efa\u200b\u8f6f\u4ef6\u200b\u6e90","text":"<pre><code># \u200b\u6302\u8f7d\u200b ISO \u200b\u5230\u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\nmount rhel-server-7.9-x86_64-dvd.iso /opt/mirror/rhel79\n\n# \u200b\u914d\u7f6e\u200b Nginx \u200b\u80fd\u200b\u8bbf\u95ee\u200b\u955c\u50cf\u200b\u6e90\u200b\nroot /opt/mirror/rhel79;\nautoindex on\n</code></pre>"},{"location":"linux/kickstart/#kickstart","title":"\u51c6\u5907\u200b Kickstart","text":"<pre><code># \u200b\u914d\u7f6e\u200b Nginx \u200b\u80fd\u200b\u8bbf\u95ee\u200b ks.cfg\nalias /opt/ks;\n</code></pre>"},{"location":"linux/kickstart/#dhcp","title":"\u642d\u5efa\u200b DHCP","text":"<pre><code># \u200b\u5b89\u88c5\u200b DHCP Server\nsudo apt install isc-dhcp-server\n\n## /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\nlog-facility local7;\n\nsubnet 192.168.88.0 netmask 255.255.255.0 {\n range 192.168.88.100 192.168.88.200;\n next-server 192.168.88.66;\n filename \"pxelinux/pxelinux.0\";\n}\n</code></pre>"},{"location":"linux/kickstart/#tftp","title":"\u642d\u5efa\u200b TFTP","text":"<pre><code># \u200b\u5b89\u88c5\u200b tftp\nsudo apt install tftpd-hpa\n\n# \u200b\u9ed8\u8ba4\u200b\u914d\u7f6e\u200b /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/var/lib/tftpboot\"\nTFTP_ADDRESS=\":69\"\nTFTP_OPTIONS=\"--secure\"\n\n# \u200b\u51c6\u5907\u200b pxelinux.0\ncp /opt/mirror/rhel79/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\n\nmkdir /var/lib/tftpboot/pxelinux\ncp usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/pxelinux/\ncp usr/share/syslinux/vesamenu.c32 /var/lib/tftpboot/pxelinux/\n\n# RHEL\ne28413b36fee074c30554f8c9e54ca2c  pxelinux.0\n# Kylin V10\ndc53ded43315e73f09234a2b88fce38c  pxelinux.0\n\n# \u200b\u51c6\u5907\u200b\u5185\u6838\u200b\u6587\u4ef6\u200b\nmkdkir -p /var/lib/tftpboot/pxelinux/images/rhel79/\ncp /opt/mirror/rhel79/images/pxeboot/{vmlinuz,initrd.img} /var/lib/tftpboot/pxelinux/images/rhel79/\n\n# \u200b\u51c6\u5907\u200b\u83dc\u5355\u200b\u6587\u4ef6\u200b\nmkdir /var/lib/tftpboot/pxelinux/pxelinux.cfg\ncp /opt/mirror/rhel79/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux/pxelinux.cfg/default\n\n# \u200b\u4fee\u6539\u200b\u83dc\u5355\u200b\u6587\u4ef6\u200b\ndefault linux\n...\nlabel linux\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  menu default\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img ip=dhcp inst.ks=http://192.168.88.66/ks/ks.cfg quiet\n...\n\n# \u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\n/var/lib/tftpboot/\n\u2514\u2500\u2500 pxelinux\n    \u251c\u2500\u2500 images\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 rhel79\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n    \u251c\u2500\u2500 pxelinux.0\n    \u2514\u2500\u2500 pxelinux.cfg\n        \u2514\u2500\u2500 default\n</code></pre>"},{"location":"linux/kickstart/#_1","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b IP\ndhcp-lease-list\n\n# \u200b\u6d4b\u8bd5\u200b DHCP Server\nsudo nmap --script broadcast-dhcp-discover\n\n# \u200b\u6d4b\u8bd5\u200b UDP \u200b\u7aef\u53e3\u200b\u662f\u5426\u200b\u901a\u200b\nnmap 10.0.0.1 -sU -pU:69\n</code></pre>"},{"location":"linux/kickstart/#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Installing and Configuring TFTP Server on Ubuntu</li> <li>How to install and configure isc-dhcp-server</li> <li>01-\u200b\u81ea\u52a8\u5316\u200b\u88c5\u673a\u200b\u5de5\u5177\u200b-kickstart</li> <li>Need to set up yum repository for locally-mounted DVD on Red Hat Enterprise Linux 7</li> <li>27.3. Kickstart Syntax Reference</li> <li>PXE\u200b\u90e8\u7f72\u200b\u5b9e\u65bd\u200b</li> <li>Chapter 24. Preparing for a Network Installation</li> <li>How to set-up and configure a PXE Server</li> <li>List Assigned DHCP IP Addresses</li> <li>How do I configure syslinux to boot immediately</li> <li>dhcp-relay custom log file</li> <li>Sample kickstart partition example (RAID, LVM, Multipath, Simple,..)</li> <li>s14.\u200b\u8fd0\u7ef4\u200b\u81ea\u52a8\u5316\u200b\u4e4b\u200b\u7cfb\u7edf\u200b\u90e8\u7f72\u200b -- \u200b\u5b9e\u6218\u200b\u6848\u4f8b\u200b\uff1akickstart\u200b\u6587\u4ef6\u200b\u5236\u4f5c\u200b\u8fc7\u7a0b\u200b</li> <li>Why does Red Hat Enterprise Linux 7.6 kickstart installation not create bond interfaces properly?</li> <li>\u200b\u865a\u62df\u673a\u200b\u4e0b\u9762\u200b\u5b9e\u73b0\u200b\u53cc\u7f51\u5361\u200b\u7ed1\u5b9a\u200b <li>Linux: Create virtual network interface</li> <li>Introduction to Linux interfaces for virtual networking</li>"},{"location":"linux/kylin/","title":"Kylin","text":""},{"location":"linux/kylin/#_1","title":"\u67e5\u770b\u200b\u7248\u672c","text":"<pre><code>nkvers\ncat /etc/.productinfo\n</code></pre>"},{"location":"linux/kylin/#_2","title":"\u5e38\u89c1\u95ee\u9898","text":"<pre><code># yum \u200b\u6e90\u62a5\u200b ssl \u200b\u8bc1\u4e66\u200b\u9519\u8bef\u200b\nsslverify = 0\n\n# \u200b\u540c\u6b65\u200b\u6e90\u200b\n# \u200b\u5148\u200b\u5c06\u200b yum repo \u200b\u6307\u5411\u200b\u7279\u5b9a\u200b\u7248\u672c\u200b\u548c\u200b\u67b6\u6784\u200b\u7684\u200b\u6e90\u200b\uff0c\u200b\u7136\u540e\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u8bed\u53e5\u200b\u540c\u6b65\u200b\nreposync -n --norepopath --repoid=ks10-adv-updates --arch=x86_64 -p /opt/mirror/os/kylin/v10sp2/updates/x86_64\nreposync -n --norepopath --repoid=ks10-adv-updates --arch=x86_64 -p /opt/mirror/os/kylin/v10sp1/updates/x86_64\nreposync -n --norepopath --repoid=ks10-adv-updates --arch=aarch64 -p /opt/mirror/os/kylin/v10sp2/updates/aarch64\nreposync -n --norepopath --repoid=ks10-adv-updates --arch=aarch64 -p /opt/mirror/os/kylin/v10sp1/updates/aarch64\nreposync -n --norepopath --repoid=ks7-adv-updates --arch=x86_64 -p /opt/mirror/os/kylin/v7/updates/x86_64\nreposync -n --norepopath --repoid=ks7-adv-updates --arch=aarch64 -p /opt/mirror/os/kylin/v7/updates/aarch64\n\nreposync -n --norepopath --repoid=ks7-adv-updates --arch=x86_64 -p /opt/mirror/os/kylin/v7/updates/x86_64 --urls\n</code></pre>"},{"location":"linux/kylin/#_3","title":"\u914d\u7f6e\u200b\u7f51\u7edc","text":"<pre><code># \u200b\u914d\u7f6e\u200b IP\n[root@test ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens33\nTYPE=Ethernet\nPROXY_METHOD=none\nBROWSER_ONLY=no\n#BOOTPROTO=dhcp\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=ens33\nUUID=c67c9f61-64d2-44ad-999a-80b9f260a775\nDEVICE=ens33\n#ONBOOT=no\n\nONBOOT=yes\nBOOTPROTO=static\nIPADDR=172.16.230.199\nNETMASK=255.255.255.0\nGATEWAY=172.16.230.2\nDNS1=223.5.5.5\nDNS2=114.114.114.114\n\n# \u200b\u91cd\u542f\u200b\u7f51\u5361\u200b\nifdown ens33\nifup ens33\n\n# nmcli \u200b\u91cd\u65b0\u200b\u52a0\u8f7d\u200b\u7f51\u5361\u200b\u914d\u7f6e\u6587\u4ef6\u200b\nnmcli connection load /etc/sysconfig/network-scripts/ifcfg-ens33\nnmcli connection up ens33\n\n# \u200b\u6216\u8005\u200b\u91cd\u65b0\u200b\u52a0\u8f7d\u200b\u6240\u6709\u200b\u7f51\u5361\u200b\u914d\u7f6e\u6587\u4ef6\u200b\nnmcli connection reload\nnmcli connection up ens33\n</code></pre>"},{"location":"linux/kylin/#_4","title":"\u4fee\u6539\u200b\u5b57\u7b26\u96c6","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u5b57\u7b26\u96c6\u200b\nlocale\n\n# \u200b\u4f7f\u7528\u200b localectl \u200b\u547d\u4ee4\u200b\u4fee\u6539\u200b\nsudo localectl set-locale LANG=en_US.UTF-8\n\n# \u200b\u6216\u8005\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b\n[root@test ~]# vim /etc/locale.conf\nLANG=en_US.UTF-8\n</code></pre>"},{"location":"linux/kylin/#_5","title":"\u4fee\u6539\u200b\u65f6\u200b\u533a","text":"<pre><code># \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u53ef\u7528\u200b\u65f6\u200b\u533a\u200b\nsudo timedatectl list-timezones\n\n# \u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u4e1c\u516b\u533a\u200b\nsudo timedatectl set-timezone Asia/Shanghai\n</code></pre>"},{"location":"linux/kylin/#_6","title":"\u65f6\u95f4\u200b\u670d\u52a1","text":"<pre><code># \u200b\u914d\u7f6e\u200b\u65f6\u95f4\u200b\u670d\u52a1\u200b\n$ sudo vim /etc/chrony.conf\nserver ntp.aliyun.com iburst\n\n# \u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\u5e76\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u81ea\u542f\u52a8\u200b\nsudo systemctl restart chronyd\nsudo systemctl enable chronyd\n\n# \u200b\u67e5\u770b\u200b\u65f6\u95f4\u200b\u662f\u5426\u200b\u540c\u6b65\u200b\u6210\u529f\u200b\uff0cIP \u200b\u524d\u9762\u200b\u5e26\u200b * \u200b\u53f7\u200b\u8868\u793a\u200b\u540c\u6b65\u200b\u6210\u529f\u200b\n[root@test ~]# chronyc sources -v\n210 Number of sources = 1\n\n  .-- Source mode  '^' = server, '=' = peer, '#' = local clock.\n / .- Source state '*' = current synced, '+' = combined , '-' = not combined,\n| /   '?' = unreachable, 'x' = time may be in error, '~' = time too variable.\n||                                                 .- xxxx [ yyyy ] +/- zzzz\n||      Reachability register (octal) -.           |  xxxx = adjusted offset,\n||      Log2(Polling interval) --.      |          |  yyyy = measured offset,\n||                                \\     |          |  zzzz = estimated error.\n||                                 |    |           \\\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^* 203.107.6.88                  2   6   177    30  -2223us[-5612us] +/-   34ms\n\n# \u200b\u624b\u5de5\u200b\u540c\u6b65\u200b\nchronyc makestep\n</code></pre>"},{"location":"linux/kylin/#_7","title":"\u5355\u7528\u6237\u200b\u6a21\u5f0f","text":"<p>\u200b\u5f00\u673a\u200b\u540e\u200b\uff0cGrub \u200b\u754c\u9762\u200b\u9009\u62e9\u200b\u5bf9\u5e94\u200b Kernel\uff0c\u200b\u6309\u200b e \u200b\u8fdb\u5165\u200b\u7f16\u8f91\u200b\u6a21\u5f0f\u200b</p> <p>\u200b\u5149\u6807\u200b\u5411\u4e0b\u200b\u79fb\u52a8\u200b\u81f3\u200b <code>linux</code> \u200b\u5f00\u5934\u200b\u7684\u200b\u884c\u200b\uff0c\u200b\u4fee\u6539\u200b <code>ro</code> \u200b\u4e3a\u200b <code>rw</code>\uff0c\u200b\u672b\u5c3e\u200b\u6dfb\u52a0\u200b <code>rd.break console=tty0</code>\uff0c\u200b\u6309\u200b <code>Ctrl X</code> \u200b\u6216\u200b <code>F10</code> \u200b\u4fdd\u5b58\u200b\u7ee7\u7eed\u200b</p> <p></p> <p>\u200b\u8f93\u5165\u200b <code>chroot /sysroot</code> \u200b\u5207\u6362\u200b\u81f3\u200b\u4e3b\u673a\u200b\u7cfb\u7edf\u200b</p> <p></p>"},{"location":"linux/kylin/#links","title":"Links","text":"<ul> <li>Kylinv10\u200b\u4f7f\u7528\u200b\u7b14\u8bb0\u200b</li> <li>\u200b\u94f6\u6cb3\u200b\u9e92\u9e9f\u200b\u9ad8\u7ea7\u200b\u670d\u52a1\u5668\u200b\u64cd\u4f5c\u7cfb\u7edf\u200bV10(sp1)\u200b\u5b89\u88c5\u200b\u624b\u518c\u200b</li> <li>\u200b\u94f6\u6cb3\u200b\u9e92\u9e9f\u200bV10\u200b\u9ad8\u7ea7\u200b\u670d\u52a1\u5668\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5fd8\u8bb0\u200broot\u200b\u5bc6\u7801\u200b(\u200b\u6062\u590d\u200b)</li> </ul>"},{"location":"linux/locale/","title":"locale","text":"<pre><code># \u200b\u6240\u6709\u200b\u8bed\u8a00\u200b\u6e05\u5355\u200b\u5728\u200b /etc/locale.gen\uff0c\u200b\u9700\u8981\u200b\u53d6\u6d88\u200b\u6ce8\u91ca\u200b\u624d\u80fd\u200b\u751f\u6548\u200b\n#en_SG ISO-8859-1\nen_US.UTF-8 UTF-8\n#en_US ISO-8859-1\n\n# \u200b\u7136\u540e\u200b\u6267\u884c\u200b\u751f\u6210\u200b locale\nlocale-gen\n\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u8bed\u8a00\u200b\nlocale\nlocalectl status\n\n# \u200b\u67e5\u770b\u200b\u652f\u6301\u200b\u7684\u200b\u8bed\u8a00\u200b\u5217\u8868\u200b\nlocale -a\nlocalectl list-locales\n\n# \u200b\u4fee\u6539\u200b\u8bed\u8a00\u200b\nlocalectl set-locale LANG=en_US.UTF-8\n\n# \u200b\u6216\u8005\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b /etc/locale.conf\nLANG=en_US.UTF-8\n\n# \u200b\u4fee\u6539\u200b\u540e\u200b\u9700\u8981\u200b\u91cd\u65b0\u200b\u767b\u5f55\u200b\u624d\u80fd\u200b\u751f\u6548\u200b\uff0c\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u65b9\u6cd5\u200b\u7acb\u5373\u200b\u751f\u6548\u200b\nunset LANG\n# RHEL7\nsource /etc/profile.d/lang.sh \n# archlinux\nsource /etc/profile.d/locale.sh\n</code></pre>"},{"location":"linux/locale/#links","title":"Links","text":"<ul> <li>https://wiki.archlinux.org/title/locale</li> </ul>"},{"location":"linux/logrotate/","title":"logrotate","text":"<pre><code># /etc/logrotate.d/applog\n/opt/logs/*.log \n/opt/logs/*/*.log \n/opt/logs/*/*/*.log \n{\n  size 20M\n  rotate 3\n  missingok\n  notifempty\n}\n\n# \u200b\u624b\u5de5\u200b\u6267\u884c\u200b\nsudo logrotate /etc/logrotate.d/applog --force --verbose\n\n# \u200b\u5e38\u7528\u200b\u53c2\u6570\u200b\n# Truncate the original log file to zero size in place after creating a copy, instead of moving the old log file and optionally creating a new one.\ncopytruncate\n</code></pre>"},{"location":"linux/logrotate/#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How To Manage Logfiles with Logrotate on Ubuntu 16.04</li> <li>https://github.com/linkyard/docker-logrotate</li> <li>A Complete Guide to Managing Log Files with Logrotate</li> </ul>"},{"location":"linux/lvm/","title":"LVM","text":""},{"location":"linux/lvm/#_1","title":"\u6dfb\u52a0\u200b\u78c1\u76d8","text":"<pre><code># \u200b\u4e0d\u200b\u91cd\u542f\u200b VM\uff0c\u200b\u5c06\u200b\u65b0\u200b\u78c1\u76d8\u200b\u52a0\u200b\u5230\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\necho \"- - -\" | tee /sys/class/scsi_host/host*/scan\n\n# \u200b\u67e5\u770b\u200b\u5757\u200b\u8bbe\u5907\u200b\nlsblk\n</code></pre>"},{"location":"linux/lvm/#_2","title":"\u5212\u5206\u200b\u5206\u533a","text":"<pre><code># \u200b\u5206\u533a\u200b\u7c7b\u578b\u200b\u9009\u62e9\u200b Linux LVM \u200b\u5373\u200b 8e\nfdisk /dev/sdb\n</code></pre>"},{"location":"linux/lvm/#pv","title":"\u521b\u5efa\u200b PV","text":"<pre><code># \u200b\u5c06\u200b 3 \u200b\u4e2a\u200b\u5206\u533a\u200b\u90fd\u200b\u521b\u5efa\u200b\u4e3a\u200b PV\npvcreate /dev/sdb{1,2,3}\n\n# \u200b\u6216\u8005\u200b\u5355\u72ec\u200b\u9010\u4e2a\u200b\u521b\u5efa\u200b\npvcreate /dev/sdb1\npvcreate /dev/sdb2\npvcreate /dev/sdb3\n\n# \u200b\u67e5\u770b\u200b\u521b\u5efa\u200b\u51fa\u6765\u200b\u7684\u200b PV\npvscan\npvdisplay\n</code></pre>"},{"location":"linux/lvm/#vg","title":"\u521b\u5efa\u200b VG","text":"<pre><code># \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b 3 \u200b\u4e2a\u200b PV \u200b\u7684\u200b VG\nvgcreate DATAVG /dev/sdb{1,2,3}\n\n# \u200b\u6216\u8005\u200b\u5148\u200b\u521b\u5efa\u200b VG \u200b\u518d\u200b\u8ffd\u52a0\u200b PV\nvgcreate DATAVG /dev/sdb1\nvgextend DATAVG /dev/sdb2\nvgextend DATAVG /dev/sdb2\n\n# \u200b\u67e5\u770b\u200b VG\nvgscan\nvgdisplay\n</code></pre>"},{"location":"linux/lvm/#lv","title":"\u5212\u5206\u200b LV","text":"<pre><code># \u200b\u6839\u636e\u200b PE \u200b\u6570\u91cf\u200b\u521b\u5efa\u200b\uff0c\u200b\u5148\u200b vgdisplay \u200b\u67e5\u770b\u200b\u5269\u4f59\u200b\u53ef\u7528\u200b PE\nlvcreate -l 6397 -n lv_data DATAVG\n\n# \u200b\u6216\u8005\u200b\u6839\u636e\u200b\u5927\u5c0f\u200b\u6765\u200b\u521b\u5efa\u200b\nlvcreate -L +25G -n lv_data DATAVG\n# \u200b\u6216\u8005\u200b\u4f7f\u7528\u200b\u6240\u6709\u200b\u5269\u4f59\u200b\u5bb9\u91cf\u200b\nlvcreate -l +100%free -n lv_data DATAVG\n\n\u200b\u9009\u9879\u200b\u4e0e\u200b\u53c2\u6570\u200b\uff1a\n-L  \uff1a\u200b\u540e\u9762\u200b\u63a5\u200b\u5bb9\u91cf\u200b\uff0c\u200b\u5bb9\u91cf\u200b\u7684\u200b\u5355\u4f4d\u200b\u53ef\u4ee5\u200b\u662f\u200b M,G,T \u200b\u7b49\u200b\uff0c\u200b\u8981\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u6700\u5c0f\u200b\u5355\u4f4d\u200b\u4e3a\u200b PE\uff0c\n      \u200b\u56e0\u6b64\u200b\u8fd9\u4e2a\u200b\u6570\u91cf\u200b\u5fc5\u987b\u200b\u8981\u662f\u200b PE \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u82e5\u200b\u4e0d\u200b\u76f8\u7b26\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u4f1a\u200b\u81ea\u884c\u200b\u8ba1\u7b97\u200b\u6700\u200b\u76f8\u8fd1\u200b\u7684\u200b\u5bb9\u91cf\u200b\u3002\n-l  \uff1a\u200b\u540e\u9762\u200b\u53ef\u4ee5\u200b\u63a5\u200b PE \u200b\u7684\u200b\u300e\u200b\u4e2a\u6570\u200b\u300f\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u6570\u91cf\u200b\u3002\u200b\u82e5\u200b\u8981\u200b\u8fd9\u4e48\u200b\u505a\u200b\uff0c\u200b\u5f97\u200b\u8981\u200b\u81ea\u884c\u200b\u8ba1\u7b97\u200b PE \u200b\u6570\u200b\u3002\n-n  \uff1a\u200b\u540e\u9762\u200b\u63a5\u200b\u7684\u200b\u5c31\u662f\u200b LV \u200b\u7684\u200b\u540d\u79f0\u200b\u5566\u200b\uff01\n\n# \u200b\u67e5\u770b\u200b LV\nlvscan\nlvdisplay\n</code></pre>"},{"location":"linux/lvm/#_3","title":"\u521b\u5efa\u200b\u6587\u4ef6\u7cfb\u7edf","text":"<pre><code># \u200b\u683c\u5f0f\u5316\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\nmkfs.xfs /dev/DATAVG/lv_data \n\n# \u200b\u6302\u8f7d\u200b\u4f7f\u7528\u200b\nmkdir /data\nmount /dev/DATAVG/lv_data /data\n\n# \u200b\u914d\u7f6e\u200b\u6210\u200b\u5f00\u673a\u200b\u81ea\u52a8\u200b\u6302\u8f7d\u200b\necho '/dev/mapper/DATAVG-lv_data /data xfs defaults 0 0' &gt;&gt; /etc/fstab\n</code></pre>"},{"location":"linux/lvm/#lv_1","title":"\u653e\u5927\u200b LV \u200b\u5bb9\u91cf","text":"<pre><code>fdisk /dev/sdc\npvcreate /dev/sdc1\nvgextend DATAVG /dev/sdc1\nlvresize -l +100%free /dev/DATAVG/lv_data\n# lvresize -l +1279 /dev/DATAVG/lv_data\n# lvresize -L +10G /dev/DATAVG/lv_data\nxfs_growfs /dev/DATAVG/lv_data\n# ext4 \u200b\u4f7f\u7528\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\n# resize2fs /dev/DATAVG/lv_data\n</code></pre>"},{"location":"linux/lvm/#lvvgpv","title":"\u5220\u9664\u200b lv\u3001vg\u3001pv","text":"<pre><code># unmount the partition\numount /data\n# Disable LVM\nlvchange -an /dev/DATAVG/lv_data\n# Delete LVM volume\nlvremove /dev/DATAVG/lv_data\n# Remove volume group\nvgremove DATAVG\n# Delete physical volumes used for volume group \u201cvg\u201d\npvremove /dev/sdb1\n</code></pre>"},{"location":"linux/lvm/#swap","title":"swap \u200b\u6269\u5bb9","text":"<pre><code>swapoff /dev/ROOTVG/lv_swap\nlvresize -l +100%free /dev/ROOTVG/lv_swap\nmkswap /dev/ROOTVG/lv_swap\nswapon /dev/ROOTVG/lv_swap\n</code></pre> <ul> <li>How can I modify the size of swap with LVM partitions?</li> </ul>"},{"location":"linux/lvm/#links","title":"Links","text":"<ul> <li>\u200b\u903b\u8f91\u200b\u5377\u8f74\u200b\u7ba1\u7406\u5458\u200b (Logical Volume Manager)</li> <li>14.2\uff1a\u200b\u908f\u8f2f\u200b\u6372\u200b\u8ef8\u200b\u7ba1\u7406\u200b\u54e1\u200b (Logical Volume Manager)</li> <li>Rescan the SCSI Bus to Add a SCSI Device Without rebooting the VM</li> <li>Extending a logical volume in a virtual machine running Red Hat or Cent OS</li> <li>Linux Quick Tip: How to Delete or Remove LVM volumes</li> </ul>"},{"location":"linux/network/","title":"\u7f51\u7edc","text":""},{"location":"linux/network/#cheetsheet","title":"CheetSheet","text":"<p>\u200b\u914d\u7f6e\u200b DNS</p> <pre><code># \u200b\u914d\u7f6e\u200b DNS \u200b\u670d\u52a1\u5668\u200b\nsudo nmcli con mod ens33 ipv4.dns \"223.5.5.5 223.6.6.6\"\n\n# \u200b\u7b49\u540c\u4e8e\u200b\u7f16\u8f91\u200b /etc/sysconfig/network-scripts/ifcfg-ens33 \nDNS1=223.5.5.5\nDNS2=223.6.6.6\n\n# Ignore automatically configured nameservers and search domains\nnmcli con mod ens33 ipv4.ignore-auto-dns yes\n\n## \u200b\u7b49\u540c\u4e8e\u200b\u7f16\u8f91\u200b /etc/sysconfig/network-scripts/ifcfg-ens33 \nPEERDNS=no\n\n# \u200b\u91cd\u542f\u200b NetworkManager\nsudo systemctl restart NetworkManager\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u9ed8\u8ba4\u200b\u7f51\u5173\u200b</p> <pre><code>$ ip route | grep default\ndefault via 192.168.88.1 dev enp60s0 proto static metric 100\n</code></pre>"},{"location":"linux/network/#links","title":"Links","text":"<ul> <li>How to manage DNS in NetworkManager via console (nmcli)?</li> <li>Linux: Create virtual network interface</li> <li>How to configure network interface bonding on RHEL 8 / CentOS 8 Linux</li> <li>\u200b\u865a\u62df\u673a\u200b\u4e0b\u9762\u200b\u5b9e\u73b0\u200b\u53cc\u7f51\u5361\u200b\u7ed1\u5b9a"},{"location":"linux/pam/","title":"PAM","text":"<pre><code># \u200b\u539f\u7406\u200b\u8bf4\u660e\u200b\n# Linux \u200b\u8fdb\u884c\u200b\u8ba4\u8bc1\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u9996\u5148\u200b\u786e\u5b9a\u200b\u8c03\u7528\u200b\u4e86\u200b\u54ea\u79cd\u200b\u670d\u52a1\u200b\u5982\u200b ssh\u3001passwd\uff0c\n# \u200b\u7136\u540e\u200b\u52a0\u8f7d\u200b /etc/pam.d/ \u200b\u4e0b\u200b\u76f8\u5e94\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\n# \u200b\u6309\u7167\u200b\u91cc\u9762\u200b\u7684\u200b\u914d\u7f6e\u200b\u5185\u5bb9\u200b\uff0c\u200b\u8c03\u7528\u200b\u76f8\u5e94\u200b\u7684\u200b /lib64/security/pam_* \u200b\u6a21\u5757\u200b\u5b8c\u6210\u200b\u9a8c\u8bc1\u200b\u3002\n\n# \u200b\u67e5\u770b\u200b pam \u200b\u7248\u672c\u200b\n$ rpm -qa | grep pam\npam-1.3.1-11.el8.x86_64\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u4e86\u200b\u54ea\u4e9b\u200b\u6a21\u5757\u200b\nrpm -ql pam | grep lib64\n# \u200b\u6216\u8005\u200b\nls -l /lib64/security/\n\n# For Ubuntu\ndpkg -L libpam-modules | grep lib\n\n# \u200b\u67e5\u770b\u200b\u670d\u52a1\u200b\u662f\u5426\u200b\u652f\u6301\u200b PAM\n$ ldd `which sshd` | grep libpam\nlibpam.so.0 =&gt; /lib64/libpam.so.0 (0x00007f9a24158000)\n\n$ ldd `which passwd` | grep libpam\nlibpam.so.0 =&gt; /lib64/libpam.so.0 (0x00007f14d5a85000)\nlibpam_misc.so.0 =&gt; /lib64/libpam_misc.so.0 (0x00007f14d5881000)\n\n# \u200b\u67e5\u770b\u200b\u6a21\u5757\u200b\u5e2e\u52a9\u200b\u6587\u6863\u200b\nman pam_cracklib\nman pam_tally2\n</code></pre>"},{"location":"linux/pam/#links","title":"Links","text":"<ul> <li>https://github.com/linux-pam/linux-pam/</li> <li>Linux Password Enforcement with PAM</li> <li>Linux Password Security with pam_cracklib</li> </ul>"},{"location":"linux/parted/","title":"parted","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5206\u533a\u200b\u4fe1\u606f\u200b\nparted /dev/sdb print\n\n# create partition table\nparted /dev/sdb mklabel gpt\n\n# \u200b\u5ffd\u7565\u200b\u63d0\u793a\u4fe1\u606f\u200b\nparted -s /dev/sdb mklabel gpt\n</code></pre>"},{"location":"linux/parted/#links","title":"Links","text":"<ul> <li>Parted</li> <li>Make parted start next partition after previous one - automatically?</li> </ul>"},{"location":"linux/pdf/","title":"PDF","text":""},{"location":"linux/pdf/#ghostscript","title":"ghostscript","text":"<p>\u200b\u5b89\u88c5\u200b</p> <pre><code>sudo apt install ghostscript\n</code></pre> <p>\u200b\u538b\u7f29\u200b</p> <pre><code># \u200b\u6309\u200b\u7535\u5b50\u4e66\u200b\u6bd4\u4f8b\u200b\u538b\u7f29\u200b\ngs -sDEVICE=pdfwrite -dCompatibilityLevel=1.0 -dPDFSETTINGS=/ebook -dNOPAUSE -dQUIET -dBATCH -sOutputFile=output.pdf input.pdf\n\n# \u200b\u81ea\u5b9a\u4e49\u200b\u5206\u8fa8\u7387\u200b\u4e3a\u200b 120 dpi\ngs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dDownsampleColorImages=true -dColorImageResolution=120 \\\n    -dNOPAUSE -dBATCH -sOutputFile=output.pdf input.pdf\n</code></pre>"},{"location":"linux/pdf/#_1","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u526a\u5207\u200b\u6587\u4ef6\u200b\n# And you can extract pages 1 - 5 of input.pdf by using the first-page and last-page flags, -f 1 -l 5,\npdfseparate -f 1 -l 5 input.pdf output-page%d.pdf\n</code></pre> <ul> <li>Split PDF document from command line in Linux?</li> </ul> <p>\u200b\u53c2\u8003\u200b</p> <ul> <li>Reduce PDF File Size in Linux</li> <li>How can I reduce the file size of a scanned PDF file?</li> <li>https://www.ilovepdf.com/</li> </ul>"},{"location":"linux/redhat/","title":"Redhat","text":"<pre><code># installing the OpenSSL 1.0 libraries on RHEL 8:\nsudo dnf install compat-openssl10\n</code></pre>"},{"location":"linux/redhat/#links","title":"Links","text":"<ul> <li>Red Hat Enterprise Linux Release Dates</li> <li>Red Hat Enterprise Linux</li> <li>https://access.redhat.com/security/security-updates/cve</li> <li>Chapter 7. Registering the System and Managing Subscriptions</li> <li>Red Hat Enterprise Linux Life Cycle</li> <li>RHEL 8.3 - Process ksmtuned - 100% CPU Usage</li> <li>ksmtuned process consuming 100% CPU for extended period of time</li> </ul>"},{"location":"linux/repo/","title":"\u642d\u5efa\u200b\u672c\u5730\u200b\u6e90","text":"<pre><code># \u200b\u521b\u5efa\u200b repo \u200b\u7d22\u5f15\u200b\n# createrepo &lt;/path/to/repo&gt;\ncreaterepo .\n\n# \u200b\u66f4\u65b0\u200b repo\n# createrepo --update &lt;/path/to/repo&gt; \ncreaterepo --update .\n</code></pre> <ul> <li>How to Create Your Own Repositories for Packages</li> </ul>"},{"location":"linux/rsync/","title":"rsync","text":"<pre><code># \u200b\u4f20\u9012\u200b\u5bc6\u7801\u200b\n# https://unix.stackexchange.com/a/626763\nrsync --password-file=&lt;(echo \"1233456\") root@1.2.3.4::abc /def\n</code></pre>"},{"location":"linux/security/","title":"Security","text":""},{"location":"linux/security/#links","title":"Links","text":"<ul> <li>RH442\u200b\u4e4b\u200b/etc/security/access.conf\u200b\u4e0e\u200btcp_wrappers</li> <li>Linux \u200b\u5982\u4f55\u200b\u8bbe\u7f6e\u200b\u5bc6\u7801\u200b\u590d\u6742\u5ea6\u200b\uff1f</li> </ul>"},{"location":"linux/selinux/","title":"selinux","text":""},{"location":"linux/selinux/#links","title":"Links","text":"<ul> <li>Disabling SELinux</li> <li>Chapter 2. Changing SELinux states and modes</li> </ul>"},{"location":"linux/shell/","title":"Shell","text":""},{"location":"linux/shell/#_1","title":"\u6280\u5de7","text":"<pre><code># \u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u5728\u200b\u5185\u5b58\u200b\u6267\u884c\u200b\nsource &lt;(curl -s http://mywebsite.example/myscript.txt)\n# \u200b\u6216\u8005\u200b\nbash &lt;(curl -s http://mywebsite.example/myscript.txt)\n\n# \u200b\u5728\u200b\u811a\u672c\u200b\u4e2d\u200b\u5207\u6362\u200b\u5230\u200b root \u200b\u6267\u884c\u200b\n[ `whoami` = root ] || exec su -c $0 root\n[ `whoami` = root ] || exec sudo su - -c $0 root\n\n# \u200b\u5f53\u200b\u7528\u6237\u200b\u4e0d\u200b\u5b58\u5728\u200b\u65f6\u624d\u200b\u6dfb\u52a0\u200b\nid -u somename &amp;&gt;/dev/null || useradd somename \n\n# \u200b\u5728\u200b\u811a\u672c\u200b\u4e2d\u200b\u5207\u6362\u200b\u7528\u6237\u200b\u89d2\u8272\u200b\n#!/usr/bin/env bash\nwhoami\n\nsudo -i -u someuser bash &lt;&lt; EOF\necho \"In\"\nwhoami\nEOF\n\necho \"Out\"\nwhoami\n\n# \u200b\u83b7\u53d6\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u8def\u5f84\u200b\nSCRIPT=$(realpath \"$0\")\nSCRIPTPATH=$(dirname \"$SCRIPT\")\n\n# \u200b\u6839\u636e\u200b\u8fdb\u7a0b\u200b\u540d\u200b\u6740\u6b7b\u200b\u8fdb\u7a0b\u200b\nps ax | grep &lt;snippet&gt; | grep -v grep | awk '{print $1}' | xargs kill -9\n</code></pre>"},{"location":"linux/shell/#tar","title":"tar","text":"<pre><code># \u200b\u5907\u4efd\u6587\u4ef6\u200b\u5217\u8868\u200b\u91cc\u9762\u200b\u7684\u200b\u6240\u6709\u200b\u5185\u5bb9\u200b\ntar -zcvf sos.tar.gz -T mylist.txt\n</code></pre>"},{"location":"linux/shell/#du","title":"du","text":"<pre><code># \u200b\u4e0d\u200b\u7edf\u8ba1\u200b\u67d0\u4e9b\u200b\u76ee\u5f55\u200b\ndu -sh --exclude='demo01' --exclude='demo02' *\n</code></pre>"},{"location":"linux/shell/#_2","title":"\u6267\u884c\u200b\u5386\u53f2\u8bb0\u5f55","text":"<pre><code># \u200b\u5c06\u200b\u7f13\u51b2\u533a\u200b\u5185\u5bb9\u200b\u62a5\u9519\u200b\u5230\u200b ~/.bash_history\nhistory -w\n\n# \u200b\u6e05\u7a7a\u200b\u7f13\u51b2\u533a\u200b\u5185\u5bb9\u200b\nhistory -c\n\n# \u200b\u663e\u793a\u200b\u65f6\u95f4\u200b\u6233\u200b\nexport HISTTIMEFORMAT='%F %T '\n\n# \u200b\u6301\u4e45\u200b\u5316\u200b\u914d\u7f6e\u200b\uff0c\u200b\u5199\u5165\u200b /etc/profile\necho \"export HISTTIMEFORMAT='%F %T '\" &gt;&gt; /etc/profile\nsource /etc/profile\n\n# \u200b\u5c06\u200b\u6240\u6709\u200b\u6267\u884c\u200b\u8fc7\u200b\u7684\u200b\u547d\u540d\u200b\u8bb0\u5f55\u200b\u5230\u200b\u6587\u4ef6\u200b\n# PROMPT_COMMAND \u200b\u73af\u5883\u53d8\u91cf\u200b\u4e2d\u200b\u8bbe\u5b9a\u200b\u7684\u200b\u5185\u5bb9\u200b\u5c06\u200b\u5728\u200b\u4ea4\u4e92\u5f0f\u200b\u811a\u672c\u200b\u7684\u200b\u63d0\u793a\u200b(PS1)\u200b\u51fa\u73b0\u200b\u4e4b\u524d\u200b\u88ab\u200b\u6267\u884c\u200b\nexport HISTORY_FILE=/var/log/audit_history.log\nexport PROMPT_COMMAND='{ date \"+%y-%m-%d %T ##### $(who am i |awk \"{print \\$1\\\" \\\"\\$2\\\" \\\"\\$5}\") #### $(pwd) #### $(history 1 | { read x cmd; echo \"$cmd\"; })\"; } &gt;&gt; $HISTORY_FILE' \n\n# \u200b\u6267\u884c\u200b shell \u200b\u65f6\u200b\u5c06\u200b\u547d\u4ee4\u200b\u8f93\u51fa\u200b\nset -o xtrace\n# or\nbash -x myscript.sh\n\n# \u200b\u4f7f\u7528\u200b grep \u200b\u627e\u51fa\u200b\u6240\u6709\u200b ip\ngrep -o '[0-9]\\{1,3\\}\\.[0-9]\\{1,3\\}\\.[0-9]\\{1,3\\}\\.[0-9]\\{1,3\\}' file.txt\n</code></pre>"},{"location":"linux/shell/#links","title":"Links","text":"<ul> <li>\u200b\u8c01\u52a8\u200b\u4e86\u200b\u6211\u200b\u7684\u200b Linux\uff1f\u200b\u539f\u6765\u200b history \u200b\u53ef\u4ee5\u200b\u8fd9\u4e48\u200b\u5f3a\u5927\u200b\uff01</li> <li>Linux \u200b\u73af\u5883\u53d8\u91cf\u200bPROMPT_COMMAND</li> <li>How can I print each command before executing?</li> <li>Why doesn't \"sudo su\" in a shell script run the rest of the script as root?</li> <li>Add a user to the system only if it doesn't exist</li> <li>How do I use su to execute the rest of the bash script as that user?</li> <li>Reliable way for a Bash script to get the full path to itself [duplicate]</li> <li>Execute bash script from URL</li> <li>Run a shell script as another user that has no password</li> <li>How do you extract IP addresses from files using a regex in a linux shell?</li> </ul>"},{"location":"linux/ssh/","title":"SSH","text":""},{"location":"linux/ssh/#_1","title":"\u4f7f\u7528","text":"<pre><code># Disable strict host key checking\nssh -o StrictHostKeyChecking=no user@remote-host \n\n# \u200b\u67e5\u770b\u200b\u5e2e\u52a9\u200b\u4fe1\u606f\u200b\nman sshd_config \n\n# \u200b\u67e5\u770b\u200b\u6240\u200b\u652f\u6301\u200b\u7684\u200b\u6240\u6709\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b\nssh -Q cipher\n\n# \u200b\u6d4b\u8bd5\u200b\u914d\u7f6e\u200b\n/usr/sbin/sshd -t\n\n# \u200b\u6253\u5370\u200b\u914d\u7f6e\u200b\n/usr/sbin/sshd -T | grep Ciphers\n\n# \u200b\u4ee5\u200b\u6307\u5b9a\u200b\u52a0\u5bc6\u200b\u65b9\u5f0f\u200b\u8fde\u63a5\u200b\nssh -c 3des-cbc localhost\nssh -c 3des-cbc -o macs=hmac-md5 bakroot02@172.31.96.102\n# \u200b\u6216\u8005\u200b\nssh &lt;user@ip&gt; -c aes256-cbc -m hmac-sha1\n\n# \u200b\u8ffd\u52a0\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b 3des-cbc \u200b\u548c\u200b hmac-md5\uff0c\u200b\u9002\u5408\u200b RHEL8/Kylin V10 \u200b\u4ee5\u4e0b\u200b\u7248\u672c\u200b\u670d\u52a1\u5668\u200b\n$ sudo vi //etc/crypto-policies/back-ends/opensshserver.config\n/usr/sbin/sshd -D -oCiphers=3des-cbc,aes256-gcm@openssh.com,... -oMACs=hmac-md5,hmac-sha2-256-etm@openssh.com,...\n\nsudo systemctl daemon-reload\nsudo systemctl restart sshd\n\n# \u200b\u8ffd\u52a0\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b 3des-cbc \u200b\u548c\u200b hmac-md5\uff0c\u200b\u9002\u5408\u200b RHEL7 \u200b\u4ee5\u4e0b\u200b\u7248\u672c\u200b\u670d\u52a1\u5668\u200b\n$ sudo vi /etc/ssh/sshd_config \nCiphers +3des-cbc\nMACs +hmac-md5\n\nsudo systemctl restart sshd\n</code></pre>"},{"location":"linux/ssh/#_2","title":"\u95ee\u9898","text":"<pre><code># WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!\nssh-keygen -R &lt;host&gt;\n\n# \u200b\u67e5\u770b\u200b OpenSSH \u200b\u652f\u6301\u200b\u54ea\u4e9b\u200b\u7b97\u6cd5\u200b\nman sshd_config \n# \u200b\u6216\u8005\u200b\nCiphers: ssh -Q cipher\nMACs: ssh -Q mac\nKexAlgorithms: ssh -Q kex\nPubkeyAcceptedKeyTypes: ssh -Q key\n\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b OpenSSH \u200b\u542f\u7528\u200b\u4e86\u200b\u54ea\u4e9b\u200b\u7b97\u6cd5\u200b\nsshd -T | grep \"\\(ciphers\\|macs\\|kexalgorithms\\)\"\n# \u200b\u6216\u8005\u200b\nnmap --script ssh2-enum-algos -sV -p 22 127.0.0.1\n\n# ssh \u200b\u53d1\u73b0\u200b\u5f88\u200b\u6162\u200b\u624d\u80fd\u200b\u767b\u5f55\u200b\n# \u200b\u53ef\u80fd\u200b\u662f\u200b DNS Server \u200b\u65e0\u6cd5\u200b\u8fde\u63a5\u200b\u6240\u81f4\u200b\uff0c\u200b\u5148\u200b\u68c0\u67e5\u200b /etc/resolv.conf\uff0c\u200b\u53ef\u200b\u4f7f\u7528\u200b dig \u200b\u6216\u8005\u200b curl \u200b\u9a8c\u8bc1\u200b\n# \u200b\u4e34\u65f6\u200b\u89e3\u51b3\u200b\n$ vim /etc/ssh/sshd_config\nUseDNS no\nsystemctl restart sshd\n</code></pre>"},{"location":"linux/ssh/#links","title":"Links","text":"<ul> <li>\u200b\u5982\u4f55\u200b\u89e3\u6c7a\u200b SSH Server \u200b\u4f7f\u7528\u200b\u4e86\u200b\u4e0d\u200b\u5b89\u5168\u200b\u7684\u200b\u52a0\u5bc6\u200b\u6f14\u7b97\u6cd5\u200b: ARCFOUR\u3001CBC\u3001HMAC-MD5\u3001HMAC-RIPEMD160</li> <li>Harden SSH in CentOS 8</li> <li>restart ssh service while users still connected</li> <li>How to disable strict host key checking in ssh?</li> <li>How can I find a list of MACs, Ciphers, and KexAlgorithms that my openssh client supports?</li> <li>How can I list MACs, Ciphers and KexAlogrithms supported by my ssh server?</li> <li>SSH Slow Login Fix</li> <li>How to fix warning about ECDSA host key</li> </ul>"},{"location":"linux/sudo/","title":"sudo","text":"<pre><code># \u200b\u53ea\u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u514d\u200b\u5bc6\u5207\u200b\u6362\u200b\u5230\u200b\u6307\u5b9a\u200b\u7528\u6237\u200b\nuser-a ALL=(user-b:user-b) NOPASSWD:ALL\n\n# \u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u540d\u200b\u5207\u6362\u200b\nsudo -u lxapp01 -i\n</code></pre>"},{"location":"linux/sudo/#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How do I allow only one user to su to another account?</li> </ul>"},{"location":"linux/systemd/","title":"Systemd","text":""},{"location":"linux/systemd/#usage","title":"Usage","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b runlevel\uff0c\u200b\u8fd8\u6709\u200b graphical.target\nsudo systemctl set-default multi-user.target\n\n# \u200b\u5207\u6362\u200b runlevel\nsudo systemctl isolate multi-user.target\n\n# 143 \u200b\u8fdb\u7a0b\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u7801\u200b\n[Service]\nSuccessExitStatus=143\n</code></pre>"},{"location":"linux/systemd/#links","title":"Links","text":"<ul> <li>How To Use Systemctl to Manage Systemd Services and Units</li> <li>How to Change Runlevels (targets) in SystemD</li> <li>What's the difference between /usr/lib/systemd/system and /etc/systemd/system?</li> <li>systemd user services and systemctl --user</li> <li>unit falling into a failed state (status=143) when stopping service</li> <li>Kafka installation with systemd</li> <li>systemd\u200b\u65f6\u4ee3\u200b\u7684\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8\u200b\u4efb\u52a1\u200b</li> </ul>"},{"location":"linux/ubuntu/","title":"Ubuntu","text":""},{"location":"linux/ubuntu/#_1","title":"\u684c\u9762\u200b\u5feb\u6377\u65b9\u5f0f","text":"<pre><code>vim ~/.local/share/applications/idea.desktop\n[Desktop Entry]\nVersion=1.0\nType=Application\nName=Idea\nIcon=/data/soft/idea-IU-241.18034.62/bin/idea.svg\nExec=/data/soft/idea-IU-241.18034.62/bin/idea.sh\n</code></pre> <ul> <li>https://askubuntu.com/a/1329039/1792429</li> </ul>"},{"location":"linux/ubuntu/#_2","title":"\u79bb\u7ebf\u200b\u5b89\u88c5\u200b\u8f6f\u4ef6","text":"<pre><code>apt install aptitude\nsudo aptitude --download-only install &lt;package-name&gt;\n# \u200b\u6216\u8005\u200b\napt-get -d install &lt;package-name&gt;\n\n# deb \u200b\u5305\u4f1a\u200b\u4e0b\u8f7d\u200b\u5230\u200b /var/cache/apt/archives \u200b\u76ee\u5f55\u200b\n# \u200b\u5c06\u200b\u5b83\u200b\u62f7\u8d1d\u5230\u200b\u79bb\u7ebf\u200b\u73af\u5883\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\u540e\u200b\u6267\u884c\u200b\ndpkg -i *.deb\n</code></pre> <ul> <li>Ubuntu\u200b\u4e2d\u200b\u4f7f\u7528\u200bapt\u200b\u4e0b\u8f7d\u200b\u79bb\u7ebf\u200b\u5305\u200b\u4ee5\u53ca\u200b\u76f8\u5173\u200b\u4f9d\u8d56\u200b\u5305\u200b</li> </ul>"},{"location":"linux/ubuntu/#_3","title":"\u5176\u4ed6","text":"<pre><code># sources.list \u200b\u53ea\u200b\u4f7f\u7528\u200b x84_64 \u200b\u6e90\u200b\ndeb [arch=amd64] http://pathtoserver/ubuntu bionic main\n</code></pre>"},{"location":"linux/ubuntu/#hotspot","title":"\u4fee\u6539\u200b HotSpot \u200b\u5bc6\u7801","text":"<pre><code>sudo nm-connection-editor\n</code></pre>"},{"location":"linux/ubuntu/#apt","title":"apt \u200b\u4f7f\u7528\u200b\u4ee3\u7406","text":"<pre><code>sudo apt -o acquire::http::proxy=\"http://127.0.0.1:1080\" install fluent-bit\n</code></pre>"},{"location":"linux/ubuntu/#ip","title":"\u4fee\u6539\u200b\u7f51\u6bb5\u200b\u548c\u200bIP","text":"<pre><code>sudo vim /etc/NetworkManager/system-connections/Hotspot\n[ipv4]\ndns-search=\nmethod=shared\naddress1=10.0.0.1/24,10.0.0.1\n\n\nsudo service network-manager restart\n</code></pre>"},{"location":"linux/ubuntu/#links","title":"Links","text":"<ul> <li>How to control IP ranges of Network Manager's hotspots?</li> <li>How to have both arch=amd64 and trusted=yes in sources.list of apt package manager?</li> </ul>"},{"location":"linux/ulimit/","title":"ulimit","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u6253\u5f00\u200b\u4e86\u200b\u591a\u5c11\u200b\u4e2a\u200b\u6587\u4ef6\u200b\n# \u200b\u7b2c\u4e00\u5217\u200b\u662f\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u6570\u91cf\u200b\uff0c\u200b\u7b2c\u4e8c\u5217\u200b\u662f\u200b\u8fdb\u7a0b\u200bid\nlsof -n | awk '{print $2}' | sort | uniq -c | sort -nr | more\n\n# \u200b\u67e5\u770b\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u9650\u5236\u200b\ncat /proc/sys/fs/file-max\n\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u7528\u6237\u200b\u7684\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u9650\u5236\u200b\nulimit -n\n\n# \u200b\u67e5\u770b\u200b\u7279\u5b9a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u8d44\u6e90\u200b\u9650\u5236\u200b\ncat /proc/&lt;pid&gt;/limits\n\n# \u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5c42\u9762\u200b\n# \u200b\u67e5\u770b\u200b\u5355\u4e2a\u200b\u8fdb\u7a0b\u200b\u6700\u5927\u200b\u53ef\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u6570\u200b\n# cat /proc/sys/fs/nr_open\n1048576\n\n# \u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u603b\u5171\u200b\u4e0d\u80fd\u200b\u8d85\u8fc7\u200b\u8be5\u503c\u200b\n# cat /proc/sys/fs/file-max\n6815744\n\n# cat /proc/sys/fs/file-nr\n# \u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b\u53e5\u67c4\u200b\u6570\u200b \u200b\u672a\u200b\u4f7f\u7528\u200b\u7684\u200b\u53e5\u67c4\u200b\u6570\u200b file-max \u200b\u503c\u200b\n22016   0   6815744\n\n# \u200b\u4fee\u6539\u200b nr_open \u200b\u548c\u200b file-max \u200b\u503c\u200b\n# vim /etc/sysctl.conf\nfs.nr_open = 10000000\nfs.file-max = 500000000\n\n# \u200b\u8fdb\u7a0b\u200b\u6216\u8005\u200b\u7528\u6237\u200b\u5c42\u9762\u200b\n# vim /etc/security/limits.conf\n# pam_limits.so \u200b\u4f1a\u200b\u8bfb\u53d6\u200b\u8be5\u200b\u914d\u7f6e\u200b\n# RLIMIT_NOFILE\n# \u200b\u8fdb\u7a0b\u200b\u53ef\u200b\u6253\u5f00\u200b\u7684\u200b\u6700\u5927\u200b\u6587\u4ef6\u200b\u6570\u200b\uff0c\u200b\u5f71\u54cd\u200bopen\u3001pipe\u3001dup\u200b\u7b49\u200b\u8c03\u7528\u200b\uff0c\u200b\u8fbe\u5230\u200b\u9650\u5236\u200b\u65f6\u4f1a\u200b\u8fd4\u56de\u200bEMFILE\u200b\u9519\u8bef\u200b\n# RLIMIT_NPROC\n# \u200b\u5b9e\u9645\u200b\u8fd0\u884c\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u7528\u6237\u200b\u6240\u200b\u80fd\u200b\u8fd0\u884c\u200b\u7684\u200b\u6700\u5927\u200b\u8fdb\u7a0b\u200b\u6570\u200b\uff08\u200b\u5728\u200blinux\u200b\u91cc\u200b\u66f4\u200b\u51c6\u786e\u200b\u7684\u200b\u8bf4\u6cd5\u200b\u662f\u200b\u7ebf\u7a0b\u200b\uff09\uff0c\u200b\u5982\u679c\u200b\u8fbe\u5230\u200b\u8fd9\u4e2a\u200b\u9650\u5236\u200b\uff0cfork\u200b\u8c03\u7528\u200b\u8fd4\u56de\u200bEAGAIN\n*    soft core 102400 # \u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8f6c\u50a8\u200b\u6587\u4ef6\u200b\u6700\u5c0f\u503c\u200b\uff0c\u200b\u5355\u4f4d\u200bkb \uff08\u200b\u786c\u200b\u9650\u5236\u200b\uff09\n*    hard core 102400 # \u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8f6c\u50a8\u200b\u6587\u4ef6\u200b\u6700\u5927\u503c\u200b\uff0c\u200b\u5355\u4f4d\u200bkb \uff08\u200b\u8f6f\u200b\u9650\u5236\u200b\uff09\nroot soft core 102400\nroot hard core 102400\n\n*    soft nofile 102400 # \u200b\u5355\u4e2a\u200b\u7a0b\u5e8f\u200b\u6253\u5f00\u200b\u7684\u200b\u6700\u5927\u200b\u6587\u4ef6\u200b\u53e5\u67c4\u200b\u6570\u200b \uff08\u200b\u8f6f\u200b\u9650\u5236\u200b\uff09\n*    hard nofile 102400 # \u200b\u5355\u4e2a\u200b\u7a0b\u5e8f\u200b\u6253\u5f00\u200b\u7684\u200b\u6700\u5927\u200b\u6587\u4ef6\u200b\u53e5\u67c4\u200b\u6570\u200b \uff08\u200b\u786c\u200b\u9650\u5236\u200b\uff09\nroot soft nofile 102400\nroot hard nofile 102400\n\n*    soft nproc unlimited # \u200b\u5355\u4e2a\u200b\u7a0b\u5e8f\u200b\u521b\u5efa\u200b\u7684\u200b\u6700\u5927\u200b\u7ebf\u7a0b\u200b\u6570\u200b \uff08\u200b\u8f6f\u200b\u9650\u5236\u200b\uff09\n*    hard nproc unlimited # \u200b\u5355\u4e2a\u200b\u7a0b\u5e8f\u200b\u521b\u5efa\u200b\u7684\u200b\u6700\u5927\u200b\u7ebf\u7a0b\u200b\u6570\u200b \uff08\u200b\u786c\u200b\u9650\u5236\u200b\uff09\nroot soft nproc unlimited\nroot hard nproc unlimited\n\n\n\n# \u200b\u5f53\u200b\u4f7f\u7528\u200b systemd \u200b\u7ba1\u7406\u200b\u670d\u52a1\u200b\u65f6\u200b\n# vim /etc/systemd/system.conf\nDefaultLimitCORE=102400:102400\nDefaultLimitNOFILE=102400:102400\nDefaultLimitNPROC=infinity:infinity\n\n\n# \u200b\u67e5\u770b\u200b multi-user \u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u7684\u200b\u670d\u52a1\u200b\nls /etc/systemd/system/multi-user.target.wants/\nls /etc/systemd/system/graphical.target.wants/\n</code></pre>"},{"location":"linux/ulimit/#links","title":"Links","text":"<ul> <li>Linux ulimit</li> <li>Are limits.conf values applied on a per-process basis?</li> <li>https://docs.kernel.org/admin-guide/sysctl/fs.html#id6</li> <li>systemd user instances</li> <li>systemd/User</li> <li>Linux\u200b\u4e0b\u200b\u7684\u200bresource limits(ulimit)</li> </ul>"},{"location":"linux/user/","title":"\u7528\u6237","text":""},{"location":"linux/user/#_2","title":"\u65b0\u589e\u200b\u548c\u200b\u5220\u9664","text":"<pre><code># \u200b\u6dfb\u52a0\u200b\u7528\u6237\u200b\nuseradd user01 &amp;&amp; echo PASSWORD | passwd --stdin user01\n\n# \u200b\u5206\u79bb\u200b\u6b65\u9aa4\u200b\nuseradd user01\npasswd user01\n\nuserdel user01\n\n# \u200b\u8fde\u540c\u200b\u5bb6\u200b\u76ee\u5f55\u200b\u4e00\u8d77\u200b\u5220\u9664\u200b\n# userdel -r user01\n</code></pre>"},{"location":"linux/user/#_3","title":"\u4fee\u6539\u200b\u7528\u6237\u7ec4","text":"<p>\u200b\u5c06\u200b\u7528\u6237\u200b\u52a0\u5165\u200b\u7ec4\u200b</p> <pre><code>sudo usermod -aG aisuhua docker\n</code></pre> <p>\u200b\u5c06\u200b\u7528\u6237\u200b\u4ece\u200b\u7ec4\u91cc\u200b\u5254\u9664\u200b</p> <pre><code>sudo gpasswd -d aisuhua docker\n</code></pre> <ul> <li>How to remove a user from a group?</li> </ul>"},{"location":"linux/vim/","title":"VIM","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u4e00\u4e2a\u200btab\u200b\u7b49\u4e8e\u200b4\u200b\u4e2a\u200b\u7a7a\u683c\u200b\n# vim /etc/vimrc\nset tabstop=4\nset shiftwidth=4\nset autoindent\nset expandtab\nset softtabstop=0\n\n# \u200b\u7f16\u8f91\u200b\u65f6\u200b\u51fa\u73b0\u200b1H\u200b\u5947\u602a\u200b\u5b57\u7b26\u200b\nexport LANG=en.UTF-8\n\n# \u200b\u6dfb\u52a0\u200b\u591a\u884c\u200b\u6ce8\u91ca\u200b\nCtrl + v\nI\n# \nESC\n\n# \u200b\u53d6\u6d88\u200b\u6ce8\u91ca\u200b\nCtrl + v \nDelete\n</code></pre>"},{"location":"linux/vim/#_1","title":"\u663e\u793a\u200b\u6587\u4ef6\u540d","text":"<pre><code>:echo @% \n</code></pre> <ul> <li>https://vi.stackexchange.com/a/1885</li> </ul>"},{"location":"linux/vnc/","title":"VNC","text":"<pre><code># \u200b\u5b89\u88c5\u200b\nyum install tigervnc-server\n\n# \u200b\u542f\u52a8\u200b\uff0c\u200b\u5207\u6362\u200b\u5230\u200b\u9700\u200b\u8fdc\u7a0b\u200b\u7684\u200b\u666e\u901a\u7528\u6237\u200b\nsudo su - suhua\n\n# \u200b\u8bbe\u7f6e\u200b\u5bc6\u7801\u200b\nvncpasswd\n\n# \u200b\u542f\u52a8\u200b\u7b2c\u4e00\u4e2a\u200b\u4f1a\u8bdd\u200b\uff0c\u200b\u7aef\u53e3\u200b 5901\nvncserver :1\n\n# \u200b\u542f\u52a8\u200b\u591a\u200b\u4e00\u4e2a\u200b\u4f1a\u8bdd\u200b\uff0c\u200b\u7aef\u53e3\u200b 5902\nvncserver :2\n\n# \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u4f1a\u8bdd\u200b\nvncserver -list\n\n# \u200b\u5173\u95ed\u200b\u4f1a\u8bdd\u200b\nvncserver -kill :2\n</code></pre>"},{"location":"linux/vnc/#links","title":"Links","text":"<ul> <li>\u200b\u9e92\u9e9f\u200bV10-server-sp1-sp2-sp3\u200b\u5173\u4e8e\u200bvncserver\u200b\u5b89\u88c5\u200b\u53ca\u200b\u4f7f\u7528\u200b</li> <li>TigerVNC \u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u7aef\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b</li> </ul>"},{"location":"linux/vsftpd/","title":"vsftpd","text":"<ul> <li>https://github.com/dagwieers/vsftpd/tree/master/EXAMPLE/VIRTUAL_USERS</li> </ul>"},{"location":"linux/yum/","title":"yum","text":""},{"location":"linux/yum/#cheetsheet","title":"cheetsheet","text":"<pre><code># \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u66f4\u65b0\u200b\u8bb0\u5f55\u200b\nyum history list\n\nyum history info &lt;ID&gt;\n\n# \u200b\u641c\u7d22\u200b\u8f6f\u4ef6\u200b\nyum search nginx\n\n# \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u7248\u672c\u200b\nyum list nginx --showduplicates\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u7684\u200b\u6240\u6709\u200b\u8f6f\u4ef6\u200b\nyum list installed\n\n# \u200b\u6216\u8005\u200b\nrpm -qa\n\n# \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u662f\u5426\u200b\u5df2\u200b\u5b89\u88c5\u200b\nrpm -q nginx\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\nrpm -ql nginx\nrepoquery -l nginx\ndnf repoquery -l time\n\n# \u200b\u67e5\u770b\u200b\u67d0\u4e2a\u200b\u6587\u4ef6\u200b\u5c5e\u4e8e\u200b\u54ea\u4e2a\u200b\u5b89\u88c5\u5305\u200b\nrpm -qf /etc/pki/tls/certs/ca-bundle.crt\n\n# disable gpg signature checking\nrpm install --nogpgcheck\n\n# \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u5b89\u88c5\u65f6\u95f4\u200b\nrpm -qa --last rsyslog\n</code></pre>"},{"location":"linux/yum/#_1","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"linux/yum/#rpm-hang","title":"\u6267\u884c\u200b rpm \u200b\u547d\u4ee4\u200b\u540e\u200b\u4e00\u76f4\u200b hang \u200b\u4f4f","text":"<pre><code># Stop the install command and rebuild your rpm database.\nrm /var/lib/rpm/__db*\n\n# \u200b\u91cd\u5efa\u200b db\nrpm --rebuilddb\n\n# \u200b\u5347\u7ea7\u200b\u548c\u200b\u964d\u7ea7\u200b\nyum update vsftpd\nyum downgrade vsftpd-2.0.5-12.el5\n\nyum install screen\nyum history\nyum history undo 8\n</code></pre>"},{"location":"linux/yum/#links","title":"Links","text":"<ul> <li>RPM command hangs</li> <li>How to check what package was updated using yum history?</li> <li>How to use yum/dnf to downgrade or rollback some package updates?</li> <li>How to use yum history to roll back an update in Red Hat Enterprise Linux?</li> <li>https://rpm.pkgs.org/packages/google-chrome-x86_64/</li> </ul>"},{"location":"linux/%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A%E6%80%A7%E6%A3%80%E6%9F%A5/","title":"\u7f51\u7edc\u200b\u8fde\u901a\u6027\u200b\u68c0\u67e5","text":""},{"location":"linux/%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A%E6%80%A7%E6%A3%80%E6%9F%A5/#nc","title":"nc","text":"<p>\u200b\u8bed\u6cd5\u200b</p> <pre><code>nc -zv &lt;ip&gt; &lt;port&gt;\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b</p> <pre><code>$ nc -zv 127.0.0.1 80\nConnection to 127.0.0.1 80 port [tcp/http] succeeded!\n\n$ nc -zv 127.0.0.1 90\nnc: connect to 127.0.0.1 port 90 (tcp) failed: Connection refused\n</code></pre>"},{"location":"linux/%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A%E6%80%A7%E6%A3%80%E6%9F%A5/#telnet","title":"telnet","text":"<p>\u200b\u8bed\u6cd5\u200b</p> <pre><code>telnet &lt;ip&gt; &lt;port&gt;\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b</p> <pre><code>$ telnet 127.0.0.1 80\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\n^CConnection closed by foreign host.\n\n$ telnet 127.0.0.1 90\nTrying 127.0.0.1...\ntelnet: Unable to connect to remote host: Connection refused\n</code></pre>"},{"location":"linux/%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A%E6%80%A7%E6%A3%80%E6%9F%A5/#links","title":"Links","text":"<ul> <li>Check if port is open or closed on a Linux server?</li> </ul>"},{"location":"linux/alpine/","title":"Alpine","text":""},{"location":"linux/alpine/#_1","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u8fd0\u884c\u200b Golang \u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\napk add gcompat\n</code></pre>"},{"location":"linux/command/ab/","title":"ab","text":"<p>\u200b\u538b\u529b\u200b\u6d4b\u8bd5\u200b</p>"},{"location":"linux/command/ab/#_1","title":"\u4f7f\u7528","text":"<pre><code>$ ab -n 100 -c 10 http://13.209.21.196:8080/trade-server/test/order/testQueue\n\n-n 100\u200b\u8868\u793a\u200b\u8bf7\u6c42\u200b\u603b\u6570\u200b\u4e3a\u200b100\n-c 10\u200b\u8868\u793a\u200b\u5e76\u53d1\u200b\u7528\u6237\u6570\u200b\u4e3a\u200b10\nhttp://13.209.21.196:8080/trade-server/test/order/testQueue\u200b\u8868\u793a\u200b\u8bf7\u6c42\u200b\u7684\u200b\u76ee\u6807\u200bURL\n</code></pre> <ul> <li>\u200b\u7f51\u7ad9\u200b\u6027\u80fd\u200b\u538b\u529b\u200b\u6d4b\u8bd5\u5de5\u5177\u200b--apache ab\u200b\u4f7f\u7528\u200b\u8be6\u89e3\u200b</li> </ul>"},{"location":"linux/command/awk/","title":"awk","text":"<pre><code># \u200b\u5206\u5272\u200b\u5185\u5bb9\u200b\u53d6\u200b\u5176\u4e2d\u200b\u4e00\u90e8\u5206\u200b\n$ uname -a\nLinux g7-7588 5.4.0-150-generic #167~18.04.1-Ubuntu SMP Wed May 24 00:51:42 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux\n$ uname -a | awk '{print $3}'\n5.4.0-150-generic\n$ uname -a | awk '{print $3}' | awk -F '-' '{print $1}'\n5.4.0\n$ uname -a | awk '{print $3}' | awk -F '-150-' '{print $1}'\n5.4.0\n\n# \u200b\u4ee5\u200b\u9017\u53f7\u200b\u5206\u5272\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\uff0c\u200b\u7c7b\u4f3c\u200b csv \u200b\u683c\u5f0f\u200b\nawk -F, '{OFS=\",\";print $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$20,$21,$22,$23,$24,$25,$30,$33}' infile.csv &gt; outfile.csv\n\n# \u200b\u4ee5\u200b\u53cc\u5f15\u53f7\u200b\u62ec\u200b\u8d77\u6765\u200b\u6bcf\u4e2a\u200b\u5b57\u200b\u6bb5\u503c\u200b\ncat xferlog* | awk '{OFS=\"\\\",\\\"\";print $1\" \"$2\" \"$3\" \"$4\" \"$5,$7,$9,$14}' | awk '{printf \"\\\"%s\\\", \\n\", $0}' \n\n# \u200b\u5b57\u7b26\u4e32\u200b\u9996\u5c3e\u200b\u52a0\u4e0a\u200b\u53cc\u5f15\u53f7\u200b\nawk '{ printf \"\\\"%s\\\",\\n\", $0 }' file\n</code></pre>"},{"location":"linux/command/awk/#links","title":"Links","text":"<ul> <li>How to add double quotes to every line and then add a comma at the end of the line?</li> <li>Add double quotes around fields in AWK script output?</li> </ul>"},{"location":"linux/command/chage/","title":"chage","text":"<pre><code># To lock the account:\nchage -E 0 username\n\n# To unlock the account:\nchage -E -1 username\n\n# \u200b\u67e5\u770b\u200b\u8d26\u53f7\u200b\u72b6\u6001\u200b\nchage -l username\n</code></pre>"},{"location":"linux/command/chage/#links","title":"links","text":"<ul> <li>How do I completely disable an account?</li> </ul>"},{"location":"linux/command/crontab/","title":"crontab","text":"<pre><code># \u200b\u6dfb\u52a0\u200b\u4e00\u6761\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\n(crontab -u suhua -l ; echo \"*/5 * * * * perl /home/mobman/test.pl\") | crontab -u suhua -\n\n# \u200b\u5220\u9664\u200b\u4e00\u6761\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\ncrontab -u suhua -l | grep -v 'perl /home/mobman/test.pl'  | crontab -u suhua -\n</code></pre>"},{"location":"linux/command/crontab/#links","title":"Links","text":"<ul> <li>How to remove or delete single cron job using linux command?</li> </ul>"},{"location":"linux/command/curl/","title":"curl","text":"<pre><code>curl --resolve www.aaa.com:443:22.145.31.245 https://www.aaa.com -kv\ncurl -H \"Host: www.aaa.com\" https://22.145.31.245\n</code></pre>"},{"location":"linux/command/date/","title":"date","text":"<pre><code># 2024-11-01 10:20:20\ndate '+%Y-%m-%d %H:%M:%S'\n\n# ISO8601 2024-01-30T09:11:04+0800\ndate '+%Y-%m-%dT%H:%M:%S%z'\n</code></pre>"},{"location":"linux/command/du/","title":"du","text":"<pre><code># \u200b\u5bf9\u200b\u7edf\u8ba1\u200b\u7ed3\u679c\u200b\u7684\u200b\u5927\u5c0f\u200b\u8fdb\u884c\u200b\u6392\u5e8f\u200b\ndu -sh * | sort -h\n\n# \u200b\u4e00\u5929\u200b\u5185\u200b\u4fee\u6539\u200b\u8fc7\u200b\u7684\u200b\u6587\u4ef6\u200b\u603b\u200b\u5927\u5c0f\u200b\nfind /opt/www -type f -mtime -1 -exec du -ch {} + | grep total$\n</code></pre>"},{"location":"linux/command/find/","title":"find","text":"<pre><code># \u200b\u67e5\u627e\u200b 5 \u200b\u5206\u949f\u200b\u5185\u200b\u4fee\u6539\u200b\u8fc7\u200b\u7684\u200b\u6587\u4ef6\u200b\u5e76\u200b\u6392\u5e8f\u200b\nfind /etc/ -mmin -5 -printf '%TY-%Tm-%Td %TT %p\\n' | sort\n\n# \u200b\u53ea\u200b\u5217\u51fa\u200b\u6587\u4ef6\u540d\u200b\nfind ./  -printf \"%f\\n\"\n</code></pre>"},{"location":"linux/command/grep/","title":"grep","text":"<p>```sh</p>"},{"location":"linux/command/grep/#_1","title":"\u5ffd\u7565\u200b\u6ce8\u91ca\u200b\u548c\u200b\u7a7a\u884c","text":"<p>grep -v '#' filebeat.yml | grep -v '^$'</p>"},{"location":"linux/command/grep/#_2","title":"\u4f7f\u7528\u200b $ \u200b\u53c2\u6570","text":"<p>echo 192.168.1. | xargs -I{} grep {} *.txt ```\u2018</p>"},{"location":"linux/command/grep/#links","title":"Links","text":"<ul> <li>Make xargs pass as first parameter</li> </ul>"},{"location":"linux/command/htpasswd/","title":"htpasswd","text":""},{"location":"linux/command/htpasswd/#_1","title":"\u5b89\u88c5","text":"<pre><code># Ubuntu\nsudo apt install apache2-utils\n\n# Redhat\nsudo yum install httpd-tools\n</code></pre>"},{"location":"linux/command/htpasswd/#_2","title":"\u65b0\u5efa\u200b\u7528\u6237","text":"<pre><code>htpasswd -c /path/to/.htpasswd aisuhua\n</code></pre>"},{"location":"linux/command/htpasswd/#_3","title":"\u8ffd\u52a0\u200b\u7528\u6237","text":"<pre><code>htpasswd /path/to/.htpasswd lala\n</code></pre>"},{"location":"linux/command/htpasswd/#ref","title":"ref","text":"<ul> <li>How to Create and Use .htpasswd</li> </ul>"},{"location":"linux/command/info/","title":"Info","text":"<pre><code># \u200b\u67e5\u770b\u200b\u670d\u52a1\u5668\u200b\u67b6\u6784\u200b x86_64\nuname -m\n\n# \u200b\u67e5\u770b\u200b\u662f\u200b 64 \u200b\u4f4d\u200b\u8fd8\u662f\u200b 32 \u200b\u4f4d\u200b Linux \u200b\u5185\u6838\u200b\ngetconf LONG_BIT\n\n# \u200b\u67e5\u770b\u200b CPU \u200b\u662f\u200b 32 \u200b\u4f4d\u200b\u8fd8\u662f\u200b  64 \u200b\u4f4d\u200b\uff0c\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u6709\u200b 1m \u200b\u8868\u793a\u200b\u662f\u200b 64 \u200b\u4f4d\u200b\ngrep -o -w 'lm' /proc/cpuinfo | sort -u\n</code></pre>"},{"location":"linux/command/ip/","title":"IP","text":"<pre><code># \u200b\u67e5\u770b\u200b\u6240\u6709\u200b IP \u200b\u5730\u5740\u200b\nip -4 -o addr | awk '!/^[0-9]*: ?lo|link\\/ether/ {print $2\" \"$4}'\n</code></pre>"},{"location":"linux/command/ip/#links","title":"Links","text":"<ul> <li>Bash script to get all IP addresses</li> </ul>"},{"location":"linux/command/kill/","title":"kill","text":"<pre><code>ps -aux | grep nginx | awk '{print $2}' | xargs kill -9 $1\n</code></pre>"},{"location":"linux/command/memory/","title":"Memory","text":"<pre><code># \u200b\u7edf\u8ba1\u200b\u5185\u5b58\u200b\u4f7f\u7528\u7387\u200b\nfree | grep Mem | awk '{print $3/$2 * 100.0}'\n\n# \u200b\u53d6\u200b\u6574\u6570\u200b\nfree | grep Mem | awk '{ printf(\"%d\", $3/$2 * 100.0) }'\n</code></pre>"},{"location":"linux/command/memory/#_1","title":"\u53c2\u8003","text":"<ol> <li>How to get the percentage of memory free with a Linux command?</li> </ol>"},{"location":"linux/command/mktemp/","title":"mktemp","text":"<pre><code># \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u4e34\u65f6\u6587\u4ef6\u200b\uff0c\u200b\u5982\u200b\uff1a/tmp/tmp.Uig45dNXN8\nmktemp\n\n# \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5982\u200b\uff1a/tmp/tmp.pqNKRl3vck\nmktemp -d\n</code></pre>"},{"location":"linux/command/nmcli/","title":"nmcli","text":"<pre><code>#  bond4\nnmcli connection add type bond con-name bond0 ifname bond0 bond.options \"mode=802.3ad\"\n\n# bond1\nnmcli connection add con-name bond0 ifname bond0 type bond mode active-backup\n\n# 7 \u200b\u79cd\u200b bond \u200b\u6a21\u5f0f\u200b\n# Requires static EtherChannel enabled, not Link Aggregation Control Protocol (LACP)-negotiated.\n0 - balance-rr \n# No configuration required on the switch.\n1 - active-backup \n# Requires static EtherChannel enabled, not LACP-negotiated.\n2 - balance-xor\n# Requires static EtherChannel enabled, not LACP-negotiated.\n3 - broadcast\n# Requires LACP-negotiated EtherChannel enabled.\n4 - 802.3ad\n# No configuration required on the switch.\n5 - balance-tlb\n# No configuration required on the switch.\n6 - balance-alb\n</code></pre>"},{"location":"linux/command/nmcli/#links","title":"links","text":"<ul> <li>3.2. Upstream switch configuration depending on the bonding modes</li> <li>bond4 \u200b\u94fe\u8def\u200b\u805a\u5408\u200b</li> </ul>"},{"location":"linux/command/ps/","title":"ps","text":""},{"location":"linux/command/ps/#_1","title":"\u67e5\u770b\u200b\u72b6\u6001","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5185\u5b58\u200b\u4f7f\u7528\u200b\u60c5\u51b5\u200b\nps aux | grep -v PID | sort -rn -k 4 | head\n</code></pre>"},{"location":"linux/command/ps/#_2","title":"\u5224\u65ad\u200b\u8fdb\u7a0b\u200b\u662f\u5426\u200b\u5b58\u5728","text":"<pre><code>command=\"httpd\"\nrunning=`ps ax | grep -v grep | grep $command | wc -l`\nif [ $running -gt 0 ]; then\n    echo \"Command is running\"\nelse\n    echo \"Command is not running\"\nfi\n</code></pre> <ul> <li>Linux/Unix command to determine if process is running?</li> </ul>"},{"location":"linux/command/sed/","title":"sed","text":"<pre><code># \u200b\u66ff\u6362\u200b\u5b57\u7b26\u4e32\u200b\nsed 's/r\"LVM version:.*\"/\"xxx\"/g' hello\n\n# \u200b\u4fee\u6539\u200b\u539f\u6587\u4ef6\u200b\u524d\u200b\u5907\u4efd\u6587\u4ef6\u200b\nsed -i.bak ... /etc/login.defs\n\n# \u200b\u5907\u4efd\u6587\u4ef6\u200b\u6dfb\u52a0\u200b\u65e5\u671f\u200b\nNOW=$(date \"+%Y%m%d%H%M%S\")\nsed -i.${NOW} ... /etc/login.defs\n</code></pre>"},{"location":"linux/command/stat/","title":"stat","text":""},{"location":"linux/command/stat/#cpu","title":"CPU","text":"<pre><code># \u200b\u67e5\u770b\u200b CPU \u200b\u6838\u5fc3\u200b\u6570\u200b\uff0cSocket \u200b\u7269\u7406\u200b\u5185\u6838\u200b\u3001Core \u200b\u5355\u6838\u200b\u6838\u5fc3\u200b\u6570\u200b\uff0cThread \u200b\u5355\u6838\u5fc3\u200b\u7ebf\u7a0b\u200b\u6570\u200b\n# lscpu | grep -E '^Thread|^Core|^Socket|^CPU\\('\nCPU(s):              128\nThread(s) per core:  2\nCore(s) per socket:  16\nSocket(s):           4\n</code></pre>"},{"location":"linux/command/stat/#_1","title":"\u53c2\u8003","text":"<ul> <li>What is the meaning of CPU and core in Kubernetes?</li> </ul>"},{"location":"linux/command/tee/","title":"tee","text":"<pre><code># \u200b\u540c\u65f6\u200b\u8f93\u51fa\u200b\u5230\u200b\u6587\u4ef6\u200b \nls -a | tee output.file\n\n# \u200b\u5c06\u200b\u9519\u8bef\u4fe1\u606f\u200b\u4e5f\u200b\u540c\u65f6\u200b\u8f93\u51fa\u200b\u5230\u200b\u6587\u4ef6\u200b\nprogram [arguments...] 2&gt;&amp;1 | tee outfile\n</code></pre>"},{"location":"linux/command/tee/#links","title":"Links","text":"<ul> <li>How to redirect output to a file and stdout</li> </ul>"},{"location":"linux/command/top/","title":"top","text":"<pre><code># \u200b\u628a\u200b\u5185\u5bb9\u200b\u8f93\u51fa\u200b\u5230\u200b\u6587\u4ef6\u200b\ntop -bn1 &gt; output.txt\n\n# \u200b\u67e5\u770b\u200b\u786c\u76d8\u200b\u5e8f\u5217\u53f7\u200b\nlsblk --nodeps -o name,serial\n# \u200b\u6216\u8005\u200b \nsudo lshw -class disk\n</code></pre>"},{"location":"linux/command/top/#link","title":"link","text":"<ul> <li>Is there a way to get \"top\" to run exactly once and exit?</li> <li>Harddisk serial number from terminal?</li> <li>How to Find a Hard Disk Serial Number in Linux</li> </ul>"},{"location":"linux/command/tshark/","title":"tshark","text":"<ul> <li>Decrypt TLS encrypted HTTP traffic for debugging</li> </ul>"},{"location":"linux/command/wget/","title":"wget","text":"<pre><code># \u200b\u4e0b\u8f7d\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\nwget -r -np -nH -R index.html -R index.html.tmp https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/\nwget -r -np -nH -R index.html -R index.html.tmp https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/x86_64/\n\nwget -r -np -R \"index.html*\" http://example.com/configs/.vim/\n</code></pre>"},{"location":"linux/command/wget/#links","title":"Links","text":"<ul> <li>Using wget to recursively fetch a directory with arbitrary files in it</li> </ul>"},{"location":"linux/init/","title":"\u64cd\u4f5c\u7cfb\u7edf\u200b\u521d\u59cb\u5316","text":""},{"location":"linux/init/#_2","title":"\u4fee\u6539\u200b\u4e3b\u673a\u540d","text":"<pre><code># rhel5/6\n# \u200b\u9a6c\u4e0a\u200b\u751f\u6548\u200b\uff08\u200b\u91cd\u542f\u200b\u540e\u200b\u65e0\u6548\u200b\uff09\nhostname server\n# /etc/sysconfig/network\nHOSTNAME=server\n# /etc/hosts\n127.0.0.1 server\n\n# rhel7/8\u3001Kylin V7/V10\nhostnamectl set-hostname server\n# /etc/hosts\n127.0.0.1 server\n</code></pre>"},{"location":"linux/init/#_3","title":"\u955c\u50cf\u200b\u6e90","text":"<pre><code># \u200b\u5185\u5bb9\u200b\u8be6\u89c1\u200b repo/\n\n# Kylin V10\n/etc/yum.repos.d/kylin_x86_64.repo\n\n# Kylin V7update6\n/etc/yum.repos.d/kns7-adv.repo\n\n# RedHat\n/etc/yum.repos.d/redhat.repo\n</code></pre>"},{"location":"linux/init/#_4","title":"\u5b89\u88c5\u200b\u8f6f\u4ef6","text":"<pre><code>yum -y install telnet\nyum -y install net-tools\nyum -y install nc\nyum -y install unzip\nyum -y install ftp\nyum -y install bc\nyum -y install lrzsz\nyum -y install chrony\nyum -y install traceroute\nyum -y install tar\nyum -y install vim\nyum -y java\n</code></pre>"},{"location":"linux/init/#_5","title":"\u9632\u706b\u5899","text":"<pre><code># Flush the selected chain (all the chains in the table if none is given). This is equivalent to deleting all the rules one by one.\niptables -F\n\n# Delete the optional user-defined chain specified.\niptables -X\n\n# \u200b\u5165\u200b\u6d41\u91cf\u200b\u9ed8\u8ba4\u200b\u7981\u6b62\u200b\niptables -P INPUT DROP\n\n# \u200b\u51fa\u53bb\u200b\u6d41\u91cf\u200b\u9ed8\u8ba4\u200b\u5141\u8bb8\u200b\niptables -P OUTPUT ACCEPT\n\n# \u200b\u5141\u8bb8\u200b\u672c\u200b\u673a\u200b\u8bbf\u95ee\u200b\niptables -A INPUT -s 127.0.0.1 -j ACCEPT\n# \u200b\u6216\u8005\u200b\niptables -A INPUT -i lo -j ACCEPT\n# \u200b\u63a5\u53d7\u200b ping\niptables -A INPUT -p icmp -j ACCEPT\n# ??\niptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\n# \u200b\u653e\u5f00\u200b\u5e38\u7528\u200b\u7aef\u53e3\u200b\niptables -A INPUT -p tcp --dport 80 -j ACCEPT\niptables -A INPUT -p tcp --dport 443 -j ACCEPT\n# \u200b\u6574\u6bb5\u200b\u653e\u5f00\u200b\niptables -A INPUT -s 21.144.204.0/24 -j ACCEPT\n# \u200b\u6216\u8005\u200b\u6574\u6bb5\u200b\u653e\u5f00\u200b\uff0c\u200b\u9664\u4e86\u200b 22 \u200b\u7aef\u53e3\u200b\u4e0d\u80fd\u200b\u8bbf\u95ee\u200b\u5916\u200b\niptables -A INPUT -p tcp -s 21.144.204.0/24 ! --dport 22 -j ACCEPT\n# \u200b\u5141\u8bb8\u200b\u8bbf\u95ee\u200b\u7279\u5b9a\u200b\u534f\u8bae\u200b\u7279\u5b9a\u200b\u7aef\u53e3\u200b\niptables -A INPUT -s 21.144.204.2/32 -p tcp --dport 10001 -j ACCEPT\n# \u200b\u5141\u8bb8\u200b\u7279\u5b9a\u200b\u7ec8\u7aef\u200b\u8bbf\u95ee\u200b\niptables -A INPUT -s 21.144.226.2/24 -j ACCEPT\n\n# \u200b\u6301\u4e45\u200b\u5316\u200b\u4fdd\u5b58\u200b iptables \u200b\u89c4\u5219\u200b\niptables-save &gt; /etc/sysconfig/iptables\n# \u200b\u6216\u8005\u200b\u6267\u884c\u200b\uff0c\u200b\u53ea\u6709\u200b\u5728\u200b\u5b89\u88c5\u200b\u4e86\u200b iptables-service \u200b\u670d\u52a1\u200b\u547d\u4ee4\u200b\u624d\u200b\u6709\u6548\u200b\nservice iptables save\n# \u200b\u542f\u52a8\u200b iptables-service \u200b\u670d\u52a1\u200b\nsystemctl start iptables.service --now\n</code></pre>"},{"location":"linux/init/#_6","title":"\u521b\u5efa\u200b\u7528\u6237","text":"<pre><code># \u200b\u65b0\u589e\u200b\u7528\u6237\u200b\nuseradd bakroot01; echo PASSWORD | passwd --stdin bakroot01\nuseradd bakroot; echo PASSWORD | passwd --stdin bakroot\nuseradd bakroot02; echo PASSWORD | passwd --stdin bakroot02\nuseradd lxchk; echo PASSWORD | passwd --stdin lxchk\nuseradd lxapp01; echo PASSWORD | passwd --stdin lxapp01\n\n# \u200b\u5141\u8bb8\u200b\u514d\u200b\u5bc6\u5207\u200b\u6362\u200b\u5230\u200b root\necho \"bakroot   ALL=(ALL)       NOPASSWD: ALL\" &gt;&gt; /etc/sudoers\necho \"bakroot01   ALL=(ALL)       NOPASSWD: ALL\" &gt;&gt; /etc/sudoers\necho \"bakroot02   ALL=(ALL)       NOPASSWD: ALL\" &gt;&gt; /etc/sudoers\n</code></pre>"},{"location":"linux/init/#_7","title":"\u64cd\u4f5c\u200b\u8bb0\u5f55","text":"<pre><code># \u200b\u9ed8\u8ba4\u200b\u683c\u5f0f\u200b\n# history\n57  reboot\n58  ip a\n59  ls\n\n# \u200b\u5e26\u200b\u65f6\u95f4\u200b\u683c\u5f0f\u200b\n# HISTTIMEFORMAT=\"%F %T: \"\n# history\n57  2024-03-12 13:00:21: reboot\n58  2024-03-12 13:00:27: ip a\n59  2024-03-12 13:00:45: ls\n\n# \u200b\u5176\u4ed6\u200b\u53e6\u7c7b\u200b\u683c\u5f0f\u200b\n# HISTTIMEFORMAT=\"`who am i |xargs -x echo` || \"\n# history\n57  root pts/0 2024-03-12 13:00 (172.31.96.1) || reboot\n58  root pts/0 2024-03-12 13:00 (172.31.96.1) || ip a\n59  root pts/0 2024-03-12 13:00 (172.31.96.1) || ls\n</code></pre>"},{"location":"linux/init/#_8","title":"\u5173\u95ed\u200b\u5b89\u5168\u200b\u8bbe\u7f6e","text":"<pre><code># \u200b\u5173\u95ed\u200b\u9632\u706b\u5899\u200b\nsystemctl disable firewalld --now\n\n# \u200b\u5173\u95ed\u200b selinux\nsed -i 's/SELINUX\\=enforcing/SELINUX\\=disabled/' /etc/selinux/config\nreboot\n\n# \u200b\u4e34\u65f6\u200b\u5173\u95ed\u200b\uff0c\u200b\u91cd\u542f\u200b\u540e\u200b\u5931\u6548\u200b\nsetenforce 0\n</code></pre>"},{"location":"linux/init/#_9","title":"\u65f6\u95f4\u200b\u670d\u52a1","text":"<pre><code># /etc/chrony.conf\n# \u200b\u5f53\u200b\u65f6\u95f4\u200b\u670d\u52a1\u5668\u200b\u7528\u200b\u57df\u540d\u200b\u800c\u200b\u4e0d\u662f\u200b IP\uff0c\u200b\u4e14\u200b\u8be5\u200b\u57df\u540d\u89e3\u6790\u200b\u5230\u200b\u591a\u4e2a\u200b\u4e0d\u540c\u200b IP \u200b\u65f6\u200b\uff0c\u200b\u5e94\u200b\u4f7f\u7528\u200b pool\npool ntp.aliyun.com iburst\n\n# \u200b\u6216\u8005\u200b\u7528\u200b server\nserver 0.rhel.pool.ntp.org iburst\nserver 1.rhel.pool.ntp.org iburst\nserver 2.rhel.pool.ntp.org iburst\n\n# prefer \u200b\u8868\u793a\u200b\u9ed8\u8ba4\u200b\u7528\u8be5\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u53ea\u8981\u200b\u8be5\u200b\u65f6\u95f4\u200b\u670d\u52a1\u5668\u200b\u53ef\u7528\u200b\u9ed8\u8ba4\u200b\u5c31\u200b\u4f1a\u200b\u7528\u200b\u5b83\u200b\n# \u200b\u53ef\u4ee5\u200b\u4fdd\u8bc1\u200b\u6240\u6709\u200b\u670d\u52a1\u5668\u200b\u90fd\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u65f6\u95f4\u200b\u670d\u52a1\u5668\u200b\nserver 192.168.0.51 iburst prefer\n\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u72b6\u6001\u200b\nchronyc tracking\nchronyc sources -v\n\n# \u200b\u624b\u5de5\u200b\u6267\u884c\u200b\u65f6\u95f4\u200b\u540c\u6b65\u200b\nchronyc -a makestep\n\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u7cfb\u7edf\u200b\u65f6\u95f4\u200b\ntimedatectl\n\n# \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u65f6\u200b\u533a\u200b\ntimedatectl list-timezones\n\n# \u200b\u4fee\u6539\u200b\u5f53\u524d\u200b\u65f6\u533a\u200b\u4e3a\u200b\u4e1c\u516b\u533a\u200b\ntimedatectl set-timezone Asia/Shanghai\n</code></pre>"},{"location":"linux/init/#_10","title":"\u5b89\u5168\u7b56\u7565","text":"<pre><code># \u200b\u4fee\u6539\u200b\u5bc6\u7801\u200b\u8fc7\u671f\u200b\u65f6\u95f4\u200b\n# Minimum number of days between password change : 0\n# Maximum number of days between password change : 90\nchage -M 90 -m 0 lxapp01\n\n# \u200b\u67e5\u770b\u200b\u5bc6\u7801\u200b\u8fc7\u671f\u200b\u65f6\u95f4\u200b\nchage -l lxapp01\n\n# \u200b\u5f53\u200b\u7528\u6237\u200b\u5bc6\u7801\u200b\u8fc7\u671f\u200b\u65f6\u200b\uff08\u200b\u975e\u200b PAM\uff09\n# \u200b\u914d\u7f6e\u200b\u540e\u200b\u518d\u200b\u4f7f\u7528\u200b useradd \u200b\u6dfb\u52a0\u200b\u7528\u6237\u200b\u5219\u200b\u751f\u6548\u200b\n# \u200b\u5168\u5c40\u200b\u914d\u7f6e\u200b\u5bc6\u7801\u200b\u590d\u6742\u5ea6\u200b\u548c\u200b\u8fc7\u671f\u200b\u65f6\u95f4\u200b\n# /etc/login.defs\n# \u200b\u5bc6\u7801\u200b 90 \u200b\u5929\u200b\u8fc7\u671f\u200b\nPASS_MAX_DAYS   90 \n# \u200b\u6700\u5c0f\u200b\u4fee\u6539\u200b\u95f4\u9694\u65f6\u95f4\u200b\nPASS_MIN_DAYS   0\n# \u200b\u5bc6\u7801\u200b\u6700\u5c0f\u200b\u957f\u5ea6\u200b 8 \u200b\u4f4d\u200b\nPASS_MIN_LEN    8\n# \u200b\u6700\u5c0f\u200b\u8b66\u544a\u200b\u65f6\u95f4\u200b\nPASS_WARN_AGE   7\n\n# \u200b\u5f53\u200b\u7528\u6237\u200b\u4f7f\u7528\u200b passwd \u200b\u4fee\u6539\u200b\u5bc6\u7801\u200b\u6216\u8005\u200b\u767b\u5f55\u200b\u65f6\u200b\u8f93\u5165\u200b\u5bc6\u7801\u200b\n# \u200b\u914d\u7f6e\u200b pam_pwquality.so \u200b\u68c0\u67e5\u200b\u5bc6\u7801\u200b\u5f3a\u5ea6\u200b\uff08\u200b\u9002\u5408\u200b RHEL7/8\u3001Kylin V7/V10\uff09\n# RHEL7 \u200b\u5f00\u59cb\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b pam_pwquality.so\uff08\u200b\u4ee3\u66ff\u200b pam_cracklib.so\uff09 \n# dcredit=-1 \u200b\u81f3\u5c11\u200b\u5305\u542b\u200b1\u200b\u4e2a\u200b\u6570\u5b57\u200b\n# lcredit=-1 \u200b\u81f3\u5c11\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u5c0f\u5199\u5b57\u6bcd\u200b\n# ucredit=-1 \u200b\u81f3\u5c11\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u5927\u5199\u5b57\u6bcd\u200b      \n# ocredit=-1 \u200b\u81f3\u5c11\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u7279\u6b8a\u5b57\u7b26\u200b\n# retry=6 \u200b\u5bc6\u7801\u200b\u8f93\u5165\u200b\u53ef\u200b\u5c1d\u8bd5\u200b\u9519\u8bef\u200b\u6b21\u6570\u200b\u4e3a\u200b 6 \u200b\u6b21\u200b\n# minlen=8 \u200b\u5bc6\u7801\u200b\u6700\u77ed\u200b\u957f\u5ea6\u200b\u4e3a\u200b 8\n# enforce_for_root \u200b\u5f3a\u5236\u200b\u8ba9\u200b root \u200b\u4fee\u6539\u200b\u7528\u6237\u200b\u5bc6\u7801\u200b\u65f6\u8981\u200b\u7b26\u5408\u200b\u8be5\u200b\u8981\u6c42\u200b\n# /etc/pam.d/system-auth \u200b\u6216\u8005\u200b\u4fee\u6539\u200b /etc/security/pwquality.conf\n# RHEL \u200b\u7cfb\u5217\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u8fd8\u200b\u9700\u200b\u4fee\u6539\u200b /etc/pam.d/password-auth\npassword    requisite     pam_pwquality.so try_first_pass local_users_only retry=6 authtok_type= minlen=8 ocredit=-1 ucredit=-1 lcredit=-1 dcredit=-1 enforce_for_root\npassword    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok\n\n# \u200b\u914d\u7f6e\u200b pam_cracklib \u200b\u68c0\u67e5\u200b\u5bc6\u7801\u200b\u5f3a\u5ea6\u200b\uff08\u200b\u9002\u5408\u200b RHEL5/6\uff09\n# RHEL5/6 \u200b\u4e0d\u200b\u652f\u6301\u200b\u7684\u200b\u53c2\u6570\u200b\uff1alocal_users_only\n# RHEL5 \u200b\u4e0d\u200b\u652f\u6301\u200b\u7684\u200b\u53c2\u6570\u200b\uff1aauthtok_type=\u3001enforce_for_root\npassword    requisite     pam_cracklib.so try_first_pass retry=6 minlen=8 ocredit=-1 ucredit=-1 lcredit=-1 dcredit=-1\n# RHEL6\npassword    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok\n# RHEL5 \u200b\u52a0\u5bc6\u200b\u65b9\u5f0f\u200b\u9ed8\u8ba4\u200b\u662f\u200b md5\npassword    sufficient    pam_unix.so md5 shadow nullok try_first_pass use_authtok\n\n# \u200b\u5f53\u200b\u7528\u6237\u200b\u5bc6\u7801\u200b\u8f93\u5165\u200b\u6b21\u6570\u200b\u8fc7\u591a\u65f6\u200b\u9501\u5b9a\u200b\u51e0\u5206\u949f\u200b\n# onerr=fail \u200b\u5f53\u200b\u6a21\u5757\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\u65f6\u5219\u200b\u5f53\u4f5c\u200b\u88ab\u200b\u9501\u5b9a\u200b\u5904\u7406\u200b\n# deny=6 \u200b\u8f93\u5165\u200b\u9519\u8bef\u200b\u5bc6\u7801\u200b\u6b21\u6570\u200b\u8d85\u8fc7\u200b 6 \u200b\u6b21\u200b\u5219\u200b\u88ab\u200b\u9501\u200b\n# unlock_time=300 \u200b\u666e\u901a\u7528\u6237\u200b\u88ab\u200b\u9501\u5b9a\u200b\u65f6\u95f4\u200b 300 \u200b\u79d2\u200b\u5219\u200b 5 \u200b\u5206\u949f\u200b\n# root_unlock_time=300 root \u200b\u7528\u6237\u200b\u88ab\u200b\u9501\u5b9a\u200b\u65f6\u95f4\u200b\n# \u200b\u914d\u7f6e\u200b pam_tally2.so \u200b\u5f53\u200b\u7528\u6237\u200b\u8f93\u5165\u200b\n# vi /etc/pam.d/system-auth\n# vi /etc/pam.d/password-auth\nauth        required      pam_tally2.so  onerr=fail deny=6 unlock_time=300 even_deny_root root_unlock_time=300\n\n# pam_tally2 \u200b\u7684\u200b\u4f7f\u7528\u200b\n# \u200b\u67e5\u770b\u200b\u7528\u6237\u200b\u5c01\u7981\u200b\u60c5\u51b5\u200b\npam_tally2 --user testuser\n# \u200b\u89e3\u7981\u200b\npam_tally2 --user testuser --reset\n# \u200b\u6216\u8005\u200b\u76f4\u63a5\u200b\u5220\u9664\u200b\u8bb0\u5f55\u200b\u6587\u4ef6\u200b\nrm -f /var/log/tallylog\n\n# \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u767b\u5f55\u200b\u5931\u8d25\u200b\u8bb0\u5f55\u200b\nfaillock\n# \u200b\u67e5\u770b\u200b\u67d0\u4e2a\u200b\u7528\u6237\u200b\u7684\u200b\u767b\u5f55\u200b\u5931\u8d25\u200b\u8bb0\u5f55\u200b\nfaillock --user testuser\n# \u200b\u89e3\u7981\u200b\nfaillock --user testuser  --reset\n# \u200b\u6216\u8005\u200b\nrm -f /var/run/faillock/testuser\n</code></pre>"},{"location":"linux/init/#_11","title":"\u767b\u5f55\u200b\u8bbe\u7f6e","text":"<pre><code># \u200b\u4e34\u65f6\u200b\u751f\u6548\u200b\uff0c5\u200b\u5206\u949f\u200b\u81ea\u52a8\u200b\u9000\u51fa\u200b\nexport TMOUT=300\n\n# \u200b\u5bf9\u200b\u6240\u6709\u200b\u7528\u6237\u200b\u751f\u6548\u200b\n# vim /etc/profile\nexport TMOUT=300\n# \u200b\u907f\u514d\u200b TMOUT \u200b\u88ab\u200b\u5176\u4ed6\u4eba\u200b\u91cd\u5199\u200b\nreadonly TMOUT\n\n# \u200b\u53d6\u6d88\u200b\u8d85\u65f6\u200b\u9000\u51fa\u200b\n# vim /etc/profile\nexport TMOUT=0\n\n# \u200b\u767b\u5f55\u200b\u7b56\u7565\u200b\n# vim /etc/login.defs\n# LOG_UNKFAIL_ENAB \u200b\u5f53\u200b\u7528\u6237\u200b\u767b\u5f55\u200b\u5931\u8d25\u200b\u65f6\u200b\uff0c\u200b\u5c06\u200b\u7528\u6237\u540d\u200b\u8bb0\u5f55\u200b\u5230\u200b\u65e5\u5fd7\u200b\n# LOGIN_RETRIES \u200b\u7528\u6237\u200b\u8f93\u5165\u200b\u5bc6\u7801\u200b\u6700\u5927\u200b\u9519\u8bef\u200b\u6b21\u6570\u200b\uff0c\u200b\u8d85\u8fc7\u200b\u5219\u200b\u4f1a\u200b\u62a5\u9519\u200b\u9000\u51fa\u200b\uff0c\u200b\u4f46\u662f\u200b\u6539\u503c\u200b\u4f1a\u200b\u88ab\u200b pam_pwquality.so \u200b\u6a21\u5757\u200b\u7684\u200b retry=6 \u200b\u53c2\u6570\u200b\u91cd\u5199\u200b\n# LASTLOG_ENAB \u200b\u5f00\u542f\u200b\u767b\u5f55\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u529f\u80fd\u200b\uff0c\u200b\u4e14\u200b\u4f1a\u200b\u5c06\u200b\u767b\u5f55\u200b\u65f6\u95f4\u200b\u4fe1\u606f\u200b\u8bb0\u5f55\u200b\u5230\u200b\u65e5\u5fd7\u200b /var/log/lastlog\nLOG_UNKFAIL_ENAB   yes\nLOGIN_RETRIES  6\nLASTLOG_ENAB   yes\n\n# vim /etc/profile\n# \u200b\u5185\u5b58\u200b\u6700\u5927\u200b\u53ef\u200b\u4fdd\u7559\u200b\u5386\u53f2\u200b\u547d\u4ee4\u200b\u6761\u6570\u200b\nexport HISTSIZE=1000\n# ~/.bash_history \u200b\u6700\u591a\u200b\u53ef\u200b\u4fdd\u7559\u200b\u6761\u6570\u200b\nexport HISTFILESIZE=5000\n# \u200b\u5386\u53f2\u200b\u547d\u4ee4\u200b\u65f6\u95f4\u200b\u683c\u5f0f\u200b\nexport HISTTIMEFORMAT=\"`who am i |xargs -x echo` || \"\n</code></pre>"},{"location":"linux/init/#_12","title":"\u5b89\u5168\u200b\u8bbe\u7f6e","text":"<pre><code># \u200b\u7981\u6b62\u200b\u901a\u8fc7\u200b ctrl-alt-del \u200b\u5feb\u6377\u952e\u200b\u91cd\u542f\u200b\u670d\u52a1\u5668\u200b\n# mask ctrl-alt-del.target unit (this in fact creates symlink to /dev/null)\nsystemctl mask ctrl-alt-del.target\n# \u200b\u9a8c\u8bc1\u200b\nls -l /etc/systemd/system/ctrl-alt-del.target\nlrwxrwxrwx 1 root root 9 Mar 23 14:51 /etc/systemd/system/ctrl-alt-del.target -&gt; /dev/null\n\n# SSH \u200b\u670d\u52a1\u200b\u914d\u7f6e\u200b\n# vim sshd_config\n# \u200b\u8f93\u5165\u200b\u5bc6\u7801\u200b\u9519\u8bef\u200b\u8d85\u8fc7\u200b 3 \u200b\u6b21\u200b\uff0c\u200b\u5219\u200b\u8bb0\u5f55\u200b\u5230\u200b\u65e5\u5fd7\u200b\u91cc\u200b\nMaxAuthTries 3\n# \u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u4f7f\u7528\u200b\u5bc6\u7801\u200b\u767b\u5f55\u200b\uff0c\u200b\u9ed8\u8ba4\u200b yes\nPasswordAuthentication yes\n# Specifies whether rhosts or /etc/hosts.equiv authentication together with successful RSA host authentication is allowed.  \n# The default is \u201cno\u201d.  This option applies to protocol version 1 only.\nRhostsRSAAuthentication no\n# \u200b\u4e0d\u200b\u5141\u8bb8\u200b\u4ee5\u7a7a\u200b\u5bc6\u7801\u200b\u767b\u5f55\u200b\uff0c\u200b\u9ed8\u8ba4\u200b no\nPermitEmptyPasswords no\n# \u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b \n# Specifies whether sshd should check file modes and ownership of the user\u2019s files and home directory before accepting login.\n# This is normally desirable because novices sometimes accidentally leave their directory or files world-writable.  The default is \u201cyes\u201d.\nStrictModes yes \n# \u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u7ea7\u522b\u200b\n#  Gives the verbosity level that is used when logging messages from sshd.  The possible values are: QUIET, FATAL, ERROR, INFO,\n# VERBOSE, DEBUG, DEBUG1, DEBUG2 and DEBUG3.  The default is INFO.\nLogLevel INFO\n# Specifies whether sshd should ignore the user\u2019s ~/.ssh/known_hosts during RhostsRSAAuthentication or HostbasedAuthentication. The default is \u201cno\u201d.\nIgnoreUserKnownHosts yes\n# \u200b\u52a0\u5bc6\u200b\u65b9\u5f0f\u200b + \u200b\u53f7\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5728\u200b RHEL7+\u3001Kylin V7+ \u200b\u7248\u672c\u200b\u652f\u6301\u200b\nCiphers +3des-cbc\n# Specifies the available MAC (message authentication code) algorithms.\nMACs +hmac-sha1,hmac-md5\n\n# \u200b\u7981\u6b62\u200b usb \u200b\u529f\u80fd\u200b\n# vim /etc/modprobe.d/usb_storage.conf\ninstall usb-storage /bin/true\n# \u200b\u91cd\u8f7d\u200b\u914d\u7f6e\u200b\nrmmod usb-storage\n\n# auditd \u200b\u914d\u7f6e\u200b\n# vim /etc/audit/auditd.conf\n# \u200b\u6700\u5927\u200b\u4fdd\u7559\u200b\u7684\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u6570\u200b\n# This keyword specifies the number of log files to keep if rotate is given as the max_log_file_action.\nnum_logs 4\n# \u200b\u5355\u200b\u6587\u4ef6\u200b 50MB \u200b\u540e\u200b\u89e6\u53d1\u200b\u8f6e\u8f6c\u200b\n# This keyword specifies the maximum file size in megabytes.\nmax_log_file = 50\nmax_log_file_action = ROTATE\n\n# \u200b\u53ea\u200b\u7279\u5b9a\u200b\u7528\u6237\u200b\u4ece\u200b\u7279\u5b9a\u200b\u5ba2\u6237\u7aef\u200b\u767b\u5f55\u200b\n# \u200b\u9996\u5148\u200b\u5728\u200b ssh \u200b\u542f\u7528\u200b pam_access.so \u200b\u9a8c\u8bc1\u200b\n# vim /etc/pam.d/sshd\naccount required pam_access.so\n# grants the user bakroot access to all hosts except 10.0.0.2 and 10.0.0.3.\n# Here's a breakdown of the line:\n# - indicates that this is a deny rule. If the line started with a +, it would be a permit rule.\n# bakroot is the user that the rule applies to.\n# ALL is a keyword that means \"all hosts\".\n# EXCEPT is a keyword that means \"except the following hosts\".\n# 10.0.0.2 and 10.0.0.3 are the IP addresses of the hosts that the user bakroot should not have access to.\n# So, in summary, this rule denies access to the user bakroot for all hosts except 10.0.0.2 and 10.0.0.3.\n\n# vim /etc/security/access.conf\n- : bakroot : ALL EXCEPT 10.0.0.2 10.0.0.3\n</code></pre>"},{"location":"linux/init/#ref","title":"Ref","text":"<ul> <li>CentOS Linux \u215a Change Hostname Command</li> <li>RHEL / Centos Linux 7: Change and Set Hostname Command</li> <li>Linux Password Enforcement with PAM</li> <li>Linux Password Security with pam_cracklib</li> <li>https://man7.org/linux/man-pages/man5/login.defs.5.html</li> <li>https://linux.die.net/man/5/login.defs</li> <li>bash (or zsh) HISTSIZE vs. HISTFILESIZE?</li> <li>Disable reboot when ctrl-alt-del is pressed</li> <li>1.1.24 Disable USB Storage - modprobe</li> <li>How to configure pam_tally2 to lock user account after certain number of failed login attempts</li> <li>What is pam_faillock and how to use it in Red Hat Enterprise Linux 8 &amp; 9?</li> <li>How to use pam_faillock in Red Hat Enterprise Linux 6 &amp; 7 to lockout users due to successive failed login attempts</li> <li>[\u200b\u6b65\u9aa4\u200b] Linux \u200b\u5bc6\u7801\u200b\u7684\u200b\u5b89\u5168\u200b \uff08\u200b\u672c\u5730\u200b\u548c\u200b SSH \u200b\u8f93\u9519\u200b\u5bc6\u7801\u200b\u6b21\u6570\u200b\u7684\u200b\u9650\u5236\u200b\uff09\uff08pam_faillock \u200b\u7248\u200b\uff09 \uff08CentOS Linux 7 &amp; Rocky Linux 8 &amp; RHEL 7 &amp; RHEL 8 \u200b\u7248\u200b\uff09</li> <li>pam_faillock(8) - Linux man page</li> <li>Unlocking a Linux User Account After Too Many Failed Attempts</li> </ul>"},{"location":"linux/init/Kylin/","title":"Kylin","text":"<pre><code># \u200b\u63d0\u793a\u200b\u60a8\u200b\u7684\u200b\u7cfb\u7edf\u200b\u8bd5\u7528\u671f\u200b\u5df2\u8fc7\u200b\uff0c\u200b\u4e14\u200b\u65e0\u200b\u6709\u6548\u200b\u6388\u6743\u200b\nchmod 600 /usr/libexec/sysnotify\npkill -9 sysnotify\n\n# \u200b\u5b89\u88c5\u200b man pages\nyum groupinstall \"man manual\"\n</code></pre>"},{"location":"linux/init/Kylin/#links","title":"Links","text":"<ul> <li>Man\u200b\u624b\u518c\u200b\u5b89\u88c5\u200b</li> </ul>"},{"location":"mirror/","title":"Mirror","text":"<ul> <li>https://developer.aliyun.com/mirror/</li> <li>https://mirrors.aliyun.com/centos-vault/7.0.1406/isos/x86_64/</li> </ul>"},{"location":"mirror/#centos","title":"CentOS","text":"<pre><code># \u200b\u5907\u4efd\u200b\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n\n# CentOS 7\nwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo\ncurl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo\n\n# EPEL\nwget -O /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo\ncurl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo\n\n# CentOS 8\nwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo\ncurl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo\n\n# CentOS 6\nwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-6.10.repo\ncurl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-6.10.repo\n\n# EPEL\nwget -O /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-6.repo\ncurl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-6.repo\n\n# \u200b\u5237\u65b0\u200b\u6e90\u200b\u7f13\u5b58\u200b\nyum clean all &amp;&amp; yum makecache\n</code></pre>"},{"location":"mirror/#debian","title":"Debian","text":"<pre><code>sed -i 's#http://deb.debian.org#https://mirrors.163.com#g' /etc/apt/sources.list\n\n# or\nsudo sed -i 's/deb.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list\nsudo sed -i 's/http:/https:/g' /etc/apt/sources.list\n</code></pre>"},{"location":"mirror/#ubuntu","title":"Ubuntu","text":"<pre><code>sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list\nsed -i s@/security.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list\n\n# PPA\nsed -i \"s/http:\\/\\/ppa.launchpad.net/https:\\/\\/launchpad.proxy.ustclug.org/g\" /etc/apt/sources.list.d/*.list\n\n# \u200b\u6216\u8005\u200b\nfind /etc/apt/sources.list.d/ -type f -name \"*.list\" -exec  sed  -i.bak -r  's#deb(-src)?\\s*http(s)?://ppa.launchpad.net#deb\\1 https\\2://launchpad.proxy.ustclug.org#ig' {} \\;\n</code></pre>"},{"location":"mirror/#alpine","title":"Alpine","text":"<pre><code>sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories\n</code></pre>"},{"location":"mirror/#nodejs","title":"Node.js","text":"<pre><code>npm config set registry https://registry.npmmirror.com\n</code></pre>"},{"location":"mirror/#composer","title":"Composer","text":"<pre><code># \u200b\u5168\u5c40\u200b\ncomposer config -g repo.packagist composer https://mirrors.aliyun.com/composer/\n\n# \u200b\u5f53\u524d\u200b\u9879\u76ee\u200b\ncomposer config repo.packagist composer https://mirrors.aliyun.com/composer/\n</code></pre>"},{"location":"mirror/#python","title":"Python","text":"<pre><code>pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/\n</code></pre>"},{"location":"mirror/#go","title":"Go","text":"<pre><code>export GOPROXY=https://proxy.golang.com.cn,direct\n</code></pre>"},{"location":"mirror/#time","title":"Time","text":"<pre><code>ntp.aliyun.com\n</code></pre>"},{"location":"mirror/centos5/","title":"CentOS 5","text":"<pre><code>[base]\nname=CentOS-$releasever - Base\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/os/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/os/$basearch/\nenabled=1\ngpgcheck=0\n\n[updates]\nname=CentOS-$releasever - Updates\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/updates/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/updates/$basearch/\nenabled=1\ngpgcheck=0\n\n[extras]\nname=CentOS-$releasever - Extras\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/extras/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/extras/$basearch/\nenabled=1\ngpgcheck=0\n\n[centosplus]\nname=CentOS-$releasever - Plus\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/centosplus/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/extras/$basearch/\nenabled=1\ngpgcheck=0\n</code></pre>"},{"location":"mirror/create/","title":"\u5236\u4f5c\u200b\u6e90","text":""},{"location":"mirror/create/#yum","title":"yum \u200b\u6e90","text":"<pre><code># \u200b\u521d\u59cb\u5316\u200b yum \u200b\u6e90\u200b\ncreaterepo /opt/rpms\n\n# \u200b\u66f4\u65b0\u200b yum \u200b\u6e90\u200b\ncreaterepo --update /opt/rpms\n\n# repo \u200b\u6587\u4ef6\u200b\n[customrepo]\nname=CustomRepository\nbaseurl=file:///opt/rpms\nenabled=1\ngpgcheck=0\n</code></pre>"},{"location":"mirror/create/#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How to Create Your Own Repositories for Packages</li> <li>Need to set up yum repository for locally-mounted DVD on Red Hat Enterprise Linux 7</li> <li>How To Install createrepo on Ubuntu 18.04</li> </ul>"},{"location":"mirror/iso/","title":"iso","text":"<ul> <li>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/20.04/</li> </ul>"},{"location":"mirror/rpm/","title":"Resources","text":"<ul> <li>RPM \u200b\u5305\u200b\u5927\u5168\u200b</li> </ul>"},{"location":"mysql/","title":"MySQL","text":""},{"location":"mysql/#database","title":"Database","text":"<pre><code># \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b\nCREATE DATABASE mydatabase CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/#_1","title":"\u521b\u5efa\u200b\u7528\u6237","text":"<pre><code># \u200b\u521b\u5efa\u200b\u7528\u6237\u200b\nCREATE USER 'username'@'172.16.%' IDENTIFIED BY 'password';\n\n# \u200b\u6388\u6743\u200b\nGRANT SELECT, INSERT, UPDATE, DELETE ON `dbname`.* TO 'username'@'172.16.%'\n\n# \u200b\u6388\u4e88\u200b\u7ba1\u7406\u5458\u200b\u6743\u9650\u200b\nGRANT ALL PRIVILEGES ON *.* TO 'username'@`172.16.%`;\n</code></pre>"},{"location":"mysql/#_2","title":"\u4f7f\u7528","text":"<pre><code># \u200b\u622a\u53d6\u200b\u5b57\u7b26\u4e32\u200b\nSELECT CHAR_LENGTH(\"Have_a_good_day\") - LOCATE('_', REVERSE(\"Have_a_good_day\"))+1;\n</code></pre>"},{"location":"mysql/#links","title":"Links","text":"<ul> <li>Last index of a given substring in MySQL</li> </ul>"},{"location":"mysql/skill/","title":"skill","text":"<pre><code># \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u8868\u548c\u5e93\u200b\u540d\u5b57\u200b\nselect table_schema, table_name from information_schema.tables\nselect table_name from information_schema.tables where TABLE_SCHEMA='dbname';\n</code></pre> <ul> <li>Get table names using SELECT statement in MySQL</li> </ul>"},{"location":"mysql/utf8mb4/","title":"\u4fee\u6539\u200b\u5b57\u7b26\u96c6\u200b\u4e3a\u200b utf8mb4","text":"<p>\u200b\u4fee\u6539\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u5b57\u7b26\u96c6\u200b\u4e3a\u200b utf8mb4\uff0c\u200b\u8ba9\u200b\u5b83\u200b\u80fd\u200b\u5b58\u50a8\u200b 4 \u200b\u5b57\u8282\u200b\u7684\u200b emoji \u200b\u8868\u60c5\u200b\u3002</p>"},{"location":"mysql/utf8mb4/#_1","title":"\u4fee\u6539\u200b\u6570\u636e\u5e93","text":"<pre><code>ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/utf8mb4/#_2","title":"\u4fee\u6539\u200b\u8868","text":"<pre><code>ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/utf8mb4/#_3","title":"\u81ea\u52a8\u200b\u751f\u6210\u200b\u4fee\u6539\u200b\u8bed\u53e5","text":"<p>\u200b\u521b\u5efa\u200b <code>gen_queries.sql</code> \u200b\u6587\u4ef6\u200b\uff0c\u200b\u8bf7\u200b\u7528\u200b\u5b9e\u9645\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u540d\u79f0\u200b\u66ff\u6362\u200b <code>YOUR_DATABASE_NAME</code> </p> <pre><code>USE information_schema;\nSELECT CONCAT(\"ALTER DATABASE `\",table_schema,\"` CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\") AS _sql\nFROM `TABLES` WHERE table_schema LIKE \"YOUR_DATABASE_NAME\" AND TABLE_TYPE='BASE TABLE' GROUP BY table_schema UNION\nSELECT CONCAT(\"ALTER TABLE `\",table_schema,\"`.`\",table_name,\"` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\") AS _sql\nFROM `TABLES` WHERE table_schema LIKE \"YOUR_DATABASE_NAME\" AND TABLE_TYPE='BASE TABLE' GROUP BY table_schema, table_name UNION\nSELECT CONCAT(\"ALTER TABLE `\",`COLUMNS`.table_schema,\"`.`\",`COLUMNS`.table_name, \"` CHANGE `\",column_name,\"` `\",column_name,\"` \",data_type,\"(\",character_maximum_length,\") CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\",IF(is_nullable=\"YES\",\" NULL\",\" NOT NULL\"),\";\") AS _sql\nFROM `COLUMNS` INNER JOIN `TABLES` ON `TABLES`.table_name = `COLUMNS`.table_name WHERE `COLUMNS`.table_schema like \"YOUR_DATABASE_NAME\" and data_type in ('varchar','char') AND TABLE_TYPE='BASE TABLE' UNION\nSELECT CONCAT(\"ALTER TABLE `\",`COLUMNS`.table_schema,\"`.`\",`COLUMNS`.table_name, \"` CHANGE `\",column_name,\"` `\",column_name,\"` \",data_type,\" CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\",IF(is_nullable=\"YES\",\" NULL\",\" NOT NULL\"),\";\") AS _sql\nFROM `COLUMNS` INNER JOIN `TABLES` ON `TABLES`.table_name = `COLUMNS`.table_name WHERE `COLUMNS`.table_schema like \"YOUR_DATABASE_NAME\" and data_type in ('text','tinytext','mediumtext','longtext') AND TABLE_TYPE='BASE TABLE';\n</code></pre> <p>\u200b\u751f\u6210\u200b\u4fee\u6539\u200b\u8bed\u53e5\u200b </p> <pre><code>mysql -u root -p -s &lt; gen_queries.sql &gt; queries.sql\n</code></pre> <p>\u200b\u6267\u884c\u200b\u4fee\u6539\u200b\u8bed\u53e5\u200b</p> <pre><code>mysql -u root -p &lt; queries.sql\n</code></pre>"},{"location":"mysql/utf8mb4/#_4","title":"\u53c2\u8003","text":"<ul> <li>How to easily convert utf8 tables to utf8mb4 in MySQL 5.5</li> <li>utf8mb4-convert</li> </ul>"},{"location":"network/bond/","title":"bond","text":""},{"location":"network/bond/#_1","title":"\u5355\u200b\u7f51\u5361\u200b\u914d\u7f6e","text":"<pre><code>sudo nmcli connection add con-name eth0 ifname ens192 type Ethernet ip4 10.0.0.100/24 gw4 10.0.0.254 ipv4.dns 223.5.5.5 ipv4.method manual connection.autoconnect yes\nsudo nmcli connection up eth0\n</code></pre>"},{"location":"network/bond/#bond_1","title":"\u53cc\u7f51\u5361\u200b bond","text":"<pre><code>sudo nmcli connection add type bond con-name bond0 ifname bond0 mode active-backup ip4 10.0.0.100/24 gw4 10.0.0.254 ipv4.dns 223.5.5.5 ipv4.method manual connection.autoconnect yes\nnmcli connection add type ethernet slave-type bond con-name bond0-eth0 ifname eth0 master bond0\nnmcli connection add type ethernet slave-type bond con-name bond0-eth1 ifname eth1 master bond0\n</code></pre>"},{"location":"network/bond/#_2","title":"\u5207\u6362\u200b\u6d4b\u8bd5","text":"<pre><code>ifdown eth0\nifup eth0\ncat /proc/net/bonding/bond0\nnmcli con reload\nsystemctl restart network\n</code></pre>"},{"location":"network/bond/#_3","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Chapter 3. Configuring network bonding</li> <li>7.3. Network Bonding Using the NetworkManager Command Line Tool, nmcli</li> <li>Interface bonding CENTOS 6/7</li> </ul>"},{"location":"network/interface/","title":"Interface","text":""},{"location":"network/interface/#ip","title":"\u4e3a\u200b\u7f51\u5361\u200b\u6dfb\u52a0\u200b\u4e00\u4e2a\u200b IP","text":"<pre><code># \u200b\u6dfb\u52a0\u200b IP\nsudo ip address add &lt;ip-address&gt;/&lt;prefix-length&gt; dev &lt;interface&gt;\n\n# \u200b\u5220\u9664\u200b IP\nsudo ip address del 172.16.100.17/24 dev eth0\n\n# \u200b\u67e5\u770b\u200b IP\nip address show eth0\n</code></pre>"},{"location":"network/interface/#_1","title":"\u53c2\u8003","text":"<ul> <li>How can I (from CLI) assign multiple IP addresses to one interface?</li> </ul>"},{"location":"nginx/","title":"Nginx","text":""},{"location":"nginx/#https","title":"HTTPS \u200b\u8bc1\u4e66\u200b\u914d\u7f6e\u200b\u5b9e\u4f8b","text":"<pre><code>server {\n  listen 443 ssl;\n\n  server_name example.com;\n\n  # \u200b\u670d\u52a1\u7aef\u200b\u8bc1\u4e66\u200b\u8ba4\u8bc1\u200b\n  ssl_certificate /etc/nginx/certs/example.com.pem;\n  ssl_certificate_key /etc/nginx/certs/example.com-key.pem;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_ciphers HIGH:!aNULL:!MD5;\n\n  # \u200b\u5ba2\u6237\u7aef\u200b\u8bc1\u4e66\u200b\u8ba4\u8bc1\u200b\n  ssl_client_certificate /etc/nginx/certs/ca.pem;\n  ssl_verify_client optional;\n\n  location / {\n    # \u200b\u81ea\u5b9a\u4e49\u200b\u5ba2\u6237\u7aef\u200b\u8ba4\u8bc1\u200b\u5931\u8d25\u200b\u65f6\u200b\u7684\u200b\u9519\u8bef\u4fe1\u606f\u200b\n    if ($ssl_client_verify != SUCCESS) {\n      return 500 ' ';\n    }\n\n    default_type text/html;\n    return 200 'ok';\n  }\n}\n</code></pre>"},{"location":"nginx/#links","title":"Links","text":"<ul> <li>\u200b\u5de7\u7528\u200b Nginx \u200b\u5feb\u901f\u200b\u5b9e\u73b0\u200b HTTPS \u200b\u53cc\u5411\u200b\u8ba4\u8bc1\u200b</li> </ul>"},{"location":"notebook/","title":"\u7b14\u8bb0\u672c","text":""},{"location":"notebook/#_2","title":"\u5e38\u89c1\u95ee\u9898","text":"<pre><code># CapsLock \u200b\u5927\u5199\u200b\u952e\u5e38\u4eae\u200b\uff0c\u200b\u5173\u95ed\u200b\u4e0d\u4e86\u200b\n\u200b\u540c\u65f6\u200b\u6309\u4e0b\u200b\u201cFn\u201d\u200b\u952e\u200b\u548c\u200b\u201cCaps Lock\u201d\u200b\u952e\u200b\uff0c\u200b\u518d\u200b\u6309\u200b\u4e00\u4e0b\u200b\u201cShift\u201d\u200b\u952e\u200b\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5173\u95ed\u200b\u5927\u5199\u200b\u9501\u5b9a\u200b\u6307\u793a\u706f\u200b\u4e86\u200b\u3002\n</code></pre>"},{"location":"openshift/","title":"OpenShift","text":""},{"location":"openshift/#event","title":"Event","text":"<pre><code># \u200b\u6309\u200b\u65f6\u95f4\u200b\u987a\u5e8f\u200b\u67e5\u770b\u200b\u4e8b\u4ef6\u200b\nkubectl get events --sort-by='.lastTimestamp'\n</code></pre>"},{"location":"openshift/#namespace","title":"Namespace","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u5728\u200b\u54ea\u4e2a\u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b\noc config view --minify -o 'jsonpath={..namespace}'\n\n# \u200b\u6216\u8005\u200b\nkubectl config view --minify -o 'jsonpath={..namespace}'\n</code></pre>"},{"location":"openshift/#pod","title":"Pod","text":"<pre><code># \u200b\u5f3a\u5236\u200b\u5220\u9664\u200b Pod\nkubectl delete pod --grace-period=0 --force --namespace &lt;NAMESPACE&gt; &lt;PODNAME&gt;\n\n# \u200b\u5220\u9664\u200b\u5f53\u524d\u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b\u4e0b\u200b\u6240\u6709\u200b Terminating \u200b\u7684\u200b Pod\nfor p in $(kubectl get pods | grep Terminating | awk '{print $1}'); do kubectl delete pod $p --grace-period=0 --force;done\n\n# \u200b\u5220\u9664\u200b\u96c6\u7fa4\u200b\u91cc\u200b\u6240\u6709\u200b Terminating \u200b\u7684\u200b Pod\nkubectl get pods --all-namespaces | awk '{if ($4==\"Terminating\") print \"oc delete pod \" $2 \" -n \" $1 \" --force --grace-period=0 \";}' | sh\n</code></pre>"},{"location":"openshift/app-faq/","title":"\u5e94\u7528\u200b\u5e38\u89c1\u95ee\u9898","text":""},{"location":"openshift/app-faq/#tcp-timeout","title":"\u8c03\u6574\u200b TCP timeout","text":"<p>\u200b\u6ce8\u610f\u200b\u5982\u200b\u94fe\u8def\u200b\u4e0a\u200b\u7ecf\u8fc7\u200b\u4e86\u200b\u5176\u4ed6\u200b\u8d1f\u8f7d\u200b\u5747\u8861\u5668\u200b\uff0c\u200b\u5219\u200b timeout \u200b\u6700\u5927\u503c\u200b\u4e0d\u80fd\u200b\u8d85\u8fc7\u200b\u5b83\u4eec\u200b\u7684\u200b\u9600\u503c\u200b\u3002</p> <pre><code>apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: example\n  namespace: my-namespace\n  annotations:\n    haproxy.router.openshift.io/timeout: 600s\nspec:\n  tls:\n    - hosts:\n        - example.com\n      secretName: https-tls-secret\n  rules:\n    - host: example.com\n      http:\n        paths:\n          - path: /testpath\n            pathType: Prefix\n            backend:\n              service:\n                name: test\n                port:\n                  number: 80\n</code></pre> <ul> <li>Configuring route timeouts</li> </ul>"},{"location":"openshift/audit/","title":"\u5ba1\u8ba1\u200b\u65e5\u5fd7","text":""},{"location":"openshift/audit/#_2","title":"\u53c2\u8003","text":"<ul> <li>Viewing audit logs</li> </ul>"},{"location":"openshift/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"openshift/faq/#mcp","title":"MCP \u200b\u81ea\u52a8\u66f4\u65b0\u200b\u5e76\u200b\u89e6\u53d1\u200b\u8282\u70b9\u200b\u91cd\u542f","text":"<p>\u200b\u5b98\u65b9\u200b\u5efa\u8bae\u200b MCP \u200b\u5e94\u8be5\u200b\u4fdd\u6301\u200b\u5f00\u542f\u200b\u72b6\u6001\u200b\u3002\u200b\u56e0\u4e3a\u200b\u4ece\u200b 4.7.4 \u200b\u7248\u672c\u200b\u5f00\u59cb\u200b\uff0capi-server \u200b\u8bc1\u4e66\u200b\u81ea\u52a8\u200b\u8f6e\u8f6c\u200b\u4e0d\u4f1a\u200b\u518d\u200b\u89e6\u53d1\u200b\u8282\u70b9\u200b\u91cd\u542f\u200b\uff0c\u200b\u800c\u200b\u5173\u95ed\u200b\u81ea\u52a8\u66f4\u65b0\u200b\u5219\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u8bc1\u4e66\u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u66f4\u65b0\u200b\u3002</p> <p>\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff0c\u200b\u5f00\u542f\u200b MCP \u200b\u81ea\u52a8\u66f4\u65b0\u200b</p> <pre><code>oc patch --type merge machineconfigpool/master -p '{\"spec\":{\"paused\":false}}'\noc patch --type merge machineconfigpool/worker -p '{\"spec\":{\"paused\":false}}'\n</code></pre> <ul> <li>Understand CA cert auto renewal in Red Hat OpenShift 4</li> <li>Disabling the Machine Config Operator from automatically rebooting by using the console</li> </ul>"},{"location":"openshift/faq/#coreos-hostname","title":"CoreOS \u200b\u91cd\u542f\u200b\u540e\u200b hostname \u200b\u4e0d\u200b\u5bf9","text":"<p>\u200b\u5728\u200b\u6dfb\u52a0\u200b worker \u200b\u8282\u70b9\u200b\u65f6\u200b\uff0c\u200b\u867d\u7136\u200b\u4f7f\u7528\u200b <code>hostnamectl set-hostname</code> \u200b\u8bbe\u7f6e\u200b\u4e86\u200b hostname\uff0c\u200b\u4f46\u200b\u91cd\u542f\u200b\u540e\u200b\u4e3b\u673a\u540d\u200b\u53d8\u6210\u200b\u4e86\u200b localhost\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u5728\u200b ignition \u200b\u6587\u4ef6\u200b\u91cc\u200b\u6dfb\u52a0\u200b\u4e3b\u673a\u540d\u200b\u89e3\u51b3\u200b\u8be5\u200b\u95ee\u9898\u200b</p> <pre><code>$ cat worker.ign | jq . &gt; worker1.ocp1.example.com.ign\n$ cat worker1.ocp1.example.com.ign\n{\n  \"ignition\": {\n    \"config\": {\n      \"merge\": [\n        {\n          \"source\": \"https://api-int.test.example.com:22623/config/worker\"\n        }\n      ]\n    },\n    \"security\": {\n      \"tls\": {\n        \"certificateAuthorities\": [\n          {\n            \"source\": \"data:text/plain;charset=utf-8;base64,LS0tLS1CR....\"\n          }\n        ]\n      }\n    },\n    \"version\": \"3.1.0\"\n  },\n  \"storage\": {\n    \"files\": [\n      {\n        \"path\": \"/etc/hostname\",\n        \"contents\": {\n          \"source\": \"data:,worker1.ocp1.example.com\"\n        },\n        \"mode\": 420\n      }\n    ]\n  }\n}\n</code></pre> <ul> <li>Hostname can not persist when installing RHCOS</li> <li>How to configure persistent hostname when creating RHCOS in OpenShift 4.6 or later?</li> </ul>"},{"location":"openshift/faq/#the-cluster-operator-image-registry-is-degraded","title":"the cluster operator image-registry is degraded","text":"<p>\u200b\u5347\u7ea7\u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u8fdb\u884c\u200b\uff0c\u200b\u5e76\u200b\u957f\u65f6\u95f4\u200b\u505c\u7559\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u72b6\u6001\u200b</p> <pre><code>$ oc get clusterversion -o wide\nNAME      VERSION                                   AVAILABLE   PROGRESSING   SINCE   STATUS\nversion   4.5.0-0.nightly-s390x-2020-06-29-163732   True        False         15h     Error while reconciling 4.5.0-0.nightly-s390x-2020-06-29-163732: the cluster operator image-registry is degraded\n</code></pre> <p>\u200b\u67e5\u770b\u200b co \u200b\u72b6\u6001\u200b</p> <pre><code>$ oc describe co image-registry\nImagePrunerDegraded: Job has reached the specified backoff limit\n</code></pre> <p>\u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b</p> <pre><code>oc patch imagepruner.imageregistry/cluster --patch '{\"spec\":{\"suspend\":true}}' --type=merge\noc -n openshift-image-registry delete jobs --all\n</code></pre> <ul> <li>ImagePrunerDegraded error stalling upgrade</li> <li>OpenShift v4.x - ImagePrunerDegraded: Job has reached the specified backoff limit</li> </ul>"},{"location":"openshift/faq/#no-space-left-on-device","title":"no space left on device","text":"<p>Pod \u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u542f\u52a8\u200b\uff0c\u200b\u4e00\u76f4\u200b\u5904\u4e8e\u200b ContainerCreating \u200b\u72b6\u6001\u200b\uff0c\u200b\u67e5\u770b\u200b\u4e8b\u4ef6\u200b\u53d1\u73b0\u200b\u62a5\u200b <code>no space left on device</code> \u200b\u9519\u8bef\u200b</p> <pre><code>$ oc describe pods mysql8.0.28-nacos3-67965c8f4-6r4st\nEvents:\n  Type     Reason       Age   From               Message\n  ----     ------       ----  ----               -------\n  Normal   Scheduled    79s   default-scheduler  Successfully assigned zfqs/mysql8.0.28-nacos3-67965c8f4-6r4st to worker8.dev3.example.com\n  Warning  FailedMount  79s   kubelet            MountVolume.SetUp failed for volume \"kube-api-access-dp55p\" : write /var/lib/kubelet/pods/eda464b0-1376-4edb-b0ea-c495f18bbb9e/volumes/kubernetes.io~projected/kube-api-access-dp55p/..2023_05_29_08_16_36.1470493620/ca.crt: no space left on device\n  Warning  FailedMount  78s   kubelet            MountVolume.SetUp failed for volume \"kube-api-access-dp55p\" : write /var/lib/kubelet/pods/eda464b0-1376-4edb-b0ea-c495f18bbb9e/volumes/kubernetes.io~projected/kube-api-access-dp55p/..2023_05_29_08_16_37.1796074709/service-ca.crt: no space left on device\n</code></pre> <p>\u200b\u53d1\u73b0\u200b\u662f\u200b <code>limit.memory</code> \u200b\u548c\u200b <code>request.memory</code> \u200b\u7684\u200b\u5355\u4f4d\u200b\u5199\u9519\u200b\u4e86\u200b</p> <pre><code>resources:\n  requests:\n    memory: 256m\n    cpu: 100m\n  limits:\n    memory: 512m\n    cpu: 100m\n</code></pre> <p>\u200b\u5c06\u200b memory \u200b\u7684\u200b\u5355\u4f4d\u200b\u6539\u6210\u200b <code>Mi</code> \u200b\u5373\u53ef\u200b</p> <p>```yaml hl_lines=\"3,6\" resources:   requests:     memory: 256Mi     cpu: 100m   limits:     memory: 512Mi     cpu: 100m <pre><code>- https://github.com/orgs/strimzi/discussions/6399#discussioncomment-2224453\n\n## Cluster operator operator-lifecycle-manager-packageserver is stuck in progressing state\n\n\u200b\u5f53\u200b lifecycle operator \u200b\u8bc1\u4e66\u200b\u8fc7\u671f\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u8be5\u62a5\u200b\u9519\u200b\n\n```sh\n# \u200b\u68c0\u67e5\u200b\u8bc1\u4e66\u200b\u662f\u5426\u200b\u5df2\u8fc7\u671f\u200b\noc get secret packageserver-service-cert -o json -n openshift-operator-lifecycle-manager | jq -r '.data | .[\"tls.crt\"]' | base64 -d | openssl x509 -noout -dates\n\n# \u200b\u66f4\u65b0\u200b secret\noc delete secret packageserver-service-cert -n openshift-operator-lifecycle-manager\n</code></pre></p> <ul> <li>Cluster operator operator-lifecycle-manager-packageserver is stuck in progressing state</li> </ul>"},{"location":"openshift/faq/#_2","title":"\u5176\u4ed6","text":"<ul> <li>Chapter 12. Configuring OpenShift connection timeout</li> </ul>"},{"location":"openshift/init/","title":"\u521d\u59cb\u5316","text":""},{"location":"openshift/init/#_2","title":"\u65b0\u200b\u7528\u6237\u200b\u4e0d\u80fd\u200b\u521b\u5efa\u200b\u9879\u76ee","text":"<pre><code>oc patch clusterrolebinding.rbac self-provisioners -p '{\"subjects\": null}'\noc patch clusterrolebinding.rbac self-provisioners -p '{\"metadata\": {\"annotations\": {\"rbac.authorization.kubernetes.io/autoupdate\": \"false\" }}}'\n</code></pre> <ul> <li>Disabling project self-provisioning</li> </ul>"},{"location":"openshift/links/","title":"\u6709\u7528\u200b\u7684\u200b\u94fe\u63a5","text":"<ul> <li>Annotating a route with a cookie</li> <li>OpenShift Container Platform 4.x Tested Integrations (for x86_x64)</li> <li>7.2. \u200b\u67e5\u770b\u200b\u5ba1\u8ba1\u200b\u65e5\u5fd7\u200b</li> <li>Configuring route timeouts</li> <li>How to request and pass an oauth token for REST API access in OpenShift 4</li> <li>Configuring the web console</li> <li>Session timeout in Openshift 4</li> <li>Disabling project self-provisioning</li> <li>Setting up additional trusted certificate authorities for builds</li> <li>Replacing an unhealthy etcd member</li> <li>Kubernetes: copying files into and out of containers without \u2018kubectl cp\u2019</li> <li>How to Copy Files from NODE using oc cp?</li> </ul>"},{"location":"openshift/registry/","title":"\u955c\u50cf\u200b\u4ed3\u5e93","text":"<ol> <li>Using an external registry with OpenShift 4</li> <li>Adding certificate authorities to the cluster</li> </ol>"},{"location":"openshift/%E5%AE%89%E8%A3%85/","title":"\u5b89\u88c5","text":"<p>\u200b\u672c\u6587\u200b\u8bb0\u5f55\u200b\u4e86\u200b\u5728\u200b\u79bb\u7ebf\u200b\u73af\u5883\u200b\u4e0b\u200b\u5b89\u88c5\u200b OpenShift 4.8.36 \u200b\u7684\u200b\u5b8c\u6574\u200b\u6b65\u9aa4\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/#_2","title":"\u524d\u63d0","text":"<p>\u200b\u8981\u200b\u5b8c\u6210\u200b\u5b89\u88c5\u200b OpenShift\uff0c\u200b\u5fc5\u987b\u200b\u8981\u200b\u6709\u200b DNS\u3001Chrony\u3001\u200b\u8d1f\u8f7d\u200b\u5747\u8861\u5668\u200b\uff08HAProxy\u3001Nginx \u200b\u7b49\u200b\uff09\u3001\u200b\u955c\u50cf\u200b\u4ed3\u5e93\u200b\uff08Harbor\uff09\u3002</p> <ol> <li>CoreDNS</li> </ol>"},{"location":"openshift/%E5%AE%89%E8%A3%85/#_3","title":"\u76f8\u5173\u200b\u8d44\u6e90","text":"<ul> <li>\u200b\u4e0b\u8f7d\u5b89\u88c5\u200b\u6587\u4ef6\u200b https://mirror.openshift.com/pub/openshift-v4/</li> <li>\u200b\u67e5\u770b\u200b\u6700\u65b0\u200b\u53d1\u884c\u7248\u200b https://openshift-release.apps.ci.l2s4.p1.openshiftapps.com/</li> <li>\u200b\u67e5\u770b\u200b\u5347\u7ea7\u200b\u8def\u5f84\u200b https://access.redhat.com/labs/ocpupgradegraph/update_path</li> <li>\u200b\u67e5\u770b\u200b\u4e0d\u540c\u200b\u7248\u672c\u200b\u4e4b\u95f4\u200b\u7684\u200b\u53d8\u5316\u200b https://openshift-release.apps.ci.l2s4.p1.openshiftapps.com/releasestream/4-stable/release/4.8.56?from=4.8.36</li> <li>[Red Hat OpenShift Container Platform Life Cycle Policy] (https://access.redhat.com/support/policy/updates/openshift#dates)</li> </ul>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns/","title":"\u6dfb\u52a0\u200b\u57df\u540d\u89e3\u6790","text":"<p>\u200b\u4e0b\u9762\u200b\u4ee5\u200b CoreDNS \u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u5176\u4ed6\u200b DNS \u200b\u505a\u6cd5\u200b\u7c7b\u4f3c\u200b\u3002 </p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns/#_2","title":"\u6b63\u5411\u200b\u89e3\u6790","text":"<p>\u200b\u65b0\u5efa\u200b db.ocp1.example.com \u200b\u6587\u4ef6\u200b\uff0c\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b</p> <pre><code>$ORIGIN ocp1.example.com.\n@   3600 IN SOA example.com. example.com. (\n                2017042745 ; serial\n                7200       ; refresh (2 hours)\n                3600       ; retry (1 hour)\n                1209600    ; expire (2 weeks)\n                3600       ; minimum (1 hour)\n                )\n\n    3600 IN NS ns.example.com.\n\napi         IN A     192.168.1.10\napi-int     IN A     192.168.1.10\n\n*.apps      IN A     192.168.1.10\n\nbootstrap   IN A     192.168.1.10\n\nmaster1     IN A     192.168.1.20\nmaster2     IN A     192.168.1.21\nmaster3     IN A     192.168.1.22\n\nworker1     IN A     192.168.1.30\nworker2     IN A     192.168.1.31\nworker3     IN A     192.168.1.32\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns/#_3","title":"\u53cd\u5411\u200b\u89e3\u6790","text":"<p>\u200b\u65b0\u5efa\u200b db.1.168.192 \u200b\u6587\u4ef6\u200b\uff0c\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b</p> <pre><code>@   3600 IN SOA example.com. example.com. (\n                2017042745 ; serial\n                7200       ; refresh (2 hours)\n                3600       ; retry (1 hour)\n                1209600    ; expire (2 weeks)\n                3600       ; minimum (1 hour)\n                )\n\n    3600 IN NS ns.example.com.\n\n10     IN PTR     api.ocp1.example.com.\n10     IN PTR     api-int.ocp1.example.com.\n20     IN PTR     master1.ocp1.example.com.\n21     IN PTR     master2.ocp1.example.com.\n22     IN PTR     master3.ocp1.example.com.\n30     IN PTR     worker1.ocp1.example.com.\n31     IN PTR     worker2.ocp1.example.com.\n32     IN PTR     worker3.ocp1.example.com.\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns/#corefile","title":"\u914d\u7f6e\u200b\u5230\u200b Corefile","text":"<pre><code>.:53 {\n    log\n    errors\n    cache\n\n    file db.ocp1.example.com ocp1.example.com\n    file db.1.168.192 1.168.192.in-addr.arpa\n}\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns/#_4","title":"\u68c0\u67e5\u200b\u914d\u7f6e","text":"<p>\u200b\u8fd0\u884c\u200b\u4ee5\u4e0b\u200b\u811a\u672c\u200b\u68c0\u67e5\u200b DNS \u200b\u662f\u5426\u200b\u90fd\u200b\u914d\u7f6e\u200b\u6b63\u786e\u200b</p> <pre><code>#/bin/bash\n\nDNS_IP=127.0.0.1\n\ndeclare -A arr\narr[api.ocp1.example.com]=192.168.1.10\narr[api-int.ocp1.example.com]=192.168.1.10\narr[a.apps.ocp1.example.com]=192.168.1.10\narr[master1.ocp1.example.com]=192.168.1.20\narr[master2.ocp1.example.com]=192.168.1.21\narr[master3.ocp1.example.com]=192.168.1.22\narr[worker1.ocp1.example.com]=192.168.1.30\narr[worker2.ocp1.example.com]=192.168.1.31\narr[worker3.ocp1.example.com]=192.168.1.32\n\nfor key in \"${!arr[@]}\"; \ndo \n    ip=$(dig @$DNS_IP +short $key)\n    if [ \"$ip\" != \"${arr[$key]}\" ]; then\n        echo \"$key is ${arr[$key]}, result $ip\"\n    fi\n\n    domain=$(dig @$DNS_IP +short -x ${arr[$key]})\n\n    if [[ $key == a.* ]]; then\n        continue\n    fi\n\n    if [[ $key == api* ]]; then\n        domains=($domain)\n        if [[ ! \"${domains[*]}\" =~ \"${key}\" ]]; then\n            echo \"${arr[$key]} is $key, result ${array[*]}\"\n        fi\n    else\n        if [[ ! \"$domain\" == \"$key.\" ]]; then\n            echo \"${arr[$key]} is $key, result $domain\"\n        fi\n    fi\ndone\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/","title":"\u51c6\u5907\u200b\u5b89\u88c5\u200b\u4ecb\u8d28","text":""},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#_2","title":"\u9700\u8981\u200b\u7684\u200b\u4ecb\u8d28","text":"<ol> <li>OpenShift \u200b\u5b89\u88c5\u200b\u811a\u672c\u200b openshift-install-linux-4.8.36.tar.gz</li> <li>OpenShift oc \u200b\u5ba2\u6237\u7aef\u200b openshift-client-linux-4.8.36.tar.gz </li> <li>CoreOS \u200b\u5b89\u88c5\u200b\u5149\u76d8\u200b rhcos-4.8.14-x86_64-live.x86_64.iso</li> <li>machine configs \u200b\u751f\u6210\u200b\u5de5\u5177\u200b butane</li> <li>OpenShift \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b 4.8.36_releases</li> <li>\u200b\u4e00\u4e2a\u200b 4G+ \u200b\u7684\u200b U \u200b\u76d8\u200b\uff0c\u200b\u7528\u4e8e\u200b\u523b\u5f55\u200b\u5b89\u88c5\u200b\u5149\u76d8\u200b</li> </ol> <p>\u200b\u4ee5\u4e0a\u200b\u4ecb\u8d28\u200b\uff0c\u200b\u9664\u4e86\u200b\u4e0b\u8f7d\u200b OpenShift \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b\u9700\u8981\u200b\u767b\u5f55\u200b\uff0c\u200b\u5176\u4ed6\u200b\u4ecb\u8d28\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5728\u200b\u516c\u7f51\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#_3","title":"\u4e0b\u8f7d\u5b89\u88c5\u200b\u955c\u50cf","text":"<p>\u200b\u4ee5\u4e0b\u200b\u6b65\u9aa4\u200b\u5c06\u200b\u4e0b\u8f7d\u200b OpenShift \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b\u5230\u200b\u672c\u5730\u200b\u78c1\u76d8\u200b\uff0c\u200b\u955c\u50cf\u200b\u6bd4\u8f83\u200b\u5927\u200b\uff0c\u200b\u8bf7\u200b\u9884\u7559\u200b\u81f3\u5c11\u200b 20GB \u200b\u7a7a\u95f4\u200b\u3002</p> <p>Note</p> <p>\u200b\u56e0\u4e3a\u200b\u9700\u8981\u200b\u4ece\u200b\u7ea2\u5e3d\u200b\u5b98\u7f51\u200b\u4e0b\u8f7d\u200b\u955c\u50cf\u200b\uff0c\u200b\u5982\u679c\u200b\u7528\u200b\u4e2a\u4eba\u7535\u8111\u200b\u4e0b\u8f7d\u200b\uff0c\u200b\u901f\u5ea6\u200b\u4f1a\u200b\u6bd4\u8f83\u6162\u200b\uff0c\u200b\u800c\u4e14\u200b\u7ecf\u5e38\u200b\u4e2d\u65ad\u200b\uff0c \u200b\u6240\u4ee5\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b\u56fd\u5185\u200b\u7684\u200b\u4e91\u200b\u670d\u52a1\u5668\u200b\uff08\u200b\u4f8b\u5982\u200b\uff1a\u200b\u963f\u91cc\u200b\u4e91\u200b\u3001\u200b\u817e\u8baf\u200b\u4e91\u200b\u7b49\u200b\uff09\u200b\u8fdb\u884c\u200b\u4e0b\u8f7d\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#oc","title":"\u5b89\u88c5\u200b oc \u200b\u5ba2\u6237\u7aef","text":"<pre><code>tar -zxvf openshift-client-linux-4.8.36.tar.gz -C /usr/local/bin oc kubectl\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#pull-secerttxt","title":"\u83b7\u53d6\u200b pull-secert.txt","text":"<p>\u200b\u6253\u5f00\u200b https://console.redhat.com/openshift/install/pull-secret \u200b\u9875\u9762\u200b\uff0c\u200b\u4f7f\u7528\u200b\u8d26\u53f7\u200b\u767b\u5f55\u200b\u540e\u200b\u4e0b\u8f7d\u200b\u3002\u200b\u5982\u679c\u200b\u4f60\u200b\u6ca1\u6709\u200b\u8d26\u53f7\u200b\u53ef\u200b\u81ea\u884c\u200b\u6ce8\u518c\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#_4","title":"\u5c06\u200b\u955c\u50cf\u200b\u540c\u6b65\u200b\u5230\u200b\u672c\u5730","text":"<pre><code>oc adm release mirror -a pull-secret.txt 4.8.36 --to-dir ./4.8.36_release\n</code></pre> <p>Info</p> <p>\u200b\u4e0b\u8f7d\u200b\u5176\u4ed6\u200b\u7248\u672c\u200b\u7684\u200b\u955c\u50cf\u200b\u8bf7\u200b\u4fee\u6539\u200b <code>4.8.36</code> \u200b\u7248\u672c\u53f7\u200b\uff0c<code>oc adm release mirror --help</code> \u200b\u67e5\u770b\u200b\u66f4\u200b\u591a\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b\u3002 </p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#_5","title":"\u6253\u5305\u200b\u955c\u50cf\u6587\u4ef6\u200b\u5939","text":"<pre><code>tar -cvf 4.8.36_release.tar 4.8.36_release\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#_6","title":"\u5236\u4f5c\u200b\u542f\u52a8\u76d8","text":"<pre><code>dd if=rhcos-4.8.14-x86_64-live.x86_64.iso of=&lt;dev/sdx&gt; status=progress\n</code></pre> <p>Note</p> <p>CoreOS \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b\u7684\u200b\u7248\u672c\u200b\u4e0d\u80fd\u200b\u9ad8\u8fc7\u200b\u73b0\u5728\u200b\u6b63\u5728\u200b\u5b89\u88c5\u200b\u7684\u200b OpenShift \u200b\u7684\u200b\u7248\u672c\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download/#_7","title":"\u53c2\u8003","text":"<ol> <li>Mirroring the OpenShift Container Platform image repository</li> <li>Installing with USB media</li> </ol>"},{"location":"openshift/%E5%AE%89%E8%A3%85/lb/","title":"\u914d\u7f6e\u200b\u8d1f\u8f7d\u200b\u5747\u8861","text":"<p>TODO</p>"},{"location":"oracle/sqlplus/","title":"sqlplus","text":"<pre><code># \u200b\u8dd1\u200b sql \u200b\u8bed\u53e5\u200b\necho exit | sqlplus user/pass@connect @scriptname\n</code></pre>"},{"location":"pandoc/","title":"ref","text":"<ul> <li>https://pandoc.org/MANUAL.html#variables-for-latex</li> <li>https://pandoc.org/MANUAL.html#metadata-blocks</li> <li>https://rsdoiel.github.io/blog/2020/11/11/Pandoc-Metadata.html</li> <li>https://pandoc.org/MANUAL.html#metadata-variables</li> <li>https://github.com/adobe-fonts/source-code-pro/tree/release</li> <li>https://github.com/adobe-fonts/source-han-sans</li> <li>https://github.com/adobe-fonts/source-sans</li> <li>LaTeX\u200b\u4ee3\u7801\u200b\uff1a \u200b\u4e0b\u5212\u7ebf\u200b\u4e0e\u200b\u5220\u9664\u200b\u7ebf\u200b \u2190 \u200b\u5229\u7528\u200b ulem \u200b\u5b8f\u5305\u200b</li> <li>https://www.latex-project.org/help/documentation/</li> <li>https://ctan.org/</li> <li>https://www.cnblogs.com/Undefined443/p/18156668</li> <li>https://www.tug.org/texlive/upgrade.html</li> <li>https://pandoc.org/MANUAL.html#defaults-files</li> <li>Ubuntu 20.04 \u200b\u5b89\u88c5\u200b\u5b8b\u4f53\u200b</li> <li>\u200b\u6b63\u786e\u200b\u6253\u5f00\u200bLaTeX\u200b\u7684\u200b\u59ff\u52bf\u200b</li> <li>Pandoc Syntax Highlighting Examples</li> </ul> <pre><code># markdown \u200b\u8f6c\u200b html\n# https://www.arthurkoziel.com/convert-md-to-html-pandoc/\n# https://github.com/danmar/cppcheck/pull/2360/files\npandoc demo07.md -o demo07.html  --toc --number-sections -s\n\npandoc demo01.md demo02.md -o demo02.pdf --pdf-engine=xelatex -V documentclass=\"ctexrep\" --table-of-contents --toc-depth=3 --number-sections  --include-in-header rewrite.tex --highlight-style pygments.theme\n\n# \\emph \u200b\u65e0\u6cd5\u200b\u5b9e\u73b0\u200b\u4e2d\u6587\u200b\u659c\u4f53\u200b\n\n# \u200b\u5e2e\u52a9\u200b\u624b\u518c\u200b\ntexdoc ulem\n\n\nfc-list :lang=zh\n\nsudo mkfontscale\nsudo mkfontdir\nsudo fc-cache -fv\n\npandoc \\\n    -V geometry:a4paper \\\n    -V geometry:margin=2cm \\\n    -V mainfont=\"Source Han Sans SC\" \\\n    -V sansfont=\"Source Code Pro\" \\\n    -V monofont=\"Source Code Pro\" \\\n    -V mathfont=\"Source Code Pro\" \\\n    -V fontsize=12pt \\\n    --pdf-engine=xelatex \\\n    --listings \\\n    --toc \\\n    --toc-depth=3 \\\n    --highlight-style=\"pygments.theme\" \\\n    --include-in-header=\"tex/inline_code.tex\" \\\n    -o demo.pdf \\\n    demo.md \n\npandoc \\\n    -V geometry:a4paper \\\n    -V geometry:margin=2cm \\\n    -V mainfont=\"Source Han Sans SC\" \\\n    -V sansfont=\"Source Code Pro\" \\\n    -V monofont=\"Source Code Pro\" \\\n    -V mathfont=\"Source Code Pro\" \\\n    -V fontsize=12pt \\\n    --pdf-engine=xelatex \\\n    --toc \\\n    --toc-depth=3 \\\n    -o demo.pdf \\\n    demo.md \n</code></pre>"},{"location":"podman/","title":"Podman","text":""},{"location":"podman/#login","title":"Login","text":"<pre><code># \u200b\u5ffd\u7565\u200b\u8bc1\u4e66\u200b\u9a8c\u8bc1\u200b\ndocker login --tls-verify=false\n</code></pre>"},{"location":"pxe/","title":"PXE","text":"<p>\u200b\u5feb\u901f\u200b\u64cd\u4f5c\u200b\u6307\u5f15\u200b\uff0c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\u5728\u200b Ubuntu 20.04 \u200b\u4e0b\u200b\u8fdb\u884c\u200b</p>"},{"location":"pxe/#_1","title":"\u5b89\u88c5\u200b\u6240\u200b\u9700\u200b\u8f6f\u4ef6","text":"<pre><code>apt install tftpd-hpa isc-dhcp-server nginx\n</code></pre>"},{"location":"pxe/#iso","title":"\u4e0b\u8f7d\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b ISO \u200b\u955c\u50cf","text":"<pre><code>rhel-server-7.9-x86_64-dvd.iso\nrhel-8.3-x86_64-dvd.iso\nKylin-Server-10-SP1-Release-Build20-20210518-x86_64.iso\nKylin-Server-10-SP2-x86-Release-Build09-20210524.iso\n</code></pre>"},{"location":"pxe/#_2","title":"\u5236\u4f5c\u200b\u672c\u5730\u200b\u6e90","text":"<p>\u200b\u4ee5\u200b\u5236\u4f5c\u200b RHEL 7.9 \u200b\u672c\u5730\u200b\u6e90\u4e3a\u4f8b\u200b\uff0c\u200b\u5176\u4ed6\u200b\u53d1\u884c\u7248\u200b\u505a\u6cd5\u200b\u7c7b\u4f3c\u200b </p> <pre><code>mkdir -p /mnt/rhel79\nmount rhel-server-7.9-x86_64-dvd.iso /mnt/rhel79\nmkdir -p /var/www/html/rhel79/x86_64 \ncp -r /mnt/rhel79 /var/www/html/rhel79/x86_64/base\n\n$ sudo vim /etc/nginx/sites-enabled/default\nserver {\n  listen 80 default_server;\n  root /var/www/html;\n  autoindex on;\n}\n</code></pre>"},{"location":"pxe/#kickstart","title":"\u5236\u4f5c\u200b Kickstart \u200b\u6587\u4ef6","text":"<p>\u200b\u53ef\u4ee5\u200b\u5148\u200b\u624b\u5de5\u200b\u5b89\u88c5\u200b\u597d\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u540e\u200b\uff0c\u200b\u4ece\u200b <code>/root/anaconda-ks.cfg</code> \u200b\u83b7\u53d6\u200b\u5230\u200b\u8be5\u200b\u6587\u4ef6\u200b</p> <pre><code>mkdir /var/www/html/kickstart\ncp rhel79.cfg /var/www/html/kickstart/\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/var/www/html\n\u251c\u2500\u2500 kickstart\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cdh.cfg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gbase.cfg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79.cfg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1.cfg\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2.cfg\n\u251c\u2500\u2500 rhel79\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u251c\u2500\u2500 rhel83\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u251c\u2500\u2500 rhel84\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u251c\u2500\u2500 v10sp1\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u2514\u2500\u2500 v10sp2\n    \u2514\u2500\u2500 x86_64\n        \u251c\u2500\u2500 addons\n        \u251c\u2500\u2500 base\n        \u2514\u2500\u2500 updates\n</code></pre>"},{"location":"pxe/#dhcp","title":"\u914d\u7f6e\u200b DHCP","text":"<p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u5148\u200b\u5c06\u200b\u672c\u673a\u200b IP \u200b\u914d\u7f6e\u200b\u6210\u200b <code>10.0.0.1</code></p> <pre><code>$ sudo vim /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\nlog-facility local7;\n\noption arch code 93 = unsigned integer 16;\n\nsubnet 10.0.0.0 netmask 255.255.255.0 {\n  range 10.0.0.10 10.0.0.50;\n  next-server 10.0.0.1;\n\n  class \"pxeclients\" {\n    match if substring (option vendor-class-identifier, 0, 9) = \"PXEClient\";\n\n    if option arch = 00:07 or option arch = 00:09 {\n      # x86-64 EFI BIOS\n      filename \"efi/x86_64/BOOTX64.EFI\";\n    } else if option arch = 00:0b {\n      # ARM64 aarch64 EFI BIOS\n      filename \"efi/aarch64/BOOTAA64.EFI\";\n    } else {\n      # Legacy non-EFI BIOS\n      filename \"bios/x86_64/pxelinux.0\";\n    }\n  }\n}\n\n$ sudo vim /etc/rsyslog.d/dhcp-relay.conf\nlocal7.* -/var/log/dhcp-relay.log\n\n# \u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\nsystemctl restart isc-dhcp-server\n</code></pre>"},{"location":"pxe/#tftp","title":"\u914d\u7f6e\u200b TFTP","text":"<pre><code>$ sudo vim /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/srv/tftp\"\nTFTP_ADDRESS=\":69\"\nTFTP_OPTIONS=\"--secure -vvv\"\n\n# \u200b\u521b\u5efa\u200b BIOS \u200b\u76ee\u5f55\u200b\nmkdir -p /srv/tftp/bios/x86_64\n\n# \u200b\u51c6\u5907\u200b pxelinux.0 \u200b\u548c\u200b vesamenu.c32 \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\ncp usr/share/syslinux/pxelinux.0 /srv/tftp/bios/x86_64/\ncp usr/share/syslinux/vesamenu.c32 /srv/tftp/bios/x86_64/\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz //srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/bios/x86_64/images/rhel79\n\n# \u200b\u51c6\u5907\u200b default \u200b\u6587\u4ef6\u200b\nmkdir /srv/tftp/bios/x86_64/pxelinux.cfg\ncp /var/www/html/rhel79/x86_64/base/isolinux/isolinux.cfg /srv/tftp/bios/x86_64/pxelinux.cfg/default\n$ sudo vim /srv/tftp/bios/x86_64/pxelinux.cfg/default\ndefault vesamenu.c32\ntimeout 600\n\nlabel local\n  menu label Boot from ^local drive\n  menu default\n  localboot 0xffff\n\nlabel rhel79\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel79.cfg quiet\n\nlabel rhel83\n  menu label ^Install Red Hat Enterprise Linux 8.3\n  kernel images/rhel83/vmlinuz\n  append initrd=images/rhel83/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel83.cfg quiet\n\nlabel v10sp1\n  menu label ^Install Kylin Linux Advanced Server V10 SP1\n  kernel images/v10sp1/vmlinuz\n  append initrd=images/v10sp1/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg quiet\n\nlabel v10sp2\n  menu label ^Install Kylin Linux Advanced Server V10 SP2\n  kernel images/v10sp2/vmlinuz\n  append initrd=images/v10sp2/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg quiet\n\n# \u200b\u521b\u5efa\u200b UEFI \u200b\u76ee\u5f55\u200b\nmkdir -p /srv/tftp/efi/x86_64\n\n# \u200b\u51c6\u5907\u200b BOOTX64.EFI\u3001grubx64.efi \u200b\u548c\u200b grub.cfg \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/BOOTX64.EFI /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grubx64.efi /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grub.cfg /srv/tftp/efi/x86_64/\nchmod 644 /srv/tftp/efi/x86_64/BOOTX64.EFI\nchmod 644 /srv/tftp/efi/x86_64/grubx64.efi\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/efi/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz /srv/tftp/efi/x86_64/images/rhel79/\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/efi/x86_64/images/rhel79/\n\n# \u200b\u51c6\u5907\u200b grub.cfg \u200b\u6587\u4ef6\u200b\n$ sudo vim /srv/tftp/efi/x86_64/grub.cfg\nset timeout=5\nset default=0\n\nmenuentry 'Install Red Hat Enterprise Linux 7.9' {\n  linuxefi efi/x86_64/images/rhel79/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/rhel79.cfg\n  initrdefi efi/x86_64/images/rhel79/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP1' {\n  linuxefi efi/x86_64/images/v10sp1/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg\n  initrdefi efi/x86_64/images/v10sp1/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP2' {\n  linuxefi efi/x86_64/images/v10sp2/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg\n  initrdefi efi/x86_64/images/v10sp2/initrd.img\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp\n\u251c\u2500\u2500 bios\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 images\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.0\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.cfg\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 vesamenu.c32\n\u2514\u2500\u2500 efi\n    \u2514\u2500\u2500 x86_64\n        \u251c\u2500\u2500 BOOTX64.EFI\n        \u251c\u2500\u2500 grub.cfg\n        \u251c\u2500\u2500 grubx64.efi\n        \u2514\u2500\u2500 images\n            \u251c\u2500\u2500 rhel79\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u251c\u2500\u2500 v10sp1\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u2514\u2500\u2500 v10sp2\n                \u251c\u2500\u2500 initrd.img\n                \u2514\u2500\u2500 vmlinuz\n</code></pre>"},{"location":"pxe/#_3","title":"\u67e5\u770b\u200b\u65e5\u5fd7","text":"<pre><code>tail -f /var/log/syslog | grep dhcp\ntail -f /var/log/syslog | grep tftp\ntail -f /var/log/nginx/access.log\n</code></pre>"},{"location":"pxe/#_4","title":"\u8c03\u8bd5","text":"<pre><code># \u200b\u6d4b\u8bd5\u200b\u955c\u50cf\u200b\u6e90\u200b\ncurl 10.0.0.1\ncurl 10.0.0.1/kickstart/rhel79.cfg\n\n# \u200b\u6d4b\u8bd5\u200b DHCP\nsudo nmap --script broadcast-dhcp-discover\nsudo nmap --script broadcast-dhcp-discover -e eth0\ndhcp-lease-list\n\n# \u200b\u6d4b\u8bd5\u200b TFTP\n$ tftp 10.0.0.1\ntftp&gt; get bios/x86_64/pxelinux.0\nReceived 27158 bytes in 0.1 seconds\ntftp&gt;\n</code></pre>"},{"location":"pxe/#_5","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>Change permissions for grub2/shim.efi</li> <li>How to set-up and configure a PXE Server</li> <li>Create a PXE bootserver to install multiple Linux distributions </li> <li>Understanding PXE Booting and Kickstart Technology</li> <li>Kickstart Server</li> <li>Preparing for a Network Installation</li> <li>Making the Kickstart File Available</li> <li>\u200b\u4f7f\u7528\u200bkickstart\u200b\u81ea\u52a8\u5316\u200b\u5b89\u88c5\u200b</li> <li>s14.\u200b\u8fd0\u7ef4\u200b\u81ea\u52a8\u5316\u200b\u4e4b\u200b\u7cfb\u7edf\u200b\u90e8\u7f72\u200b -- \u200b\u5b9e\u6218\u200b\u6848\u4f8b\u200b\uff1akickstart\u200b\u6587\u4ef6\u200b\u5236\u4f5c\u200b\u8fc7\u7a0b\u200b</li> <li>Sample kickstart partition example (RAID, LVM, Multipath, Simple,..)</li> <li>How to install and configure isc-dhcp-server</li> <li>Installing and Configuring TFTP Server on Ubuntu</li> <li>Need to set up yum repository for locally-mounted DVD on Red Hat Enterprise Linux 7</li> <li>\u200b\u81ea\u52a8\u5316\u200b\u88c5\u673a\u200b\u5de5\u5177\u200b-kickstart</li> <li>How do I configure syslinux to boot immediately</li> <li>dhcp-relay custom log file</li> <li>Kickstart Syntax Reference</li> <li>Kickstart Documentation</li> <li>error: ../../grub-core/net/net.c:1795:timeout reading initrd.img</li> <li>How To Install createrepo on Ubuntu 18.04</li> <li>How to Create Your Own Repositories for Packages</li> <li>PXELINUX</li> <li>01-\u200b\u81ea\u52a8\u5316\u200b\u88c5\u673a\u200b\u5de5\u5177\u200b-kickstart</li> <li>27.2. How Do You Perform a Kickstart Installation?</li> </ol>"},{"location":"pxe/advanced/","title":"\u9ad8\u7ea7\u200b\u4f7f\u7528","text":"<pre><code># \u200b\u8bfb\u53d6\u200b\u7f51\u7edc\u200b\u4e0a\u200b\u7684\u200b kickstart \u200b\u6587\u4ef6\u200b\u81ea\u52a8\u200b\u5b89\u88c5\u200b\ntitle Reinstall CentOS\nkernel /vmlinuz ro ip=192.168.254.44 netmask=255.255.255.0 gateway=192.168.254.220 dns=8.8.8.8 \\\n    hostname=somehost.tld \\\n    ks=http://192.168.1.1/ks/kickstart.ks\ninitrd /initrd.img\n</code></pre>"},{"location":"pxe/advanced/#links","title":"Links","text":"<ul> <li>Is there a way to run kickstart scripts on a pre-existing server?</li> </ul>"},{"location":"pxe/dhcp/","title":"DHCP","text":""},{"location":"pxe/dhcp/#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo apt install isc-dhcp-server\n</code></pre>"},{"location":"pxe/dhcp/#_2","title":"\u914d\u7f6e","text":"<p>\u200b\u53ea\u200b\u652f\u6301\u200b BIOS \u200b\u542f\u52a8\u200b\u7684\u200b\u914d\u7f6e\u200b\u793a\u4f8b\u200b</p> <pre><code># /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\n\nsubnet 10.0.0.0 netmask 255.255.255.0 {\n  range 10.0.0.10 10.0.0.50;\n  next-server 10.0.0.1;\n  filename \"pxelinux/pxelinux.0\";\n}\n</code></pre> <p>\u200b\u652f\u6301\u200b BIOS \u200b\u548c\u200b UEFI \u200b\u4e24\u79cd\u200b\u542f\u52a8\u200b\u65b9\u5f0f\u200b\u7684\u200b\u914d\u7f6e\u200b\u793a\u4f8b\u200b</p> <pre><code># /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\nlog-facility local7;\n\noption arch code 93 = unsigned integer 16;\n\nsubnet 10.0.0.0 netmask 255.255.255.0 {\n  range 10.0.0.10 10.0.0.50;\n  next-server 10.0.0.1;\n\n  class \"pxeclients\" {\n    match if substring (option vendor-class-identifier, 0, 9) = \"PXEClient\";\n\n    if option arch = 00:07 or option arch = 00:09 {\n      # x86-64 EFI BIOS\n      filename \"efi/x86_64/BOOTX64.EFI\";\n    } else if option arch = 00:0b {\n      # ARM64 aarch64 EFI BIOS\n      filename \"efi/aarch64/BOOTAA64.EFI\";\n    } else {\n      # Legacy non-EFI BIOS\n      filename \"bios/x86_64/pxelinux.0\";\n    }\n  }\n}\n</code></pre>"},{"location":"pxe/dhcp/#_3","title":"\u9a8c\u8bc1","text":"<p>\u200b\u6d4b\u8bd5\u200b\u662f\u5426\u200b\u53ef\u200b\u83b7\u53d6\u200b\u5230\u200b\u52a8\u6001\u200b IP</p> <pre><code>sudo nmap --script broadcast-dhcp-discover\n\n# \u200b\u6307\u5b9a\u200b\u7279\u5b9a\u200b\u7f51\u5361\u200b\nsudo nmap --script broadcast-dhcp-discover -e eth0\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b IP</p> <pre><code>dhcp-lease-list\n</code></pre>"},{"location":"pxe/dhcp/#_4","title":"\u67e5\u770b\u200b\u65e5\u5fd7","text":"<p>\u200b\u5f00\u542f\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u529f\u80fd\u200b</p> <pre><code># /etc/dhcp/dhcpd.conf\nlog-facility local7;\n</code></pre> <p>\u200b\u914d\u7f6e\u200b rsyslog \u200b\u6536\u96c6\u200b\u65e5\u5fd7\u200b</p> <pre><code># /etc/rsyslog.d/dhcp-relay.conf\nlocal7.* -/var/log/dhcp-relay.log\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u65e5\u5fd7\u200b</p> <pre><code>tail -f /var/log/syslog | grep dhcp\n</code></pre>"},{"location":"pxe/dhcp/#_5","title":"\u9ad8\u7ea7\u200b\u914d\u7f6e","text":"<p>\u200b\u53ea\u200b\u76d1\u542c\u200b\u6307\u5b9a\u200b\u7f51\u5361\u200b</p> <pre><code># /etc/default/isc-dhcp-server\nINTERFACESv4=\"eth0\"\n</code></pre>"},{"location":"pxe/dhcp/#_6","title":"\u53c2\u8003","text":"<ul> <li>dhcp-relay custom log file</li> </ul>"},{"location":"pxe/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":"<pre><code># \u200b\u5f53\u200b Kylin \u200b\u7b49\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5728\u200b PXE \u200b\u5b89\u88c5\u200b\u65f6\u200b\u51fa\u73b0\u200b\u5947\u602a\u200b\u7684\u200b\u95ee\u9898\u200b\u65f6\u200b\nvmware \u200b\u9009\u62e9\u200b Centos 7\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5185\u5b58\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b 4 GB \u200b\u5de6\u53f3\u200b\uff0c\u200b\u592a\u5927\u200b\u4e5f\u200b\u542f\u52a8\u200b\u4e0d\u200b\u6765\u200b\n\u200b\u6ce8\u610f\u200b vmware \u200b\u786c\u76d8\u200b\u7684\u200b\u7c7b\u578b\u200b\uff0cscsi \u200b\u7c7b\u578b\u200b\u624d\u80fd\u200b\u5728\u200b kickstart \u200b\u4f7f\u7528\u200b /dev/sda \u200b\u6765\u200b\u5212\u5206\u200b\u5206\u533a\u200b\nvmware \u200b\u9009\u62e9\u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7c7b\u578b\u200b\uff0c\u200b\u4f1a\u200b\u5173\u7cfb\u200b\u5230\u200b\u786c\u76d8\u200b\u7c7b\u578b\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4f4d\u6570\u200b\u7b49\u200b\uff0c\u200b\u5bf9\u200b PXE \u200b\u5b89\u88c5\u200b\u4f1a\u200b\u6709\u200b\u5f71\u54cd\u200b\uff0c\u200b\u6ce8\u610f\u200b\u9009\u62e9\u200b\u76f8\u8fd1\u200b\u7684\u200b\u3002\n</code></pre> <ol> <li>\u200b\u8bb0\u200b\u4e00\u6b21\u200bARM\u200b\u670d\u52a1\u5668\u200b(\u200b\u9cb2\u9e4f\u200b920)\u200b\u7684\u200bPXE\u200b\u6279\u91cf\u200b\u88c5\u673a\u200b\u9047\u5230\u200b\u7684\u200b\u5751\u200b</li> <li>Configuring active/backup bonded interfaces on CentOS Linux hosts</li> <li>Logging %pre during kickstart - logfile doesn't exist after boot</li> <li>Logging all the commands executed during a kickstart installation to file and screen</li> <li>RHEL \u2013 How to Identify Logical and Physical Network Interface Names While Installing the OS</li> <li>nmcli - command line means to delete all wifi / wlan0 connections</li> <li>zhangguanzhang/Installer</li> <li>How to execute script after system reboot by using kickstart</li> <li>Have a kickstart file run an independent script file from its %post section</li> <li>How to set hostname using hostnamectl during kickstart in Red Hat Enterprise Linux 7?</li> <li>How to set hostname during kickstart installation (CentOS/RHEL 5,6,7)</li> <li>CentOS 7 kickstart file set hostname with hostnamectl</li> <li>kickstart-tests</li> <li>Noppy/KickStart</li> <li>Why does kickstart installation of Red Hat Enterprise Linux fail with error \"Specified nonexistent disk sda in partition command\" ?</li> <li>Netboot - How to set a static IP</li> </ol>"},{"location":"pxe/tftp/","title":"TFTP","text":""},{"location":"pxe/tftp/#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo apt install tftpd-hpa\n</code></pre>"},{"location":"pxe/tftp/#_2","title":"\u914d\u7f6e","text":"<p>\u200b\u8bb0\u5f55\u200b\u4f20\u8f93\u200b\u65e5\u5fd7\u200b\uff0c<code>TFTP_OPTIONS</code> \u200b\u53c2\u6570\u200b\u52a0\u4e0a\u200b <code>-vvv</code></p> <pre><code># /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/srv/tftp\"\nTFTP_ADDRESS=\":69\"\nTFTP_OPTIONS=\"--secure -vvv\"\n</code></pre>"},{"location":"pxe/tftp/#pxe","title":"\u51c6\u5907\u200b PXE \u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6587\u4ef6","text":"<p>\u200b\u53ea\u200b\u652f\u6301\u200b BIOS \u200b\u65b9\u5f0f\u200b\u542f\u52a8\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6587\u4ef6\u200b</p> <pre><code># \u200b\u51c6\u5907\u200b pxelinux.0 \u200b\u548c\u200b vesamenu.c32 \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\nmkdir /srv/tftp/pxelinux\ncp usr/share/syslinux/pxelinux.0 /srv/tftp/pxelinux/\ncp usr/share/syslinux/vesamenu.c32 /srv/tftp/pxelinux/\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/pxelinux/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz /srv/tftp/pxelinux/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/pxelinux/images/rhel79\n\n# \u200b\u51c6\u5907\u200b default \u200b\u6587\u4ef6\u200b\nmkdir /srv/tftp/pxelinux/pxelinux.cfg\ncp /var/www/html/rhel79/x86_64/base/isolinux/isolinux.cfg /srv/tftp/pxelinux/pxelinux.cfg/default\nvim /srv/tftp/pxelinux/pxelinux.cfg/default\n\ndefault vesamenu.c32\ntimeout 600\n\nlabel local\n  menu label Boot from ^local drive\n  menu default\n  localboot 0xffff\n\nlabel rhel79\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel79.cfg quiet\n\nlabel rhel83\n  menu label ^Install Red Hat Enterprise Linux 8.3\n  kernel images/rhel83/vmlinuz\n  append initrd=images/rhel83/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel83.cfg quiet\n\nlabel v10sp1\n  menu label ^Install Kylin Linux Advanced Server V10 SP1\n  kernel images/v10sp1/vmlinuz\n  append initrd=images/v10sp1/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg quiet\n\nlabel v10sp2\n  menu label ^Install Kylin Linux Advanced Server V10 SP2\n  kernel images/v10sp2/vmlinuz\n  append initrd=images/v10sp2/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg quiet\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp\n\u2514\u2500\u2500 pxelinux\n    \u251c\u2500\u2500 images\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel83\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n    \u251c\u2500\u2500 pxelinux.0\n    \u251c\u2500\u2500 pxelinux.cfg\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n    \u2514\u2500\u2500 vesamenu.c32\n</code></pre> <p>\u200b\u540c\u65f6\u200b\u652f\u6301\u200b BIOS \u200b\u548c\u200b UEFI \u200b\u4e24\u79cd\u200b\u542f\u52a8\u200b\u65b9\u5f0f\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6587\u4ef6\u200b</p> <pre><code># \u200b\u521b\u5efa\u200b BIOS \u200b\u76ee\u5f55\u200b\nmkdir -p /srv/tftp/bios/x86_64\n\n# \u200b\u51c6\u5907\u200b pxelinux.0 \u200b\u548c\u200b vesamenu.c32 \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\ncp usr/share/syslinux/pxelinux.0 /srv/tftp/bios/x86_64/\ncp usr/share/syslinux/vesamenu.c32 /srv/tftp/bios/x86_64/\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz //srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/bios/x86_64/images/rhel79\n\n# \u200b\u51c6\u5907\u200b default \u200b\u6587\u4ef6\u200b\nmkdir /srv/tftp/bios/x86_64/pxelinux.cfg\ncp /var/www/html/rhel79/x86_64/base/isolinux/isolinux.cfg /srv/tftp/bios/x86_64/pxelinux.cfg/default\nvim /srv/tftp/bios/x86_64/pxelinux.cfg/default\n\ndefault vesamenu.c32\ntimeout 600\n\nlabel local\n  menu label Boot from ^local drive\n  menu default\n  localboot 0xffff\n\nlabel rhel79\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel79.cfg quiet\n\nlabel rhel83\n  menu label ^Install Red Hat Enterprise Linux 8.3\n  kernel images/rhel83/vmlinuz\n  append initrd=images/rhel83/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel83.cfg quiet\n\nlabel v10sp1\n  menu label ^Install Kylin Linux Advanced Server V10 SP1\n  kernel images/v10sp1/vmlinuz\n  append initrd=images/v10sp1/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg quiet\n\nlabel v10sp2\n  menu label ^Install Kylin Linux Advanced Server V10 SP2\n  kernel images/v10sp2/vmlinuz\n  append initrd=images/v10sp2/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg quiet\n\n# BIOS \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp/bios\n\u2514\u2500\u2500 x86_64\n    \u251c\u2500\u2500 images\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n    \u251c\u2500\u2500 pxelinux.0\n    \u251c\u2500\u2500 pxelinux.cfg\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n    \u2514\u2500\u2500 vesamenu.c32\n\n# \u200b\u521b\u5efa\u200b UEFI \u200b\u76ee\u5f55\u200b\nmkdir -p efi/x86_64\n\n# \u200b\u51c6\u5907\u200b BOOTX64.EFI\u3001grubx64.efi \u200b\u548c\u200b grub.cfg \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/BOOTX64.EFI /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grubx64.efi /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grub.cfg /srv/tftp/efi/x86_64/\nchmod 644 /srv/tftp/efi/x86_64/BOOTX64.EFI\nchmod 644 /srv/tftp/efi/x86_64/grubx64.efi\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/efi/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz /srv/tftp/efi/x86_64/images/rhel79/\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/efi/x86_64/images/rhel79/\n\n# \u200b\u51c6\u5907\u200b grub.cfg \u200b\u6587\u4ef6\u200b\nvim /srv/tftp/efi/x86_64/grub.cfg\n\nset timeout=5\nset default=0\n\nmenuentry 'Install Red Hat Enterprise Linux 7.9' {\n  linuxefi efi/x86_64/images/rhel79/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/rhel79.cfg\n  initrdefi efi/x86_64/images/rhel79/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP1' {\n  linuxefi efi/x86_64/images/v10sp1/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg\n  initrdefi efi/x86_64/images/v10sp1/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP2' {\n  linuxefi efi/x86_64/images/v10sp2/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg\n  initrdefi efi/x86_64/images/v10sp2/initrd.img\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp\n\u251c\u2500\u2500 bios\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 images\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.0\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.cfg\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 vesamenu.c32\n\u2514\u2500\u2500 efi\n    \u2514\u2500\u2500 x86_64\n        \u251c\u2500\u2500 BOOTX64.EFI\n        \u251c\u2500\u2500 grub.cfg\n        \u251c\u2500\u2500 grubx64.efi\n        \u2514\u2500\u2500 images\n            \u251c\u2500\u2500 rhel79\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u251c\u2500\u2500 v10sp1\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u2514\u2500\u2500 v10sp2\n                \u251c\u2500\u2500 initrd.img\n                \u2514\u2500\u2500 vmlinuz\n</code></pre>"},{"location":"pxe/tftp/#_3","title":"\u67e5\u770b\u200b\u65e5\u5fd7","text":"<pre><code>sudo tail -f /var/log/syslog | grep tftp\n</code></pre>"},{"location":"redis/","title":"redis","text":"<pre><code># Error jemalloc/jemalloc.h: No such file or directory when making Redis\n[redis-6.2.0]$ make distclean\n\n# \u200b\u5b89\u88c5\u200b\nwget https://download.redis.io/releases/redis-7.2.4.tar.gz\ntar -zxvf redis-7.2.4.tar.gz\ncd redis-7.2.4\nmake\nmake install PREFIX=/opt/www/redis/redis-7.2.4\n\n# \u200b\u7aef\u53e3\u200b\u548c\u200b\u5bc6\u7801\u200b\nredis-cli -p 7000 -a PASSWORD\n\n# \u200b\u521b\u5efa\u200b\u96c6\u7fa4\u200b\nredis-cli --cluster create 127.0.0.1:7000 127.0.0.1:7001 \\\n127.0.0.1:7002 127.0.0.1:7003 127.0.0.1:7004 127.0.0.1:7005 \\\n--cluster-replicas 1\n\n# \u200b\u67e5\u770b\u200b\u96c6\u7fa4\u200b\u72b6\u6001\u200b\nredis-cli -a PASSWORD 127.0.0.1:7000\n&gt; cluster nodes\n&gt; cluster info\n\n# \u200b\u4f5c\u4e3a\u200b master \u200b\u8282\u70b9\u200b\u52a0\u5165\u200b\u96c6\u7fa4\u200b\nredis-cli --cluster add-node 127.0.0.1:7006 127.0.0.1:7000\n\n# \u200b\u4f5c\u4e3a\u200b slave \u200b\u8282\u70b9\u200b\u52a0\u5165\u200b\u96c6\u7fa4\u200b\nredis-cli --cluster add-node 127.0.0.1:7006 127.0.0.1:7000 --cluster-slave\n\n# \u200b\u4ece\u200b\u96c6\u7fa4\u200b\u4e2d\u200b\u5220\u9664\u200b\u8282\u70b9\u200b\nredis-cli --cluster del-node 127.0.0.1:7000 `&lt;node-id&gt;`\n\n# however in order to remove a master node it must be empty.\n# \u200b\u5047\u8bbe\u200b 127.0.0.1:7003 \u200b\u662f\u200b\u5f85\u200b\u79fb\u9664\u200b\u7684\u200b master \u200b\u8282\u70b9\u200b\uff0c\u200b\u8981\u200b\u5148\u200b\u8f6c\u79fb\u200b slot \u200b\u5230\u200b\u5176\u4ed6\u200b\u8282\u70b9\u200b\nredis-cli --cluster reshard 127.0.0.1:7003\n\n# \u200b\u8282\u70b9\u200b\u4e3b\u52a8\u200b\u9000\u51fa\u200b\u96c6\u7fa4\u200b\nredis-cli 127.0.0.1:7003\n&gt; flushall\n&gt; cluster reset\n&gt; exit\n\n# \u200b\u6216\u8005\u200b\u6e05\u7406\u200b\u914d\u7f6e\u200b\u548c\u200b\u6570\u636e\u6587\u4ef6\u200b\nrm -rf data/*\nrm -rf conf/nodes.conf\nrm -rf dump.rdb\n\n# \u200b\u62a5\u9519\u200b [ERR] Not all 16384 slots are covered by nodes.\nredis-cli --cluster --fix 127.0.0.1:7000\n</code></pre>"},{"location":"redis/#links","title":"Links","text":"<ul> <li>Why does Redis Server not allow me to connect to a node?</li> <li>Hash Slot Resharding and Rebalancing for Redis Cluster</li> <li>Redis\u200b\u642d\u5efa\u200b\u96c6\u7fa4\u200b\u65f6\u62a5\u200b\u9519\u200b[ERR] Not all 16384 slots are covered by nodes.</li> <li>4.1 Exercise - Creating a Redis Cluster</li> <li>Scale with Redis Cluster</li> </ul>"},{"location":"rocketchat/","title":"RocketChat","text":"<p>\u200b\u79bb\u7ebf\u200b\u6ce8\u518c\u200b</p> <pre><code>docker exec -it mongodb bash\nmongosh\nuse rocketchat\ndb.rocketchat_settings.update({\"_id\":\"Show_Setup_Wizard\"}, {$set: {\"value\" : \"completed\"} });\n</code></pre> <ul> <li>https://github.com/RocketChat/Rocket.Chat/issues/31163#issuecomment-2292864632</li> </ul> <p>\u200b\u4e0b\u8f7d\u200b\u5ba2\u6237\u7aef\u200b</p> <ul> <li>Desktop &amp; Mobile Apps</li> </ul> <p>Logo \u200b\u8bbe\u8ba1\u200b</p> <ul> <li>chat \u200b\u56fe\u6807\u200b</li> </ul>"},{"location":"rocketchat/#refs","title":"refs","text":"<ul> <li>Add ARM support on Windows and Linux</li> <li>User status is broken</li> <li>feat: Support for chunked upload in rooms.upload/:rid #27168</li> </ul>"},{"location":"security/","title":"\u5b89\u5168","text":"<ul> <li>https://www.cvedetails.com/</li> </ul>"},{"location":"tools/mkdocs/","title":"mkdocs","text":""},{"location":"tools/mkdocs/#_1","title":"\u4f18\u5316","text":""},{"location":"tools/mkdocs/#toc","title":"TOC","text":"<p>\u200b\u652f\u6301\u200b\u4e2d\u6587\u200b\u951a\u70b9\u200b</p> <pre><code>markdown_extensions:\n  - toc:\n      permalink: true\n      slugify: !!python/object/apply:pymdownx.slugs.slugify\n        kwds:\n          case: lower\n          percent_encode: true\n</code></pre> <ul> <li>toc.follow not work with Chinese characters</li> </ul>"},{"location":"tools/mkdocs/#magiclink","title":"magiclink","text":"<p>URL \u200b\u81ea\u200b\u5b9a\u200b\u53d8\u6210\u200b\u8d85\u94fe\u63a5\u200b</p> <pre><code>markdown_extensions:\n  - pymdownx.magiclink\n</code></pre> <ul> <li>automatic hyperlink from url</li> </ul>"},{"location":"tools/mkdocs/#links","title":"Links","text":"<ul> <li>How to reorder pages without specifying the 'nav' attribute? #3482</li> </ul>"},{"location":"tools/owncloud/","title":"ownCloud","text":"<pre><code># install collabora\ndocker run -t -d -p 9980:9980 -e \"extra_params=--o:ssl.enable=false\" -e \"aliasgroup1=http://197.197.0.11:8080\" collabora/code\n\n# Quick Tryout ownCloud Docker\nhttps://www.collaboraonline.com/quick-tryout-owncloud-docker/\n\n# Docker Compose YAML File\nhttps://doc.owncloud.com/server/next/admin_manual/installation/docker/#docker-compose-yaml-file\n\n# install\nhttps://owncloud.com/collabora/\nhttps://www.collaboraonline.com/quick-tryout-owncloud-docker/\nhttps://doc.owncloud.com/server/next/admin_manual/installation/docker/\nhttps://docs.nextcloud.com/server/latest/admin_manual/office/example-docker.html\n\n# apps\nCollabora Online\nhttps://marketplace.owncloud.com/apps/richdocuments\n\nFiles clipboard\nhttps://marketplace.owncloud.com/apps/files_clipboard\n\nLDAP Integration\nhttps://marketplace.owncloud.com/apps/user_ldap\n\nExternal Storage: FTP\nhttps://marketplace.owncloud.com/apps/files_external_ftp\n\nExternal Storage: S3\nhttps://marketplace.owncloud.com/apps/files_external_s3\n\n# skeletondirectory\nhttps://doc.owncloud.com/server/next/admin_manual/configuration/files/default_files_configuration.html\nhttps://github.com/owncloud/core/blob/30eb65b975aae2a8a20bc548d9bac07a9a29a704/config/config.sample.php#L332C2-L332C19\nhttps://github.com/owncloud/core/issues/24519#issuecomment-218124950\n\n# Language Configuration\n# This parameter can be set in config/config.php\n'default_language' =&gt; 'zh_CN'\n\nhttps://doc.owncloud.com/server/next/admin_manual/configuration/server/language_configuration.html\n\n# Modify Session Time OwnCloud (for security)\nremember_login_cookie_lifetime\nsession_lifetime\nsession_keepalive\nhttps://help.univention.com/t/modify-session-time-owncloud-for-security/15482\n\n# Issue while installing custom fonts\nvolumes:\n  - ./fonts:/opt/cool/systemplate/usr/share/fonts/truetype\n  - ./fonts:/usr/share/fonts/truetype\nhttps://github.com/CollaboraOnline/online/issues/4555#issuecomment-2313407409\n\n# CODE Docker image\nhttps://sdk.collaboraonline.com/docs/installation/CODE_Docker_image.html#how-to-configure-docker-image\n</code></pre>"},{"location":"tools/phpstorm/","title":"PHPStorm","text":""},{"location":"tools/phpstorm/#_1","title":"\u8bbe\u7f6e","text":"<p>\u200b\u81ea\u52a8\u200b\u6362\u884c\u200b\uff0cView &gt; Active Editor &gt; Use Soft Wraps</p>"},{"location":"vmware/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"vmware/faq/#cheetsheet","title":"CheetSheet","text":"<pre><code># \u200b\u6dfb\u52a0\u200b\u78c1\u76d8\u200b\u540e\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u91cd\u542f\u200b\u865a\u62df\u673a\u200b\necho \"- - -\" | tee /sys/class/scsi_host/host*/scan\n\n# \u200b\u8c03\u6574\u200b NAT \u200b\u7f51\u6bb5\u200b\nSelect Edit &gt; Virtual Network Editor.\nSelect the host-only or NAT network.\nTo change the subnet IP address, type a new value in the Subnet IP text box.\n\n# \u200b\u4ece\u200b\u7f51\u7edc\u200b\u542f\u52a8\u200b\n\u200b\u5f00\u673a\u200b\uff0c\u200b\u6309\u200b F12\n</code></pre>"},{"location":"vmware/faq/#before-you-can-run-vmware-several-modules-must-be-compiled","title":"Before you can run VMware several modules must be compiled","text":"<p>\u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b</p> <pre><code>sudo vmware-modconfig --console --install-all\n</code></pre>"},{"location":"vmware/faq/#_2","title":"\u53c2\u8003","text":"<ul> <li>Before you can run VMware several modules must be compiled</li> <li>Change the Subnet Settings for a Host-Only or NAT Network on a Windows Host</li> <li>VMware\u200b\u7684\u200b\u865a\u62df\u200b\u7f51\u7edc\u200b\u7f16\u8f91\u5668\u200b\uff0c\u200b\u5728\u200b\u914d\u7f6e\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u6865\u63a5\u200b\u6a21\u5f0f\u200b\uff01</li> <li>Network Boot of Virtual Machines (1322)</li> </ul>"},{"location":"vmware/install/","title":"\u5b89\u88c5","text":""},{"location":"vmware/install/#_2","title":"\u4e0b\u8f7d\u200b\u4ecb\u8d28","text":"<p>https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html</p>"},{"location":"vmware/install/#_3","title":"\u6fc0\u6d3b\u7801","text":"<p>VMware Workstation 15.5 Pro </p> <pre><code>5F29M-48312-8ZDF9-A8A5K-2AM0Z\n5A02H-AU243-TZJ49-GTC7K-3C61\nFF35R-DLX13-48DRZ-66M5V-XQ294\nVY5DH-D0GE0-0814Z-AXZGT-Y3UA6\nAV102-05Y9H-M89MQ-5ZN79-MZHR4\n</code></pre> <p>VMware Workstation 17 Pro</p> <pre><code>JU090-6039P-08409-8J0QH-2YR7F\n4A4RR-813DK-M81A9-4U35H-06KND\nNZ4RR-FTK5H-H81C1-Q30QH-1V2LA\n4Y09U-AJK97-089Z0-A3054-83KLA\n4C21U-2KK9Q-M8130-4V2QH-CF810\nMC60H-DWHD5-H80U9-6V85M-8280D\nZA30U-DXF84-4850Q-UMMXZ-W6K8F\nAC590-2XW97-48EFZ-TZPQE-MYHEA\nYF39K-DLFE5-H856Z-6NWZE-XQ2XD\nAC15R-FNZ16-H8DWQ-WFPNV-M28E2\nCZ1J8-A0D82-489LZ-ZMZQT-P3KX6\nYA11K-6YE8H-H89ZZ-EXM59-Y6AR0\n</code></pre>"},{"location":"was/","title":"\u5b89\u88c5","text":""},{"location":"was/#_2","title":"\u540d\u8bcd\u89e3\u91ca","text":"<pre><code>IIM IBM Installation Manager \u200b\u5b89\u88c5\u200b\u548c\u200b\u914d\u7f6e\u200b WAS \u200b\u9700\u8981\u200b\u7528\u5230\u200b\uff0c\u200b\u8ddf\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6ca1\u6709\u200b\u5173\u7cfb\u200b \nWAS IBM WebSphere Application Server\nFP FixPack\nIHS IBM HTTP Server\nDmgr Deployment Manager\nNodeAgent \u200b\u5b89\u88c5\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u53d7\u200b\u7ba1\u7406\u200b\u8282\u70b9\u200b\uff08managed node\uff09\u200b\u4e0a\u200b\uff0cApplication Server \u200b\u4e5f\u200b\u5b89\u88c5\u200b\u5728\u200b\u8282\u70b9\u200b\u4e0a\u200b\u3002\n</code></pre>"},{"location":"was/#_3","title":"\u5b89\u88c5\u200b\u6b65\u9aa4","text":"<pre><code># \u200b\u4ecb\u8d28\u200b\u5b58\u653e\u200b\u76ee\u5f55\u200b\nmkdir /opt/IBM/soft/iim -p\nmkdir /opt/IBM/soft/was -p\n\n# \u200b\u4ecb\u8d28\u200b\u4f4d\u7f6e\u200b\n# tree /opt/IBM/soft\n.\n\u251c\u2500\u2500 iim\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 agent.installer.linux.gtk.x86_64_1.8.5000.20160506_1125.zip\n\u2514\u2500\u2500 was\n    \u251c\u2500\u2500 WAS_ND_V8.5.5_1_OF_3.zip\n    \u251c\u2500\u2500 WAS_ND_V8.5.5_2_OF_3.zip\n    \u2514\u2500\u2500 WAS_ND_V8.5.5_3_OF_3.zip\n\n# \u200b\u5b89\u88c5\u200b\u76ee\u5f55\u200b\nmkdir /opt/IBM/InstallationManager -p\nmkdir /opt/IBM/WebSphere/AppServer -p\nmkdir /wasdump\n\n# \u200b\u521b\u5efa\u200b\u8fd0\u884c\u200b\u7528\u6237\u200b\nuseradd wasadmin\nchown -R wasadmin:wasadmin /opt/IBM\nsudo su - wasadmin\n\n# !! \u200b\u8282\u70b9\u200b\u95f4\u200b\u662f\u200b\u901a\u8fc7\u200b\u4e3b\u673a\u540d\u200b\u8fdb\u884c\u200b\u901a\u8bb8\u200b\uff0c\u200b\u5fc5\u987b\u200b\u652f\u6301\u200b\n# \u200b\u5982\u200b\u901a\u8fc7\u200b\u914d\u7f6e\u200b /etc/hosts\n10.0.0.24 dmgr\n10.0.0.13 wasnode01\n</code></pre>"},{"location":"was/#was","title":"\u5b89\u88c5\u200b WAS","text":"<p>\u200b\u6240\u6709\u200b\u8282\u70b9\u200b\u90fd\u200b\u9700\u200b\u5b89\u88c5\u200b WAS\uff0c\u200b\u5305\u62ec\u200b DMGR \u200b\u8282\u70b9\u200b\u548c\u200b managed node\u3002</p> <pre><code># \u200b\u5b89\u88c5\u200b IIM\n/opt/IBM/soft/iim/userinstc -acceptLicense -installationDirectory /opt/IBM/InstallationManager -log ./log.xml -silent\n\n# \u200b\u67e5\u770b\u200b\u7248\u672c\u4fe1\u606f\u200b\n/opt/IBM/InstallationManager/eclipse/tools/imcl listAvailablePackages -repositories /opt/IBM/soft/was/repository.config -features -long\n\n# \u200b\u5b89\u88c5\u200b WAS\n/opt/IBM/InstallationManager/eclipse/tools/imcl install com.ibm.websphere.ND.v85_8.5.5000.20130514_1044 -repositories /opt/IBM/soft/was/repository.config -installationDirectory /opt/IBM/WebSphere/AppServer -acceptLicense\n\n# \u200b\u67e5\u770b\u200b\u7248\u672c\u200b\n# \u200b\u7f3a\u200b\u4f9d\u8d56\u200b\u65f6\u9700\u200b\u6267\u884c\u200b yum install libnsl\n/opt/IBM/WebSphere/AppServer/bin/versionInfo.sh\n</code></pre>"},{"location":"was/#dmgr","title":"\u5b89\u88c5\u200b DMGR","text":"<p>\u200b\u4ec5\u200b\u9700\u200b\u5728\u200b DMGR \u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b</p> <pre><code># \u200b\u5b89\u88c5\u200b DMGR\nyum install psmisc\n/opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh \\\n  -create \\\n  -profileName Dmgr01 \\\n  -profilePath /opt/IBM/WebSphere/AppServer/profiles/Dmgr01 \\\n  -templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/management \\\n  -nodeName DmgrNode01 \\\n  -personalCertValidityPeriod 10 \\\n  -hostName dmgr\n\n# \u200b\u5982\u200b\u5b89\u88c5\u200b\u5931\u8d25\u200b\uff0c\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u6e05\u7406\u200b\n# /opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh -delete -profileName Dmgr01\n# rm -rf /opt/IBM/WebSphere/AppServer/profiles/Dmgr01\n\n# \u200b\u542f\u52a8\u200b DMGR\uff08\u200b\u5728\u200b\u7ba1\u7406\u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b\uff09\n/opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin/startManager.sh\n</code></pre>"},{"location":"was/#nodeagent","title":"\u5b89\u88c5\u200b NodeAgent","text":"<p>\u200b\u4ec5\u200b\u9700\u200b\u5728\u200b NodeAgent \u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b</p> <pre><code># \u200b\u521b\u5efa\u200b NodeAgents\n/opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh \\\n  -create \\\n  -profileName AppSrv01 \\\n  -profilePath /opt/IBM/WebSphere/AppServer/profiles/AppSrv01 \\\n  -templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/managed \\\n  -nodeName AppSrv01 \\\n  -personalCertValidityPeriod 10 \\\n  -hostName wasnode01\n\n/opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh \\\n  -create \\\n  -profileName AppSrv02 \\\n  -profilePath /opt/IBM/WebSphere/AppServer/profiles/AppSrv02 \\\n  -templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/managed \\\n  -nodeName AppSrv02 \\\n  -personalCertValidityPeriod 10 \\\n  -hostName wasnode01\n\n# \u200b\u5982\u200b\u5b89\u88c5\u200b\u5931\u8d25\u200b\uff0c\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u6e05\u7406\u200b\n# /opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh -delete -profileName AppSrv01\n# rm -rf /opt/IBM/WebSphere/AppServer/profiles/AppSrv01\n\n# \u200b\u5411\u200b DMGR \u200b\u8282\u70b9\u200b\u6ce8\u518c\u200b\u672c\u200b\u8282\u70b9\u200b\n/opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin/addNode.sh dmgr 8879\n\n# addNode \u200b\u5c31\u200b\u4f1a\u200b\u81ea\u52a8\u200b NodeAgent \u200b\u6216\u8005\u200b\u624b\u5de5\u200b\u542f\u52a8\u200b\uff08\u200b\u5728\u200b\u53d7\u7ba1\u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b\uff09\n# /opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin/startNode.sh\n</code></pre>"},{"location":"was/#_4","title":"\u6d4b\u8bd5\u200b\u9a8c\u8bc1","text":"<p>\u200b\u6d4f\u89c8\u5668\u200b\u6253\u5f00\u200b http://{DMGR_IP}:9060/admin \u200b\u8f93\u5165\u200b\u4efb\u610f\u200b\u7528\u6237\u540d\u200b\u767b\u5f55\u200b\u3002</p>"},{"location":"was/#_5","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u65e5\u5fd7\u200b\u76ee\u5f55\u200b\n/opt/IBM/WebSphere/AppServer/profiles/AppSrv01/logs\n\n# \u200b\u67e5\u770b\u200b\u5e94\u7528\u200b\u9ed8\u8ba4\u200b\u7aef\u53e3\u200b\nMiddleware servers &gt; server01 &gt; Ports\n9080\n\n# \u200b\u8c03\u6574\u200b JVM \u200b\u5185\u5b58\u5927\u5c0f\u200b\nMiddleware servers &gt; server01 &gt; Process definition &gt; Java Virtual Machine\nInitial heap size 2048MB\nMaximum heap size 4096MB\n\n# \u200b\u8c03\u6574\u200b JVM \u200b\u7ebf\u7a0b\u200b\nMiddleware servers &gt; server01 &gt; Thread pools &gt; WebContainer\nMinimum Size  100\nMaximum Size  300\n\n# \u200b\u8c03\u8bd5\u200b JDBC \u200b\u7ebf\u7a0b\u200b\u6c60\u200b\nJDBC providers &gt; Oracle JDBC Driver (XA)\n\nContents of  /opt/IBM/WebSphere/AppServer/installableApps\nPerfServletApp.ear\n</code></pre>"},{"location":"was/#_6","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>\u200b\u7248\u672c\u4fe1\u606f\u200b</li> <li>Implementing IBM WebSphere Application Server clustering</li> <li>Encountering 'error while loading shared libraries: libnsl.so.1' using a new ITX installation</li> <li>Creating profiles in WAS 8559 on CentOS 7</li> <li>Deleted Profile shows in profile management tool of IBM Websphere</li> <li>WebSphere Application Server: \u200b\u6982\u8ff0\u200b</li> <li>was9\u200b\u5b89\u88c5\u200b\u4e0e\u200bwas8.5\u200b\u533a\u522b\u200b</li> <li>WebSphere 8.5 \u200b\u90e8\u7f72\u200bSmartbi</li> <li>DNS configuration with Ansible</li> <li>WebSphere: Generating Heap Dump using Jython</li> </ul>"},{"location":"windows/tools/","title":"\u5de5\u5177","text":""},{"location":"windows/tools/#_2","title":"\u7cfb\u7edf\u200b\u6fc0\u6d3b","text":"<ul> <li>Microsoft-Activation-Scripts</li> </ul>"},{"location":"windows/tools/#_3","title":"\u5f55\u5c4f\u200b\u622a\u56fe","text":"<ul> <li>LICEcap</li> </ul>"},{"location":"windows/wsl/","title":"WSL","text":""},{"location":"windows/wsl/#cheetsheet","title":"Cheetsheet","text":"<pre><code># View the list of distros and their current state:\nwsl.exe -l -v\n\n# Shutdown everything\nwsl.exe --shutdown\n\n# Terminate a specific distro:\nwsl.exe -t &lt;DistroName&gt;\n\n# Boot up a specific distro: \nwsl.exe -d &lt;DistroName&gt;\n</code></pre>"},{"location":"windows/wsl/#_1","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"windows/wsl/#wsl-ubuntu-error-0x80004002","title":"WSL Ubuntu error 0x80004002","text":"<p>\u200b\u4f7f\u7528\u200b Adminstrator \u200b\u6253\u5f00\u200b PowerShell\uff0c\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux\n</code></pre>"},{"location":"windows/wsl/#phpstorm-wsl2","title":"PHPStorm \u200b\u8bbf\u95ee\u200b WSL2 \u200b\u4e2d\u200b\u7684\u200b\u6587\u4ef6","text":"<pre><code>\\\\wsl$\\Ubuntu\\opt\\www\\invo\n</code></pre>"},{"location":"windows/wsl/#ubuntu","title":"\u65b0\u200b\u6807\u7b7e\u200b\u9ed8\u8ba4\u200b\u6253\u5f00\u200b Ubuntu","text":"<p>\u200b\u8bbe\u7f6e\u200b -&gt; \u200b\u542f\u52a8\u200b -&gt; \u200b\u9ed8\u8ba4\u200b\u914d\u7f6e\u6587\u4ef6\u200b -&gt; \u200b\u9009\u62e9\u200b Ubuntu -&gt; \u200b\u4fdd\u5b58\u200b</p>"},{"location":"windows/wsl/#wsl-hyper-v","title":"\u4ece\u200b WSL \u200b\u8bbf\u95ee\u200b Hyper-V \u200b\u6240\u200b\u521b\u5efa\u200b\u7684\u200b\u865a\u62df\u673a","text":"<pre><code>Get-NetIPInterface | where {$_.InterfaceAlias -eq 'vEthernet (WSL)' -or $_.InterfaceAlias -eq 'vEthernet (Default Switch)'} | Set-NetIPInterface -Forwarding Enabled\n</code></pre>"},{"location":"windows/wsl/#wsl-ip","title":"\u8bbe\u7f6e\u200b WSL \u200b\u9759\u6001\u200b IP","text":"<ol> <li>\u200b\u6253\u5f00\u200b\u6ce8\u518c\u8868\u200b\u7f16\u8f91\u5668\u200b\uff0c\u200b\u8f93\u5165\u200b <code>reg</code></li> <li>\u200b\u8fdb\u5165\u200b\u76ee\u5f55\u200b <code>\u200b\u8ba1\u7b97\u673a\u200b\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Lxss\\</code></li> <li>\u200b\u4fee\u6539\u200b WSL \u200b\u7f51\u6bb5\u200b\u4fe1\u606f\u200b <code>NatNetwork</code></li> <li>\u200b\u4fee\u6539\u200b WSL \u200b\u7f51\u5173\u200b IP \uff08\u200b\u5373\u200b\u4e3b\u673a\u200b\u7684\u200b IP \u200b\u5730\u5740\u200b\uff09<code>NatGatewayIpAddress</code></li> <li>\u200b\u4fee\u6539\u200b WSL Ubuntu \u200b\u7684\u200b IP <code>NatIpAddress</code></li> </ol>"},{"location":"windows/wsl/#_2","title":"\u53c2\u8003","text":"<ol> <li>Windows Subsystem for Linux Documentation</li> <li>WSL Ubuntu error 0x80004002</li> <li>Open a project stored in the WSL file system</li> <li>Connect Hyper-V VM from WSL (Ubuntu)</li> <li>Can I set a static ip address for WSL 2?</li> <li>Configuring WSL2 distro for static IPv4 address</li> <li>Rebooting Ubuntu on Windows without rebooting Windows?</li> </ol>"},{"location":"zookeeper/","title":"zookeeper","text":"<pre><code>echo srvr | nc 127.0.0.1 2181\n</code></pre>"},{"location":"zookeeper/#links","title":"links","text":"<ul> <li>Get zookeeper cluster status</li> <li>how to get current zookeeper cluster's member server list</li> </ul>"}]}