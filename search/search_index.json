{"config":{"lang":["ja"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u671b\u6625\u5929","text":""},{"location":"book/","title":"\u7535\u5b50\u4e66","text":"<ul> <li>Library Genesis</li> <li>SaltTiger</li> </ul>"},{"location":"mirror/","title":"Mirror","text":""},{"location":"mirror/#ubuntu","title":"Ubuntu","text":"<pre><code>sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list\nsed -i s@/security.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list\n</code></pre>"},{"location":"mirror/#alpine","title":"Alpine","text":"<pre><code>sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories\n</code></pre>"},{"location":"mirror/#nodejs","title":"Node.js","text":"<pre><code>npm config set registry https://registry.npmmirror.com\n</code></pre>"},{"location":"mirror/#composer","title":"Composer","text":"<pre><code># \u5168\u5c40\ncomposer config -g repo.packagist composer https://mirrors.aliyun.com/composer/\n\n# \u5f53\u524d\u9879\u76ee\ncomposer config repo.packagist composer https://mirrors.aliyun.com/composer/\n</code></pre>"},{"location":"mirror/#python","title":"Python","text":"<pre><code>pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/\n</code></pre>"},{"location":"mirror/#go","title":"Go","text":"<pre><code>export GOPROXY=https://proxy.golang.com.cn,direct\n</code></pre>"},{"location":"coredns/","title":"CoreOS","text":"<p>\u540c\u7c7b\u7684 DNS \u8fd8\u6709 dnsmasq\u3001bind \u7b49\u3002\u4e4b\u6240\u4ee5\u9009\u62e9 CoreDNS \u662f\u56e0\u4e3a\u5b83\u975e\u5e38\u8f7b\u4fbf\u548c\u6613\u7528\uff0c\u540c\u65f6\u4e5f\u662f\u4e3a\u4e86\u719f\u6089 Kubenetes \u7684\u8fd0\u4f5c\u3002</p>"},{"location":"coredns/client/","title":"\u5ba2\u6237\u7aef\u914d\u7f6e","text":""},{"location":"coredns/client/#kylin-v10","title":"Kylin V10","text":"<p>\u4fee\u6539 DNS \u914d\u7f6e</p> <pre><code># /etc/systemd/resolved.conf\n[Resolve]\nDNS=192.168.1.100\n</code></pre> <p>\u91cd\u542f\u670d\u52a1\u751f\u6548</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart systemd-resolved\n</code></pre>"},{"location":"coredns/install/","title":"\u5b89\u88c5","text":"<p>\u53ef\u4ee5\u4f7f\u7528 Docker \u6216\u8005\u4e8c\u8fdb\u5236\u65b9\u5f0f\u5b89\u88c5\uff0c\u4e2a\u4eba\u504f\u5411\u4e8e\u4f7f\u7528 Docker\uff0c\u5e76\u5728\u5b98\u65b9\u955c\u50cf\u57fa\u7840\u4e0a\u505a\u4e86\u5c01\u88c5\uff0c\u8be6\u89c1 aisuhua/docker-coredns\u3002</p>"},{"location":"coredns/install/#_2","title":"\u5b89\u88c5","text":"<pre><code>git clone git@github.com:aisuhua/docker-coredns.git\ncd docker-coredns\ndocker-compose up\n</code></pre>"},{"location":"coredns/install/#_3","title":"\u9a8c\u8bc1","text":"<pre><code>dig @127.0.0.1 master1.ocp1.example.com\ndig @127.0.0.1 -x 192.168.1.20\n</code></pre>"},{"location":"css/","title":"CSS","text":"<pre><code>/* \u4ee3\u7801\u8fc7\u957f\u81ea\u52a8\u6362\u884c\uff0c\u907f\u514d\u51fa\u73b0\u6a2a\u5411\u6eda\u52a8\u6761 */\npre code {\nword-wrap: break-word;\nwhite-space: pre-wrap;\n}\n/* \u9875\u9762\u7070\u8272\u6548\u679c */\nhtml{\nfilter: grayscale(100%) !important;\n}\n* {\nfilter: gray !important;\n}\n</code></pre>"},{"location":"docker/","title":"Docker","text":""},{"location":"docker/#container","title":"Container","text":"<pre><code># \u5220\u9664\u6240\u6709\u5bb9\u5668\uff0c\u9664\u4e86 php \u548c nginx\ndocker rm $(docker ps -a | grep -Ewv \"php|nginx\" | awk 'NR&gt;1 {print $1}')\n# \u5220\u9664\u6240\u6709\u5bb9\u5668\ndocker rm -vf $(docker ps -aq)\n</code></pre>"},{"location":"docker/#volume","title":"Volume","text":"<pre><code># \u5220\u9664\u6240\u6709\u6ca1\u5728\u4f7f\u7528\u7684\u5377\ndocker volume prune\n</code></pre>"},{"location":"docker/#image","title":"Image","text":"<pre><code># \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u955c\u50cf\ndocker images --format \"{{.ID}}\\t{{.Size}}\\t{{.Repository}}:{{.Tag}}\" | sort -k 2 -h\n\n# \u6e05\u7406 none \u955c\u50cf\ndocker rmi $(docker images --filter \"dangling=true\" -q --no-trunc)\n# \u5220\u9664\u6240\u6709\u955c\u50cf\uff0c\u9664\u4e86 php \u548c alpine\ndocker rmi $(docker images -a | grep -Ewv 'php|alpine' | awk {'print $1'})\n# \u6e05\u7a7a\u6240\u6709\u955c\u50cf\ndocker rmi -f $(docker images -aq)\n# \u5bfc\u51fa\u955c\u50cf\ndocker save nginx:latest | gzip &gt; nginx.gz\n\n# \u5bfc\u5165\u955c\u50cf\ndocker load -i nginx.gz\n</code></pre>"},{"location":"docker/#ssl","title":"SSL","text":"<pre><code># \u5355\u72ec\u7ed9\u4ed3\u5e93\u914d\u7f6e\u6839\u8bc1\u4e66\ncp ca.crt /etc/docker/certs.d/yourdomain.com:port/\n</code></pre>"},{"location":"docker/#backup","title":"Backup","text":"<pre><code># \u5b89\u88c5\nsudo curl -sSL https://raw.githubusercontent.com/BretFisher/docker-vackup/main/vackup &gt; /usr/local/bin/vackup\nsudo chmod +x /usr/local/bin/vackup\n\n# \u5907\u4efd\u548c\u6062\u590d volume\nvackup export VOLUME_NAME VOLUME_NAME.tar.gz\nvackup import VOLUME_NAME.tar.gz VOLUME_NAME\n</code></pre>"},{"location":"docker/#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Back Up and Share Docker Volumes with This Extension</li> <li>https://github.com/BretFisher/docker-vackup</li> </ul>"},{"location":"docker/install/","title":"\u5b89\u88c5","text":""},{"location":"docker/install/#_2","title":"\u56fd\u5185\u6e90","text":"<pre><code>cat &lt;&lt; EOF | sudo tee /etc/docker/daemon.json\n{\n  \"registry-mirrors\":[\n    \"https://hub-mirror.c.163.com\",\n    \"https://mirror.baidubce.com\",\n    \"https://qby02i3s.mirror.aliyuncs.com\",\n    \"https://docker.mirrors.ustc.edu.cn\"\n  ],\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  }\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n</code></pre>"},{"location":"docker/install/#_3","title":"\u6388\u6743\u666e\u901a\u7528\u6237","text":"<pre><code>sudo groupadd docker\nsudo usermod -aG docker $USER\n</code></pre>"},{"location":"docker/install/#_4","title":"\u6dfb\u52a0\u975e\u5b89\u5168\u955c\u50cf\u4ed3\u5e93","text":"<p><code>vim /etc/docker/daemon.json</code></p> <pre><code>{\n\"insecure-registries\" : [\n\"http://registry.example.com:5000\"\n]\n}\n</code></pre>"},{"location":"git/","title":"Git","text":""},{"location":"git/#_1","title":"\u81ea\u52a8\u63d0\u4ea4","text":"<pre><code># \u5b89\u88c5\nsudo wget https://raw.githubusercontent.com/aisuhua/git-auto/master/git-auto -o /usr/local/bin/git-auto\nsudo chmod a+x /usr/local/bin/git-auto\n\n# \u914d\u7f6e crontab \u81ea\u52a8\u63d0\u4ea4\n* * * * * /usr/local/bin/git-auto -d /opt/www/aisuhua.github.io -o -p\n</code></pre>"},{"location":"kubenetes/minikube/","title":"minikube","text":""},{"location":"kubenetes/minikube/#_1","title":"\u5b89\u88c5","text":"<pre><code>minikube start --driver=docker --container-runtime=containerd --image-mirror-country=cn\n</code></pre>"},{"location":"linux/","title":"Linux","text":""},{"location":"linux/#user","title":"User","text":"<pre><code># \u52a0\u5165\u7ec4\nusermod -a -G sudo suhua\n\n# sudo \u4e0d\u9700\u8981\u5bc6\u7801\uff0c\u5fc5\u987b\u5199\u5728 %sudo \u7ec4\u7684\u540e\u9762\nsuhua ALL=(ALL:ALL) NOPASSWD:ALL\n\n# \u5c06\u7528\u6237\u52a0\u5165\u7ec4\nsudo usermod -aG sudo username\n\n# \u5c06\u7528\u6237\u4ece\u7ec4\u4e2d\u5220\u9664\nsudo gpasswd --delete username sudo\n</code></pre>"},{"location":"linux/#vim","title":"Vim","text":"<pre><code># \u8bbe\u7f6e\u4e00\u4e2a tab \u7b49\u4e8e 2 \u4e2a\u7a7a\u683c\ncat &lt;&lt; EOF | sudo tee -a /etc/vim/vimrc.local\n\" one tab 2 space\nset tabstop=2\nset shiftwidth=2\nset autoindent\nset expandtab\nset softtabstop=0\nEOF\n# \u7f16\u8f91\u65f6\u51fa\u73b0 1H \u5947\u602a\u5b57\u7b26\nexport LANG=en.UTF-8\n</code></pre>"},{"location":"linux/#grep","title":"grep","text":"<pre><code># \u5305\u542b\u4efb\u610f\u4e00\u4e2a\u5173\u952e\u5b57\ngrep -E 'google|youtube' file.txt\n</code></pre>"},{"location":"linux/#generate-password","title":"generate password","text":""},{"location":"linux/concepts/","title":"\u6982\u5ff5\u7406\u89e3","text":"<p>\u5bf9\u4e00\u4e9b\u96be\u61c2\u6216\u8005\u5bb9\u6613\u6df7\u6dc6\u7684\u6982\u5ff5\u8fdb\u884c\u8bf4\u660e\u3002</p>"},{"location":"linux/concepts/#chroot","title":"chroot","text":"<p>chroot\uff0c\u5373 change root directory\uff08\u66f4\u6539 root \u76ee\u5f55\uff09\u3002\u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u7684\u76ee\u5f55\u7ed3\u6784\u90fd\u662f\u4ee5 /\uff0c\u5373\u4ee5\u6839 (root) \u5f00\u59cb\u7684\u3002\u800c\u5728\u4f7f\u7528 chroot \u4e4b\u540e\uff0c\u7cfb\u7edf\u7684\u76ee\u5f55\u7ed3\u6784\u5c06\u4ee5\u6307\u5b9a\u7684\u4f4d\u7f6e\u4f5c\u4e3a / \u4f4d\u7f6e\u3002</p> <ul> <li>Linux chroot \u547d\u4ee4\u8be6\u89e3</li> </ul>"},{"location":"linux/ftp/","title":"FTP","text":""},{"location":"linux/ftp/#lftp","title":"LFTP","text":"<p>\u4f7f\u7528</p> <pre><code>$ lftp 21.123.39.160 -u fhftp\nPassword:\nlftp fhftp@21.123.39.160:~&gt; put c.txt\n6 bytes transferred\nlftp fhftp@21.123.39.160:~&gt; ls\ntotal 1\n-rw-r-----   1 fhftp      fprs             6 Dec  7 12:41 c.txt\n</code></pre> <p>\u4e3b\u52a8\u6a21\u5f0f</p> <pre><code>set ftp:passive-mode off\n</code></pre> <p>\u5e38\u7528\u547d\u4ee4</p> <pre><code># ls \u672c\u5730\u76ee\u5f55\u5185\u5bb9\n!dir !dir /opt/www\n\n# \u5207\u6362\u672c\u5730\u76ee\u5f55\nlcd /tmp\n\n# \u67e5\u770b\u73b0\u5728\u6240\u5728\u672c\u5730\u4f4d\u7f6e\nlpwd\n</code></pre>"},{"location":"linux/iso/","title":"\u523b\u5f55\u5149\u76d8","text":""},{"location":"linux/iso/#ventoy","title":"Ventoy","text":"<p>\u521d\u59cb\u5316 U \u76d8</p> <pre><code>wget https://github.com/ventoy/Ventoy/releases/download/v1.0.91/ventoy-1.0.91-linux.tar.gz\ntar -zxvf ventoy-1.0.91-linux.tar.gz\ncd ventoy-1.0.91\nsudo sh Ventoy2Disk.sh -i /dev/sdX\n</code></pre> <p>\u5c06 iso \u6587\u4ef6\u62f7\u8d1d\u5230 U \u76d8</p> <pre><code>cp Win10_22H2_Chinese_Simplified_x64v1.iso /path/to/Ventory\n</code></pre> <p>\u63d2\u5165 U \u76d8\u540e\uff0c\u8fdb\u5165 BIOS\uff0c\u5173\u95ed Secure Boot \u5e76\u8bbe\u7f6e\u6210\u4ece U \u76d8\u542f\u52a8\u3002</p> <p>Note</p> <p>\u5fc5\u987b\u5173\u95ed Secure Boot \u529f\u80fd\uff0c\u5426\u5219\u4f1a\u51fa\u73b0 <code>Verification failed: (0x1A) Security Violation</code> \u62a5\u9519\u3002</p>"},{"location":"linux/iso/#_2","title":"\u53c2\u8003","text":"<ul> <li>https://www.ventoy.net/cn/doc_start.html#doc_linux_cli</li> <li>https://askubuntu.com/a/1456906</li> <li>https://github.com/pbatard/rufus</li> </ul>"},{"location":"linux/network/","title":"\u7f51\u7edc","text":""},{"location":"linux/network/#cheetsheet","title":"CheetSheet","text":"<p>\u67e5\u770b\u9ed8\u8ba4\u7f51\u5173</p> <pre><code>$ ip route | grep default\ndefault via 192.168.88.1 dev enp60s0 proto static metric 100\n</code></pre>"},{"location":"linux/pdf/","title":"PDF","text":""},{"location":"linux/pdf/#ghostscript","title":"ghostscript","text":"<p>\u5b89\u88c5</p> <pre><code>sudo apt install ghostscript\n</code></pre> <p>\u538b\u7f29</p> <p><pre><code># \u6309\u7535\u5b50\u4e66\u6bd4\u4f8b\u538b\u7f29\ngs -sDEVICE=pdfwrite -dCompatibilityLevel=1.0 -dPDFSETTINGS=/ebook -dNOPAUSE -dQUIET -dBATCH -sOutputFile=output.pdf input.pdf\n\n# \u81ea\u5b9a\u4e49\u5206\u8fa8\u7387\u4e3a 120 dpi\ngs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dDownsampleColorImages=true -dColorImageResolution=120 \\\n-dNOPAUSE -dBATCH -sOutputFile=output.pdf input.pdf\n</code></pre> \u53c2\u8003</p> <ul> <li>Reduce PDF File Size in Linux</li> <li>How can I reduce the file size of a scanned PDF file?</li> </ul>"},{"location":"linux/ssh/","title":"SSH","text":"<pre><code># Disable strict host key checking\nssh -o StrictHostKeyChecking=no user@remote-host </code></pre>"},{"location":"linux/alpine/","title":"Alpine","text":""},{"location":"linux/alpine/#_1","title":"\u5176\u4ed6","text":"<pre><code># \u8fd0\u884c Golang \u4e8c\u8fdb\u5236\u7a0b\u5e8f\napk add gcompat\n</code></pre>"},{"location":"mysql/","title":"MySQL","text":""},{"location":"mysql/#database","title":"Database","text":"<pre><code># \u521b\u5efa\u6570\u636e\u5e93\nCREATE DATABASE mydatabase CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/#_1","title":"\u521b\u5efa\u7528\u6237","text":"<pre><code># \u521b\u5efa\u7528\u6237\nCREATE USER 'username'@'172.16.%' IDENTIFIED BY 'password';\n# \u6388\u6743\nGRANT SELECT, INSERT, UPDATE, DELETE ON `dbname`.* TO 'username'@'172.16.%'\n# \u6388\u4e88\u7ba1\u7406\u5458\u6743\u9650\nGRANT ALL PRIVILEGES ON *.* TO 'username'@`172.16.%`;\n</code></pre>"},{"location":"mysql/utf8mb4/","title":"\u4fee\u6539\u5b57\u7b26\u96c6\u4e3a utf8mb4","text":"<p>\u4fee\u6539\u6570\u636e\u5e93\u7684\u5b57\u7b26\u96c6\u4e3a utf8mb4\uff0c\u8ba9\u5b83\u80fd\u5b58\u50a8 4 \u5b57\u8282\u7684 emoji \u8868\u60c5\u3002</p>"},{"location":"mysql/utf8mb4/#_1","title":"\u4fee\u6539\u6570\u636e\u5e93","text":"<pre><code>ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/utf8mb4/#_2","title":"\u4fee\u6539\u8868","text":"<pre><code>ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/utf8mb4/#_3","title":"\u81ea\u52a8\u751f\u6210\u4fee\u6539\u8bed\u53e5","text":"<p>\u521b\u5efa <code>gen_queries.sql</code> \u6587\u4ef6\uff0c\u8bf7\u7528\u5b9e\u9645\u7684\u6570\u636e\u5e93\u540d\u79f0\u66ff\u6362 <code>YOUR_DATABASE_NAME</code> </p> <pre><code>USE information_schema;\nSELECT CONCAT(\"ALTER DATABASE `\",table_schema,\"` CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\") AS _sql\nFROM `TABLES` WHERE table_schema LIKE \"YOUR_DATABASE_NAME\" AND TABLE_TYPE='BASE TABLE' GROUP BY table_schema UNION\nSELECT CONCAT(\"ALTER TABLE `\",table_schema,\"`.`\",table_name,\"` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\") AS _sql\nFROM `TABLES` WHERE table_schema LIKE \"YOUR_DATABASE_NAME\" AND TABLE_TYPE='BASE TABLE' GROUP BY table_schema, table_name UNION\nSELECT CONCAT(\"ALTER TABLE `\",`COLUMNS`.table_schema,\"`.`\",`COLUMNS`.table_name, \"` CHANGE `\",column_name,\"` `\",column_name,\"` \",data_type,\"(\",character_maximum_length,\") CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\",IF(is_nullable=\"YES\",\" NULL\",\" NOT NULL\"),\";\") AS _sql\nFROM `COLUMNS` INNER JOIN `TABLES` ON `TABLES`.table_name = `COLUMNS`.table_name WHERE `COLUMNS`.table_schema like \"YOUR_DATABASE_NAME\" and data_type in ('varchar','char') AND TABLE_TYPE='BASE TABLE' UNION\nSELECT CONCAT(\"ALTER TABLE `\",`COLUMNS`.table_schema,\"`.`\",`COLUMNS`.table_name, \"` CHANGE `\",column_name,\"` `\",column_name,\"` \",data_type,\" CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\",IF(is_nullable=\"YES\",\" NULL\",\" NOT NULL\"),\";\") AS _sql\nFROM `COLUMNS` INNER JOIN `TABLES` ON `TABLES`.table_name = `COLUMNS`.table_name WHERE `COLUMNS`.table_schema like \"YOUR_DATABASE_NAME\" and data_type in ('text','tinytext','mediumtext','longtext') AND TABLE_TYPE='BASE TABLE';\n</code></pre> <p>\u751f\u6210\u4fee\u6539\u8bed\u53e5 </p> <pre><code>mysql -u root -p -s &lt; gen_queries.sql &gt; queries.sql\n</code></pre> <p>\u6267\u884c\u4fee\u6539\u8bed\u53e5</p> <pre><code>mysql -u root -p &lt; queries.sql\n</code></pre>"},{"location":"mysql/utf8mb4/#_4","title":"\u53c2\u8003","text":"<ul> <li>How to easily convert utf8 tables to utf8mb4 in MySQL 5.5</li> <li>utf8mb4-convert</li> </ul>"},{"location":"openshift/","title":"OpenShift","text":""},{"location":"openshift/#pod","title":"Pod","text":"<pre><code># \u5f3a\u5236\u5220\u9664 Pod\nkubectl delete pod --grace-period=0 --force --namespace &lt;NAMESPACE&gt; &lt;PODNAME&gt;\n\n# \u5220\u9664\u5f53\u524d\u547d\u540d\u7a7a\u95f4\u4e0b\u6240\u6709 Terminating \u7684 Pod\nfor p in $(kubectl get pods | grep Terminating | awk '{print $1}'); do kubectl delete pod $p --grace-period=0 --force;done\n# \u5220\u9664\u96c6\u7fa4\u91cc\u6240\u6709 Terminating \u7684 Pod\nkubectl get pods --all-namespaces | awk '{if ($4==\"Terminating\") print \"oc delete pod \" $2 \" -n \" $1 \" --force --grace-period=0 \";}' | sh\n</code></pre>"},{"location":"openshift/audit/","title":"\u5ba1\u8ba1\u65e5\u5fd7","text":""},{"location":"openshift/audit/#_2","title":"\u53c2\u8003","text":"<ul> <li>Viewing audit logs</li> </ul>"},{"location":"openshift/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"openshift/faq/#_2","title":"\u5b89\u88c5\u548c\u5347\u7ea7","text":""},{"location":"openshift/faq/#mcp","title":"MCP \u81ea\u52a8\u66f4\u65b0\u5e76\u89e6\u53d1\u8282\u70b9\u91cd\u542f","text":"<p>\u5b98\u65b9\u5efa\u8bae MCP \u5e94\u8be5\u4fdd\u6301\u5f00\u542f\u72b6\u6001\u3002\u56e0\u4e3a\u4ece 4.7.4 \u7248\u672c\u5f00\u59cb\uff0capi-server \u8bc1\u4e66\u81ea\u52a8\u8f6e\u8f6c\u4e0d\u4f1a\u518d\u89e6\u53d1\u8282\u70b9\u91cd\u542f\uff0c\u800c\u5173\u95ed\u81ea\u52a8\u66f4\u65b0\u5219\u4f1a\u5bfc\u81f4\u8bc1\u4e66\u65e0\u6cd5\u6b63\u5e38\u66f4\u65b0\u3002</p> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5f00\u542f MCP \u81ea\u52a8\u66f4\u65b0</p> <pre><code>oc patch --type merge machineconfigpool/master -p '{\"spec\":{\"paused\":false}}'\noc patch --type merge machineconfigpool/worker -p '{\"spec\":{\"paused\":false}}'\n</code></pre> <ul> <li>Understand CA cert auto renewal in Red Hat OpenShift 4</li> <li>Disabling the Machine Config Operator from automatically rebooting by using the console</li> </ul>"},{"location":"openshift/faq/#coreos-hostname","title":"CoreOS \u91cd\u542f\u540e hostname \u4e0d\u5bf9","text":"<p>\u5728\u6dfb\u52a0 worker \u8282\u70b9\u65f6\uff0c\u867d\u7136\u4f7f\u7528 <code>hostnamectl set-hostname</code> \u8bbe\u7f6e\u4e86 hostname\uff0c\u4f46\u91cd\u542f\u540e\u4e3b\u673a\u540d\u53d8\u6210\u4e86 localhost\u3002</p> <p>\u53ef\u4ee5\u5728 ignition \u6587\u4ef6\u91cc\u6dfb\u52a0\u4e3b\u673a\u540d\u89e3\u51b3\u8be5\u95ee\u9898</p> <pre><code>$ cat worker.ign | jq . &gt; worker1.ocp1.example.com.ign\n$ cat worker1.ocp1.example.com.ign\n{\n\"ignition\": {\n\"config\": {\n\"merge\": [\n{\n\"source\": \"https://api-int.test.example.com:22623/config/worker\"\n}\n]\n},\n    \"security\": {\n\"tls\": {\n\"certificateAuthorities\": [\n{\n\"source\": \"data:text/plain;charset=utf-8;base64,LS0tLS1CR....\"\n}\n]\n}\n},\n    \"version\": \"3.1.0\"\n},\n  \"storage\": {\n\"files\": [\n{\n\"path\": \"/etc/hostname\",\n        \"contents\": {\n\"source\": \"data:,worker1.ocp1.example.com\"\n},\n        \"mode\": 420\n}\n]\n}\n}\n</code></pre> <ul> <li>Hostname can not persist when installing RHCOS</li> <li>How to configure persistent hostname when creating RHCOS in OpenShift 4.6 or later?</li> </ul>"},{"location":"openshift/faq/#the-cluster-operator-image-registry-is-degraded","title":"the cluster operator image-registry is degraded","text":"<p>\u5347\u7ea7\u65e0\u6cd5\u6b63\u5e38\u8fdb\u884c\uff0c\u5e76\u957f\u65f6\u95f4\u505c\u7559\u5728\u4ee5\u4e0b\u72b6\u6001</p> <pre><code>$ oc get clusterversion -o wide\nNAME      VERSION                                   AVAILABLE   PROGRESSING   SINCE   STATUS\nversion   4.5.0-0.nightly-s390x-2020-06-29-163732   True        False         15h     Error while reconciling 4.5.0-0.nightly-s390x-2020-06-29-163732: the cluster operator image-registry is degraded\n</code></pre> <p>\u67e5\u770b co \u72b6\u6001</p> <pre><code>$ oc describe co image-registry\nImagePrunerDegraded: Job has reached the specified backoff limit\n</code></pre> <p>\u89e3\u51b3\u65b9\u6cd5</p> <pre><code>oc patch imagepruner.imageregistry/cluster --patch '{\"spec\":{\"suspend\":true}}' --type=merge\noc -n openshift-image-registry delete jobs --all\n</code></pre> <ul> <li>ImagePrunerDegraded error stalling upgrade</li> <li>OpenShift v4.x - ImagePrunerDegraded: Job has reached the specified backoff limit</li> </ul>"},{"location":"openshift/faq/#pod","title":"Pod","text":""},{"location":"openshift/faq/#no-space-left-on-device","title":"no space left on device","text":"<p>Pod \u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\uff0c\u4e00\u76f4\u5904\u4e8e ContainerCreating \u72b6\u6001\uff0c\u67e5\u770b\u4e8b\u4ef6\u53d1\u73b0\u62a5 <code>no space left on device</code> \u9519\u8bef</p> <pre><code>$ oc describe pods mysql8.0.28-nacos3-67965c8f4-6r4st\nEvents:\n  Type     Reason       Age   From               Message\n  ----     ------       ----  ----               -------\n  Normal   Scheduled    79s   default-scheduler  Successfully assigned zfqs/mysql8.0.28-nacos3-67965c8f4-6r4st to worker8.dev3.example.com\n  Warning  FailedMount  79s   kubelet            MountVolume.SetUp failed for volume \"kube-api-access-dp55p\" : write /var/lib/kubelet/pods/eda464b0-1376-4edb-b0ea-c495f18bbb9e/volumes/kubernetes.io~projected/kube-api-access-dp55p/..2023_05_29_08_16_36.1470493620/ca.crt: no space left on device\n  Warning  FailedMount  78s   kubelet            MountVolume.SetUp failed for volume \"kube-api-access-dp55p\" : write /var/lib/kubelet/pods/eda464b0-1376-4edb-b0ea-c495f18bbb9e/volumes/kubernetes.io~projected/kube-api-access-dp55p/..2023_05_29_08_16_37.1796074709/service-ca.crt: no space left on device\n</code></pre> <p>\u53d1\u73b0\u662f <code>limit.memory</code> \u548c <code>request.memory</code> \u7684\u5355\u4f4d\u5199\u9519\u4e86</p> <pre><code>resources:\nrequests:\nmemory: 256m\ncpu: 100m\nlimits:\nmemory: 512m\ncpu: 100m\n</code></pre> <p>\u5c06 memory \u7684\u5355\u4f4d\u6539\u6210 <code>Mi</code> \u5373\u53ef</p> <p><code>yaml hl_lines=\"3,6\" resources:   requests:     memory: 256Mi     cpu: 100m   limits:     memory: 512Mi     cpu: 100m</code></p> <ul> <li>https://github.com/orgs/strimzi/discussions/6399#discussioncomment-2224453</li> </ul>"},{"location":"openshift/init/","title":"\u521d\u59cb\u5316","text":""},{"location":"openshift/init/#_2","title":"\u65b0\u7528\u6237\u4e0d\u80fd\u521b\u5efa\u9879\u76ee","text":"<pre><code>oc patch clusterrolebinding.rbac self-provisioners -p '{\"subjects\": null}'\noc patch clusterrolebinding.rbac self-provisioners -p '{\"metadata\": {\"annotations\": {\"rbac.authorization.kubernetes.io/autoupdate\": \"false\" }}}'\n</code></pre> <ul> <li>Disabling project self-provisioning</li> </ul>"},{"location":"openshift/registry/","title":"\u955c\u50cf\u4ed3\u5e93","text":"<ol> <li>Using an external registry with OpenShift 4</li> <li>Adding certificate authorities to the cluster</li> </ol>"},{"location":"openshift/install/","title":"\u5b89\u88c5","text":"<p>\u672c\u6587\u8bb0\u5f55\u4e86\u5728\u79bb\u7ebf\u73af\u5883\u4e0b\u5b89\u88c5 OpenShift 4.8.36 \u7684\u5b8c\u6574\u6b65\u9aa4\u3002</p>"},{"location":"openshift/install/#_2","title":"\u524d\u63d0","text":"<p>\u8981\u5b8c\u6210\u5b89\u88c5 OpenShift\uff0c\u5fc5\u987b\u8981\u6709 DNS\u3001Chrony\u3001\u8d1f\u8f7d\u5747\u8861\u5668\uff08HAProxy\u3001Nginx \u7b49\uff09\u3001\u955c\u50cf\u4ed3\u5e93\uff08Harbor\uff09\u3002</p> <ol> <li>CoreDNS</li> </ol>"},{"location":"openshift/install/#_3","title":"\u76f8\u5173\u8d44\u6e90","text":"<ul> <li>\u4e0b\u8f7d\u5b89\u88c5\u6587\u4ef6 https://mirror.openshift.com/pub/openshift-v4/</li> <li>\u67e5\u770b\u6700\u65b0\u53d1\u884c\u7248 https://openshift-release.apps.ci.l2s4.p1.openshiftapps.com/</li> <li>\u67e5\u770b\u5347\u7ea7\u8def\u5f84 https://access.redhat.com/labs/ocpupgradegraph/update_path</li> <li>\u67e5\u770b\u4e0d\u540c\u7248\u672c\u4e4b\u95f4\u7684\u53d8\u5316 https://openshift-release.apps.ci.l2s4.p1.openshiftapps.com/releasestream/4-stable/release/4.8.56?from=4.8.36</li> </ul>"},{"location":"openshift/install/dns/","title":"\u6dfb\u52a0\u57df\u540d\u89e3\u6790","text":"<p>\u4e0b\u9762\u4ee5 CoreDNS \u4e3a\u4f8b\uff0c\u5176\u4ed6 DNS \u505a\u6cd5\u7c7b\u4f3c\u3002 </p>"},{"location":"openshift/install/dns/#_2","title":"\u6b63\u5411\u89e3\u6790","text":"<p>\u65b0\u5efa db.ocp1.example.com \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b</p> <pre><code>$ORIGIN ocp1.example.com.\n@   3600 IN SOA example.com. example.com. (\n                2017042745 ; serial\n                7200       ; refresh (2 hours)\n                3600       ; retry (1 hour)\n                1209600    ; expire (2 weeks)\n                3600       ; minimum (1 hour)\n                )\n\n    3600 IN NS ns.example.com.\n\napi         IN A     192.168.1.10\napi-int     IN A     192.168.1.10\n\n*.apps      IN A     192.168.1.10\n\nbootstrap   IN A     192.168.1.10\n\nmaster1     IN A     192.168.1.20\nmaster2     IN A     192.168.1.21\nmaster3     IN A     192.168.1.22\n\nworker1     IN A     192.168.1.30\nworker2     IN A     192.168.1.31\nworker3     IN A     192.168.1.32\n</code></pre>"},{"location":"openshift/install/dns/#_3","title":"\u53cd\u5411\u89e3\u6790","text":"<p>\u65b0\u5efa db.1.168.192 \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b</p> <pre><code>@   3600 IN SOA example.com. example.com. (\n                2017042745 ; serial\n                7200       ; refresh (2 hours)\n                3600       ; retry (1 hour)\n                1209600    ; expire (2 weeks)\n                3600       ; minimum (1 hour)\n                )\n\n    3600 IN NS ns.example.com.\n\n10     IN PTR     api.ocp1.example.com.\n10     IN PTR     api-int.ocp1.example.com.\n20     IN PTR     master1.ocp1.example.com.\n21     IN PTR     master2.ocp1.example.com.\n22     IN PTR     master3.ocp1.example.com.\n30     IN PTR     worker1.ocp1.example.com.\n31     IN PTR     worker2.ocp1.example.com.\n32     IN PTR     worker3.ocp1.example.com.\n</code></pre>"},{"location":"openshift/install/dns/#corefile","title":"\u914d\u7f6e\u5230 Corefile","text":"<pre><code>.:53 {\n    log\n    errors\n    cache\n\n    file db.ocp1.example.com ocp1.example.com\n    file db.1.168.192 1.168.192.in-addr.arpa\n}\n</code></pre>"},{"location":"openshift/install/dns/#_4","title":"\u68c0\u67e5\u914d\u7f6e","text":"<p>\u8fd0\u884c\u4ee5\u4e0b\u811a\u672c\u68c0\u67e5 DNS \u662f\u5426\u90fd\u914d\u7f6e\u6b63\u786e</p> <pre><code>#/bin/bash\nDNS_IP=127.0.0.1\n\ndeclare -A arr\narr[api.ocp1.example.com]=192.168.1.10\narr[api-int.ocp1.example.com]=192.168.1.10\narr[a.apps.ocp1.example.com]=192.168.1.10\narr[master1.ocp1.example.com]=192.168.1.20\narr[master2.ocp1.example.com]=192.168.1.21\narr[master3.ocp1.example.com]=192.168.1.22\narr[worker1.ocp1.example.com]=192.168.1.30\narr[worker2.ocp1.example.com]=192.168.1.31\narr[worker3.ocp1.example.com]=192.168.1.32\n\nfor key in \"${!arr[@]}\"; do ip=$(dig @$DNS_IP +short $key)\nif [ \"$ip\" != \"${arr[$key]}\" ]; then\necho \"$key is ${arr[$key]}, result $ip\"\nfi\ndomain=$(dig @$DNS_IP +short -x ${arr[$key]})\nif [[ $key == a.* ]]; then\ncontinue\nfi\nif [[ $key == api* ]]; then\ndomains=($domain)\nif [[ ! \"${domains[*]}\" =~ \"${key}\" ]]; then\necho \"${arr[$key]} is $key, result ${array[*]}\"\nfi\nelse\nif [[ ! \"$domain\" == \"$key.\" ]]; then\necho \"${arr[$key]} is $key, result $domain\"\nfi\nfi\ndone\n</code></pre>"},{"location":"openshift/install/download/","title":"\u51c6\u5907\u5b89\u88c5\u4ecb\u8d28","text":""},{"location":"openshift/install/download/#_2","title":"\u9700\u8981\u7684\u4ecb\u8d28","text":"<ol> <li>OpenShift \u5b89\u88c5\u811a\u672c openshift-install-linux-4.8.36.tar.gz</li> <li>OpenShift oc \u5ba2\u6237\u7aef openshift-client-linux-4.8.36.tar.gz </li> <li>CoreOS \u5b89\u88c5\u5149\u76d8 rhcos-4.8.14-x86_64-live.x86_64.iso</li> <li>machine configs \u751f\u6210\u5de5\u5177 butane</li> <li>OpenShift \u5b89\u88c5\u955c\u50cf 4.8.36_releases</li> <li>\u4e00\u4e2a 4G+ \u7684 U \u76d8\uff0c\u7528\u4e8e\u523b\u5f55\u5b89\u88c5\u5149\u76d8</li> </ol> <p>\u4ee5\u4e0a\u4ecb\u8d28\uff0c\u9664\u4e86\u4e0b\u8f7d OpenShift \u5b89\u88c5\u955c\u50cf\u9700\u8981\u767b\u5f55\uff0c\u5176\u4ed6\u4ecb\u8d28\u90fd\u53ef\u4ee5\u5728\u516c\u7f51\u76f4\u63a5\u4e0b\u8f7d\u3002</p>"},{"location":"openshift/install/download/#_3","title":"\u4e0b\u8f7d\u5b89\u88c5\u955c\u50cf","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u5c06\u4e0b\u8f7d OpenShift \u5b89\u88c5\u955c\u50cf\u5230\u672c\u5730\u78c1\u76d8\uff0c\u955c\u50cf\u6bd4\u8f83\u5927\uff0c\u8bf7\u9884\u7559\u81f3\u5c11 20GB \u7a7a\u95f4\u3002</p> <p>Note</p> <p>\u56e0\u4e3a\u9700\u8981\u4ece\u7ea2\u5e3d\u5b98\u7f51\u4e0b\u8f7d\u955c\u50cf\uff0c\u5982\u679c\u7528\u4e2a\u4eba\u7535\u8111\u4e0b\u8f7d\uff0c\u901f\u5ea6\u4f1a\u6bd4\u8f83\u6162\uff0c\u800c\u4e14\u7ecf\u5e38\u4e2d\u65ad\uff0c \u6240\u4ee5\u5efa\u8bae\u4f7f\u7528\u56fd\u5185\u7684\u4e91\u670d\u52a1\u5668\uff08\u4f8b\u5982\uff1a\u963f\u91cc\u4e91\u3001\u817e\u8baf\u4e91\u7b49\uff09\u8fdb\u884c\u4e0b\u8f7d\u3002</p>"},{"location":"openshift/install/download/#oc","title":"\u5b89\u88c5 oc \u5ba2\u6237\u7aef","text":"<pre><code>tar -zxvf openshift-client-linux-4.8.36.tar.gz -C /usr/local/bin oc kubectl\n</code></pre>"},{"location":"openshift/install/download/#pull-secerttxt","title":"\u83b7\u53d6 pull-secert.txt","text":"<p>\u6253\u5f00 https://console.redhat.com/openshift/install/pull-secret \u9875\u9762\uff0c\u4f7f\u7528\u8d26\u53f7\u767b\u5f55\u540e\u4e0b\u8f7d\u3002\u5982\u679c\u4f60\u6ca1\u6709\u8d26\u53f7\u53ef\u81ea\u884c\u6ce8\u518c\u3002</p>"},{"location":"openshift/install/download/#_4","title":"\u5c06\u955c\u50cf\u540c\u6b65\u5230\u672c\u5730","text":"<pre><code>oc adm release mirror -a pull-secret.txt 4.8.36 --to-dir ./4.8.36_release\n</code></pre> <p>Info</p> <p>\u4e0b\u8f7d\u5176\u4ed6\u7248\u672c\u7684\u955c\u50cf\u8bf7\u4fee\u6539 <code>4.8.36</code> \u7248\u672c\u53f7\uff0c<code>oc adm release mirror --help</code> \u67e5\u770b\u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\u3002 </p>"},{"location":"openshift/install/download/#_5","title":"\u6253\u5305\u955c\u50cf\u6587\u4ef6\u5939","text":"<pre><code>tar -cvf 4.8.36_release.tar 4.8.36_release\n</code></pre>"},{"location":"openshift/install/download/#_6","title":"\u5236\u4f5c\u542f\u52a8\u76d8","text":"<pre><code>dd if=rhcos-4.8.14-x86_64-live.x86_64.iso of=&lt;dev/sdx&gt; status=progress\n</code></pre> <p>Note</p> <p>CoreOS \u5b89\u88c5\u955c\u50cf\u7684\u7248\u672c\u4e0d\u80fd\u9ad8\u8fc7\u73b0\u5728\u6b63\u5728\u5b89\u88c5\u7684 OpenShift \u7684\u7248\u672c\u3002</p>"},{"location":"openshift/install/download/#_7","title":"\u53c2\u8003","text":"<ol> <li>Mirroring the OpenShift Container Platform image repository</li> <li>Installing with USB media</li> </ol>"},{"location":"openshift/install/lb/","title":"\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861","text":"<p>TODO</p>"},{"location":"podman/","title":"Podman","text":""},{"location":"podman/#login","title":"Login","text":"<pre><code># \u5ffd\u7565\u8bc1\u4e66\u9a8c\u8bc1\ndocker login --tls-verify=false\n</code></pre>"},{"location":"security/","title":"\u5b89\u5168","text":"<ul> <li>https://www.cvedetails.com/</li> </ul>"},{"location":"ssl/import/","title":"\u5bfc\u5165\u8bc1\u4e66","text":""},{"location":"ssl/import/#ubuntu","title":"Ubuntu","text":"<pre><code>sudo cp local-ca.crt /usr/local/share/ca-certificates\nsudo update-ca-certificates\n</code></pre>"},{"location":"ssl/import/#centos","title":"CentOS","text":"<pre><code>sudo cp local-ca.crt /etc/pki/ca-trust/source/anchors\nsudo update-ca-trust\n</code></pre>"},{"location":"ssl/import/#windows","title":"Windows","text":"<p>\u5bfc\u5165\u6839\u8bc1\u4e66</p> <pre><code>Import-Certificate -FilePath 'C:\\local-ca.crt' -CertStoreLocation Cert:\\LocalMachine\\Root\n</code></pre> <p>\u5bfc\u5165\u5ba2\u6237\u7aef\u8bc1\u4e66</p> <pre><code># \u5bfc\u5165\u4e0d\u542b\u5bc6\u7801\u7684\u8bc1\u4e66\nSet-Location -Path cert:\\CurrentUser\\My\nImport-PfxCertificate -Filepath 'C:\\client.p12'\n# \u5bfc\u5165\u542b\u5bc6\u7801\u7684\u8bc1\u4e66\n$pfxPassword = \"PASSWORD\" | ConvertTo-SecureString -AsPlainText -Force\nSet-Location -Path cert:\\CurrentUser\\My\nImport-PfxCertificate -Filepath 'C:\\client.p12' -Password $pfxPassword\n</code></pre>"},{"location":"vmware/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"vmware/faq/#before-you-can-run-vmware-several-modules-must-be-compiled","title":"Before you can run VMware several modules must be compiled","text":"<p>\u89e3\u51b3\u65b9\u6cd5</p> <pre><code>sudo vmware-modconfig --console --install-all\n</code></pre> <ul> <li>Before you can run VMware several modules must be compiled</li> </ul>"},{"location":"windows/tools/","title":"\u5de5\u5177","text":""},{"location":"windows/tools/#_2","title":"\u7cfb\u7edf\u6fc0\u6d3b","text":"<ul> <li>Microsoft-Activation-Scripts</li> </ul>"},{"location":"windows/tools/#_3","title":"\u5f55\u5c4f\u622a\u56fe","text":"<ul> <li>LICEcap</li> </ul>"},{"location":"windows/wsl/","title":"WSL","text":""},{"location":"windows/wsl/#_1","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"windows/wsl/#wsl-ubuntu-error-0x80004002","title":"WSL Ubuntu error 0x80004002","text":"<p>\u4f7f\u7528 Adminstrator \u6253\u5f00 PowerShell\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux\n</code></pre>"},{"location":"windows/wsl/#phpstorm-wsl2","title":"PHPStorm \u8bbf\u95ee WSL2 \u4e2d\u7684\u6587\u4ef6","text":"<pre><code>\\\\wsl$\\Ubuntu\\opt\\www\\invo\n</code></pre>"},{"location":"windows/wsl/#ubuntu","title":"\u65b0\u6807\u7b7e\u9ed8\u8ba4\u6253\u5f00 Ubuntu","text":"<p>\u8bbe\u7f6e -&gt; \u542f\u52a8 -&gt; \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 -&gt; \u9009\u62e9 Ubuntu -&gt; \u4fdd\u5b58</p>"},{"location":"windows/wsl/#_2","title":"\u53c2\u8003","text":"<ol> <li>Windows Subsystem for Linux Documentation</li> <li>WSL Ubuntu error 0x80004002</li> <li>Open a project stored in the WSL file system</li> </ol>"}]}