{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-]","pipeline":["stemmer"]},"docs":[{"location":"index.html","title":"\u9996\u9875","text":""},{"location":"book.html","title":"\u7535\u5b50\u4e66","text":"<ul> <li>Library Genesis</li> <li>SaltTiger</li> </ul>"},{"location":"diango.html","title":"django","text":""},{"location":"diango.html#cheetsheet","title":"cheetsheet","text":"<pre><code># \u200b\u5b89\u88c5\u200b Python 3.12\nsudo apt update\nsudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev wget\nmkdir ./python &amp;&amp; cd ./python\nwget https://www.python.org/ftp/python/3.12.1/Python-3.12.1.tgz\ntar -xvf Python-3.12.1.tgz\ncd Python-3.12.0b3\n./configure --enable-optimizations\nsudo make install\n</code></pre>"},{"location":"diango.html#faq","title":"FAQ","text":"<pre><code>pip install mysqlclient\n\n#Exception: Can not find valid pkg-config name.\n#Specify MYSQLCLIENT_CFLAGS and MYSQLCLIENT_LDFLAGS env vars manually\nsudo apt-get install python3-dev default-libmysqlclient-dev build-essential pkg-config\n</code></pre>"},{"location":"diango.html#links","title":"Links","text":"<ul> <li>Docker Alpine build fails on mysqlclient installation with error: Exception: Can not find valid pkg-config name</li> </ul>"},{"location":"python.html","title":"Python","text":""},{"location":"python.html#cheetsheet","title":"cheetsheet","text":"<pre><code># \u200b\u83b7\u53d6\u200b\u5f53\u524d\u200b\u65f6\u95f4\u200b\nnow = datetime.datetime.now()\n\n# \u200b\u83b7\u53d6\u200b 15 \u200b\u5206\u949f\u200b\u524d\u200b\u7684\u200b\u65f6\u95f4\u200b\ndatetime.datetime.now() - datetime.timedelta(minutes = 15)\n</code></pre>"},{"location":"python.html#google-fonts","title":"\u4e0b\u8f7d\u200b google fonts","text":"<pre><code>import requests\n\nwith open(\"example.css\", \"r\") as f:\n    text = f.read()\n    urls = re.findall(r'(https?://[^\\)]+)', text)\n\nfor url in urls:\n    filename = url.split(\"/\")[-1]\n    r = requests.get(url)\n    with open(\"./fonts/\" + filename, \"wb\") as f: \n        f.write(r.content)\n    text = text.replace(url, \"/fonts/\" + filename)\n\nwith open(\"example.css\", \"w\") as f:\n        f.write(text)\n</code></pre>"},{"location":"python.html#links","title":"Links","text":"<ul> <li>How to create a DateTime equal to 15 minutes ago?</li> <li>Downloading a Google font and setting up an offline site that uses it</li> <li>google-font-dl.py</li> </ul>"},{"location":"tools.html","title":"Tools","text":"<ul> <li>\u200b\u4e0b\u8f7d\u200b Youtube \u200b\u89c6\u9891\u200b https://ytshorts.savetube.me </li> </ul>"},{"location":"ansible/index.html","title":"Ansible","text":"<pre><code># \u200b\u4ee5\u200b JSON \u200b\u683c\u5f0f\u200b\u8fd4\u56de\u200b\u7ed3\u679c\u200b\n# \u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b ansible.cfg\n[defaults]\ncallback_whitelist=json\nstdout_callback=json\n\n# \u200b\u901a\u8fc7\u200b\u73af\u5883\u53d8\u91cf\u200b \nANSIBLE_CALLBACK_WHITELIST=json ANSIBLE_STDOUT_CALLBACK=json ansible-playbook ...\n\n# \u200b\u4fee\u6539\u200b\u5e76\u53d1\u200b\u6570\u200b\n# ansible.cfg\n[defaults]\nforks=50\n\n# \u200b\u547d\u4ee4\u884c\u200b\u53c2\u6570\u200b\nansible-playbook site.yaml --forks 50\n</code></pre>"},{"location":"ansible/index.html#_1","title":"\u95ee\u9898","text":"<p>ansible 2.x sudo regression on old systems</p> <pre><code>in 1.9x (ansible.cfg)\nsudo_flags = -H\n\nin 2.x\nsudo_flags = -H -S -n\n</code></pre>"},{"location":"ansible/index.html#_2","title":"\u53c2\u8003","text":"<ol> <li>8 ways to speed up your Ansible playbooks</li> <li>ansible 2.x sudo regression on old systems</li> </ol>"},{"location":"ansible/archive.html","title":"Ansible","text":"<pre><code># \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b raw \u200b\u548c\u200b script \u200b\u6a21\u5757\u200b\u4e0d\u200b\u4f9d\u8d56\u4e8e\u200b Python\uff0c\u200b\u6240\u4ee5\u200b\u53ef\u4ee5\u200b\u7528\u200b\u5b83\u200b\u6765\u200b\u5b89\u88c5\u200b Python\nansible myhost --become -m raw -a \"yum install -y python2\"\n\n# Ansible \u200b\u6309\u7167\u200b\u4ee5\u4e0b\u200b\u987a\u5e8f\u200b\u8bfb\u53d6\u200b\u914d\u7f6e\u200b\uff0c\u200b\u4e00\u65e6\u200b\u627e\u5230\u200b\u7b2c\u4e00\u4e2a\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u5176\u4ed6\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u5ffd\u7565\u200b\n1. ANSIBLE_CONFIG (environment variable if set)\n2. ansible.cfg (in the current directory)\n3. ~/.ansible.cfg (in the home directory)\n4. /etc/ansible/ansible.cfg\n\n# \u200b\u7528\u200b\u8d26\u53f7\u5bc6\u7801\u200b\u767b\u5f55\u200b\nansible -i hosts -u bakroot02 --extra-vars ansible_ssh_pass=mypassword -m ping all\n\n# \u200b\u5ffd\u7565\u200b Host Key Checking\nvim /etc/ansible/ansible.cfg\n[defaults]\nhost_key_checking=False\n\n# \u200b\u7981\u6b62\u200b fact cache\nexport ANSIBLE_INVENTORY_CACHE=False\n\n# \u200b\u6ca1\u6709\u200b\u505a\u200b\u4e92\u4fe1\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u5bc6\u7801\u200b\u5c06\u200b\u6709\u6548\u200b\n[all]\n172.31.96.101\n172.31.96.102\n\n[all:vars]\nansible_user=bakroot02\nansible_password=suhua123\n\n# \u200b\u6307\u5b9a\u200b\u5177\u4f53\u200b IP \u200b\u6267\u884c\u200b\nansible all -i \"10.168.101.179,\" -m ping\nansible-playbook -i \"10.168.101.179,\" test.yml\nansible localhost -m setup\n\n\n# \u200b\u67e5\u770b\u200b hosts \u200b\u5217\u8868\u200b\nansible all --list-hosts\nansible -i hosts all --list\nansible -i hosts all -m ping\nansible-playbook -i hosts.yaml playbook.yaml\n\n# \u200b\u547d\u4ee4\u884c\u200b\u6307\u5b9a\u200b\u53c2\u6570\u200b\nexport ANSIBLE_HOST_KEY_CHECKING=False\nansible -i 172.31.96.101, -u bakroot02 --extra-vars ansible_ssh_pass=mypassword -m ping all\nansible -i 172.31.96.101,172.31.96.102, -u bakroot02 --extra-vars ansible_ssh_pass=mypassword -m ping all\n\n# command \u200b\u6a21\u5757\u200b\uff0c\u200b\u5b83\u200b\u662f\u200b\u9ed8\u8ba4\u200b\u6a21\u5757\u200b\uff0c\u200b\u4e0d\u200b\u652f\u6301\u200b pipe \u200b\u548c\u200b redirect\nansible -i hosts.yaml all -a \"id\"\nansible -i hosts.yaml all -m ansible.builtin.command -a \"id\"\n\n# shell \u200b\u6a21\u5757\u200b\uff0c\u200b\u652f\u6301\u200b pipe \u200b\u548c\u200b redirect\nansible -i hosts.yaml all -m ansible.builtin.shell -a \"cat /etc/kylin-release || cat /etc/redhat-release\"\n\n# copy \u200b\u6a21\u5757\u200b\uff0c\u200b\u5e42\u200b\u7b49\u200b\u6027\u200b\nansible -i hosts.yaml all -m ansible.builtin.copy -a \"src=/etc/hosts dest=/tmp/hosts\"\n\n# file \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.file -a \"dest=/tmp/hosts mode=600 owner=1001 group=1001\" --become\nansible -i hosts.yaml all -m ansible.builtin.file -a \"dest=/opt/suhua owner=bakroot02 group=bakroot02 state=directory\" --become\nansible -i hosts.yaml all -m ansible.builtin.file -a \"dest=/opt/suhua state=absent\" --become\n\n# yum \u200b\u6a21\u5757\u200b RHEL 7\nansible -i hosts.yaml all -m ansible.builtin.yum -a \"name=vim state=present\" --become\nansible -i hosts.yaml all -m ansible.builtin.yum -a \"name=vim state=absent\" --become\n\n# Kylin V10\nansible -i hosts.yaml all -m ansible.builtin.dnf -a \"use_backend=dnf4 name=vim state=present\" --become\nansible -i hosts.yaml all -m ansible.builtin.yum -a \"use_backend=dnf4 name=vim state=absent\" --become\n\n# user \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.user -a \"name=foo password=&lt;hash password&gt; state=present\" --become\nansible -i hosts.yaml all -m ansible.builtin.user -a \"name=foo password=&lt;hash password&gt; state=absent\" --become\n\n# service \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.service -a \"name=crond state=started\" --become\nansible -i hosts.yaml all -m ansible.builtin.service -a \"name=crond state=stopped\" --become\n\n# setup \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -m ansible.builtin.setup --become\n\n# authorized_key \u200b\u6a21\u5757\u200b\nansible -i hosts.yaml all -u bakroot02 -m authorized_key -a \"user=bakroot02 key='{{ lookup('file', '/root/.ssh/id_rsa.pub') }}' state=present path=/home/bakroot02/.ssh/authorized_keys\" --ask-pass\nansible -i hosts.yaml all -u bakroot02 -m authorized_key -a \"user=bakroot02 key='{{ lookup('file', '/root/.ssh/id_rsa.pub') }}' state=present\" --ask-pass\nansible -i hosts.yaml all -u bakroot02 -m authorized_key -a \"user=bakroot02 key='{{ lookup('file', '/root/.ssh/id_rsa.pub') }}' state=present exclusive=True\" --ask-pass\nansible -i 10.0.0.14, all -u root -m authorized_key -a \"user=bakroot key='{{ lookup('file', '.ssh/id_rsa.pub') }}' state=present\" --ask-pass\n\n# \u200b\u9a8c\u8bc1\u200b\nansible all -a \"date +'%Y-%m-%d %T'\"\n\n# \u200b\u53ea\u200b\u68c0\u67e5\u200b\u4e0d\u200b\u771f\u6b63\u200b\u6267\u884c\u200b --check / -C\nansible -i hosts.yaml all -m ansible.builtin.copy -a \"content=foo dest=/tmp/bar.txt\" --become --check\n\n# \u200b\u4fee\u6539\u200b\u5e76\u53d1\u200b\u6570\u200b By default Ansible uses only 5 simultaneous processes\nansible atlanta -a \"/sbin/reboot\" -f 10\n\n# sudo \u200b\u6267\u884c\u547d\u4ee4\u200b\nansible -i hosts.yaml all -a \"/sbin/reboot\" --become\n\n# Docker\nsudo -i\ndocker run --rm -it -v $(pwd):/ansible -v /root/.ssh:/root/.ssh --net host aisuhua/ansible:latest /bin/sh\ndocker run --rm -it -v $(pwd):/ansible -v ~/.ssh/id_rsa:/root/id_rsa --net host aisuhua/ansible:latest /bin/sh\n\n# ansible-playbook\n# --check, --diff, --list-hosts, --list-tasks, and --syntax-check\nansible-playbook -i hosts.yaml playbook.yaml --check\nansible-playbook -i hosts.yaml playbook.yaml --list-hosts\n\n## \u200b\u521d\u59cb\u5316\u200b\n\n# \u200b\u521b\u5efa\u200b\u7528\u6237\u200b\npassword='Pawrd01!'\nansible -i hosts.ini all -u bakroot02 -m ansible.builtin.user -a \"name=bakroot state=present password=\\\"{{ \\\"$password\\\" | password_hash('sha512') }}\\\"\" --ask-pass --become\n\n# \u200b\u62f7\u8d1d\u200b\u79d8\u94a5\u200b\nansible -i hosts.ini all -u bakroot -m ansible.builtin.authorized_key -a \"user=bakroot key='{{ lookup('file', '/opt/www/ansible/.ssh/id_rsa.pub') }}' state=present\" --ask-pass\n\n## FAQ\n\n[WARNING]: Platform linux on host 172.31.96.101 is using the discovered Python interpreter at /usr/bin/python, but future installation of another Python interpreter could change this. See\nhttps://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.\n\n```ansible.cfg\n[defaults]\ninterpreter_python=auto_silent\n\n# \u200b\u5f00\u542f\u200b debug\nexport ANSIBLE_DEBUG=True\n</code></pre>"},{"location":"ansible/archive.html#links","title":"Links","text":"<ul> <li>the-configuration-file</li> <li>ansible.cfg</li> <li>Module Index</li> <li>Ansible passing ssh username and Password using command line is not working</li> <li>YAML Syntax</li> <li>playbook-keywords</li> <li>Creating a new user and password with Ansible</li> <li>How to create a new partition with Ansible</li> <li>Ansible: create a user with sudo privileges</li> <li>Ansible playbook to determine OS release</li> </ul>"},{"location":"ansible/book.html","title":"Book","text":"<pre><code># \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b\nansible all -m dnf -a 'name=php state=present use_backend=dnf4' --become\nansible all -m yum -a 'name=haproxy state=present' --become\n\n# \u200b\u7ba1\u7406\u8f6f\u4ef6\u200b\nansible all -m service -a \"name=haproxy state=started\" --become\n\n# \u200b\u88c5\u200b\u8f6f\u4ef6\u200b\nsudo yum -y install net-tools\n\n# \u200b\u67e5\u770b\u200b\u4e3b\u673a\u200b\u7684\u200b\u5173\u7cfb\u200b\nansible-inventory --graph\n\n# \u200b\u67e5\u770b\u200b\u4e3b\u673a\u200b\u5217\u8868\u200b\nansible -i hosts.yaml icms --list-hosts\nansible-playbook -i hosts.yaml playbook.yaml --list-hosts\n\n# \u200b\u8bed\u6cd5\u200b\u68c0\u67e5\u200b\nansible-playbook playbook.yaml --syntax-check\nansible-playbook playbook.yaml --check\n\n# \u200b\u67e5\u770b\u200b Module \u200b\u5e2e\u52a9\u200b\u624b\u518c\u200b\nansible-doc service\n\n# \u200b\u641c\u7d22\u200b\u6a21\u5757\u200b\nansible-doc -l | grep yum\n\n# \u200b\u68c0\u67e5\u200b playbook \u200b\u8bed\u6cd5\u200b\u662f\u5426\u200b\u6709\u8bef\u200b\nansible-playbook playbook.yaml --syntax-check\n</code></pre>"},{"location":"ansible/book.html#inventory","title":"Inventory","text":"<pre><code># \u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b inventory\nansible all -i 'localhost,' -a date\n\n# \u200b\u67e5\u770b\u200b inventory \u200b\u63d2\u4ef6\u200b\nansible-doc -t inventory -l\n\n# \u200b\u7b80\u5355\u200b\u6267\u884c\u200b\nansible -i 'localhost,' all -a date\n\n# \u200b\u67e5\u770b\u200b facts\nansible -i hosts.ini all -m setup\nansible -i hosts.ini all -m setup -a 'filter=ansible_all_ipv4_addresses'\nansible -i hosts.ini all -m setup -a 'filter=ansible_env'\n\n# \u200b\u547d\u4ee4\u884c\u200b\u4f20\u9012\u200b\u53d8\u91cf\u200b\nansible-playbook playbook.yaml  -e \"greeting=hello\"\n</code></pre>"},{"location":"ansible/book.html#chapter7","title":"Chapter7","text":"<pre><code># \u200b\u5b89\u88c5\u200b\u4f9d\u8d56\u200b\nsudo apt-get install libjpeg-dev zlib1g-dev\n\n# \u200b\u67e5\u770b\u200b task \u200b\u6e05\u5355\u200b \nansible-playbook --list-tasks playbook.yaml\n\n# \u200b\u514d\u8d39\u200b\u57df\u540d\u89e3\u6790\u200b\n192.168.1.5.nip.io\nwww.192.168.1.5.nip.io\n\n# \u200b\u6307\u5b9a\u200b ansible_python_interpreter \u200b\u6267\u884c\u200b\nansible-playbook playbook.yaml  -e 'ansible_python_interpreter=/usr/bin/python3'\n</code></pre>"},{"location":"ansible/book.html#chapter8","title":"Chapter8","text":"<pre><code># \u200b\u67e5\u770b\u200b\u8be6\u7ec6\u200b\u6267\u884c\u200b\u8fc7\u7a0b\u200b\nansible -i hosts.yaml -m ping -vvvv\n\n# \u200b\u8bed\u6cd5\u200b\u68c0\u67e5\u200b\nansible-playbook --syntax-check playbook.yml\n\n# \u200b\u7f57\u5217\u200b\u4e3b\u673a\u200b\nansible-playbook --list-hosts playbook.yml\n\n# \u200b\u7f57\u5217\u200b\u4efb\u52a1\u200b\u6e05\u5355\u200b\nansible-playbook --list-tasks playbook.yaml\n\n# \u200b\u8bd5\u8fd0\u884c\u200b dry run\nansible-playbook --check playbook.yaml\n\n# \u200b\u67e5\u770b\u200b\u53ef\u80fd\u200b\u66f4\u65b0\u200b\u5230\u200b\u7684\u200b\u90e8\u5206\u200b\nansible-playbook --check --diff playbook.yaml\n\n# \u200b\u53ea\u200b\u8fd0\u884c\u200b\u6307\u5b9a\u200b\u7684\u200b tags role\nansible-playbook --tags=yuminstall playbook.yaml\n\n# \u200b\u53ea\u200b\u5728\u200b\u6307\u5b9a\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u8fd0\u884c\u200b\nansible-playbook --limit 172.31.96.101 playbook.yaml\nansible -i hosts.ini all --limit 172.31.96.102 -m setup\n</code></pre>"},{"location":"ansible/book.html#chapter8_1","title":"Chapter8","text":"<pre><code># \u200b\u5b89\u88c5\u200b role\nansible-galaxy install oefenweb.ntp\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u7684\u200b role\nansible-galaxy role list\n\n# \u200b\u5378\u8f7d\u200b role\nansible-galaxy remove oefenweb.ntp\n</code></pre>"},{"location":"ansible/book.html#chapter10","title":"Chapter10","text":"<pre><code># \u200b\u67e5\u770b\u200b\u6240\u6709\u200b lookup \u200b\u7c7b\u578b\u200b\u7684\u200b\u7ec4\u4ef6\u200b\nansible-doc  -t lookup --list\n\n# \u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u76f8\u5173\u200b fact \u200b\u53d8\u91cf\u200b\n\"ansible_os_family\": \"RedHat\"\n\"ansible_distribution\": \"Kylin Linux Advanced Server\"\n\"ansible_distribution_major_version\": \"V10\"\n\"ansible_distribution_release\": \"Tercel\"\n\"ansible_distribution_version\": \"V10\"\n\n# become \u200b\u65e0\u6cd5\u200b\u5e94\u7528\u200b\u5728\u200b include_tasks\ntasks:\n- ansible.builtin.include_tasks: redhat.yaml\n  vars:\n    ansible_become: yes\n\n# become \u200b\u65e0\u6cd5\u200b\u5e94\u7528\u200b\u5728\u200b include_role\ninclude_role:\n   name: myrole\n   apply:\n     become: true\n</code></pre>"},{"location":"ansible/book.html#chapter11","title":"Chapter11","text":"<pre><code># \u200b\u5206\u6b65\u200b\u8c03\u8bd5\u200b\nansible-playbook playbook.yaml --step\n</code></pre>"},{"location":"ansible/book.html#links","title":"Links","text":"<ul> <li>Using 'creates' arg in Ansible shell module</li> <li>How to install and use Nginx on CentOS 7 / RHEL 7</li> <li>Python 3 Support</li> <li>how can I specify the version of Python to use in an Ansible playbook?</li> <li>How to check if a file exists in Ansible?</li> <li>test-syntax</li> <li>playbooks_filters.html</li> <li>ansible_error_become_is_not_a_valid_attribute_for</li> <li>Use ansible_become instead of become in multinode devstack gate</li> <li>How To Use Variables in Ansible Playbooks</li> <li>Ansible - Looking for files and compare their hash</li> <li>Grouping tasks with blocks</li> <li>Controlling playbook execution: strategies and more</li> <li>Send the output from Ansible to a file [duplicate]</li> <li>Ansible: how to get output of shell script command on stdout?</li> <li>How to get current role name in an ansible task</li> </ul>"},{"location":"ansible/faq.html","title":"\u5e38\u89c1\u95ee\u9898","text":"<pre><code># Unable to restart service sshd: Failed to restart sshd.service: Connection timed out\\nSee system logs and 'systemctl status sshd.service' for details.\n# Unable to restart service sshd: Failed to restart sshd.service: Method call timed out\\nSee system logs and 'systemctl status sshd.service' for details.\n# \u200b\u8981\u200b\u6ce8\u610f\u200b\u7ed9\u200b handlers \u200b\u6dfb\u52a0\u200b become: true\nhandlers:\n- name: restart ssh\n  become: true\n  service:\n    name: sshd\n    state: restarted\n\n# sudo: must be setuid root\nchown root:root /usr/bin/sudo\nchmod 4755 /usr/bin/sudo\n</code></pre>"},{"location":"ansible/faq.html#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Ubuntu 22.04 - how to properly restart sshd?</li> <li>Ansible delegate_to task trying to ssh</li> <li>Is it possible to copy a local file to a remove server without using the Copy module?</li> <li>Error after sudo-ing \"sudo: must be setuid root\"</li> <li>New Line in an Ansible String</li> </ul>"},{"location":"ansible/skills.html","title":"\u6280\u5de7","text":"<pre><code># \u200b\u5982\u200b\u6ca1\u6709\u200b\u63d0\u4f9b\u200b\u76f8\u5173\u200b\u53c2\u6570\u200b\u5219\u200b\u5ffd\u7565\u200b\nid: \"{{ item.state | default(omit) }}\"\n\n# \u200b\u5220\u9664\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\n- find:\n    paths: /opt/app/jboss/configuration\n    patterns: \"*.web\"\n  register: find_results\n\n- file:\n    path: \"{{ item['path'] }}\"\n    state: absent\n  with_items: \"{{ find_results['files'] }}\"\n</code></pre>"},{"location":"ansible/skills.html#links","title":"Links","text":"<ul> <li>How to delete *.web files only if they exist</li> </ul>"},{"location":"ansible/todo.html","title":"TODO","text":"<ul> <li>Failed to get LVM version number</li> </ul>"},{"location":"coredns/index.html","title":"CoreOS","text":"<p>\u200b\u540c\u7c7b\u200b\u7684\u200b DNS \u200b\u8fd8\u6709\u200b dnsmasq\u3001bind \u200b\u7b49\u200b\u3002\u200b\u4e4b\u6240\u4ee5\u200b\u9009\u62e9\u200b CoreDNS \u200b\u662f\u56e0\u4e3a\u200b\u5b83\u200b\u975e\u5e38\u200b\u8f7b\u4fbf\u200b\u548c\u200b\u6613\u7528\u200b\uff0c\u200b\u540c\u65f6\u200b\u4e5f\u200b\u662f\u200b\u4e3a\u4e86\u200b\u719f\u6089\u200b Kubenetes \u200b\u7684\u200b\u8fd0\u4f5c\u200b\u3002</p>"},{"location":"coredns/client.html","title":"\u5ba2\u6237\u7aef\u200b\u914d\u7f6e","text":""},{"location":"coredns/client.html#kylin-v10","title":"Kylin V10","text":"<p>\u200b\u4fee\u6539\u200b DNS \u200b\u914d\u7f6e\u200b</p> <pre><code># /etc/systemd/resolved.conf\n[Resolve]\nDNS=192.168.1.100\n</code></pre> <p>\u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\u751f\u6548\u200b</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart systemd-resolved\n</code></pre>"},{"location":"coredns/install.html","title":"\u5b89\u88c5","text":"<p>\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b Docker \u200b\u6216\u8005\u200b\u4e8c\u8fdb\u5236\u200b\u65b9\u5f0f\u200b\u5b89\u88c5\u200b\uff0c\u200b\u4e2a\u4eba\u200b\u504f\u5411\u200b\u4e8e\u200b\u4f7f\u7528\u200b Docker\uff0c\u200b\u5e76\u200b\u5728\u200b\u5b98\u65b9\u200b\u955c\u50cf\u200b\u57fa\u7840\u200b\u4e0a\u200b\u505a\u200b\u4e86\u200b\u5c01\u88c5\u200b\uff0c\u200b\u8be6\u89c1\u200b aisuhua/docker-coredns\u3002</p>"},{"location":"coredns/install.html#_2","title":"\u5b89\u88c5","text":"<pre><code>git clone git@github.com:aisuhua/docker-coredns.git\ncd docker-coredns\ndocker-compose up\n</code></pre>"},{"location":"coredns/install.html#_3","title":"\u9a8c\u8bc1","text":"<pre><code>dig @127.0.0.1 master1.ocp1.example.com\ndig @127.0.0.1 -x 192.168.1.20\n</code></pre>"},{"location":"css/index.html","title":"CSS","text":"<pre><code>/* \u200b\u4ee3\u7801\u200b\u8fc7\u957f\u200b\u81ea\u52a8\u200b\u6362\u884c\u200b\uff0c\u200b\u907f\u514d\u51fa\u73b0\u200b\u6a2a\u5411\u200b\u6eda\u52a8\u6761\u200b */\npre code {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n\n/* \u200b\u9875\u9762\u200b\u7070\u8272\u200b\u6548\u679c\u200b */\nhtml{\n  filter: grayscale(100%) !important;\n}\n\n* {\n  filter: gray !important;\n}\n</code></pre>"},{"location":"docker/index.html","title":"Docker","text":""},{"location":"docker/index.html#container","title":"Container","text":"<pre><code># \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u5df2\u200b\u505c\u6b62\u200b\u7684\u200b\u5bb9\u5668\u200b\ndocker container prune -f\n\n# \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u5bb9\u5668\u200b\uff0c\u200b\u9664\u4e86\u200b php \u200b\u548c\u200b nginx\ndocker rm $(docker ps -a | grep -Ewv \"php|nginx\" | awk 'NR&gt;1 {print $1}')\n\n# \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u5bb9\u5668\u200b\ndocker rm -vf $(docker ps -aq)\n</code></pre>"},{"location":"docker/index.html#volume","title":"Volume","text":"<pre><code># \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u6ca1\u200b\u5728\u200b\u4f7f\u7528\u200b\u7684\u200b\u5377\u200b\ndocker volume prune\n</code></pre>"},{"location":"docker/index.html#image","title":"Image","text":"<pre><code># \u200b\u4ece\u5c0f\u5230\u5927\u200b\u6392\u5e8f\u200b\u955c\u50cf\u200b\ndocker images --format \"{{.ID}}\\t{{.Size}}\\t{{.Repository}}:{{.Tag}}\" | sort -k 2 -h\n\n# \u200b\u6e05\u7406\u200b none \u200b\u955c\u50cf\u200b\ndocker rmi $(docker images --filter \"dangling=true\" -q --no-trunc)\n\n# \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u955c\u50cf\u200b\uff0c\u200b\u9664\u4e86\u200b php \u200b\u548c\u200b alpine\ndocker rmi $(docker images -a | grep -Ewv 'php|alpine' | awk {'print $1'})\n\n# \u200b\u6e05\u7a7a\u200b\u6240\u6709\u200b\u955c\u50cf\u200b\ndocker rmi -f $(docker images -aq)\n\n# \u200b\u5bfc\u51fa\u200b\u955c\u50cf\u200b\ndocker save nginx:latest | gzip &gt; nginx.gz\n\n# \u200b\u5bfc\u5165\u200b\u955c\u50cf\u200b\ndocker load -i nginx.gz\n</code></pre>"},{"location":"docker/index.html#build","title":"Build","text":"<pre><code># Ubuntu \u200b\u975e\u200b\u4ea4\u4e92\u65b9\u5f0f\u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b\nARG DEBIAN_FRONTEND=noninteractive\n</code></pre>"},{"location":"docker/index.html#ssl","title":"SSL","text":"<pre><code># \u200b\u5355\u72ec\u200b\u7ed9\u200b\u4ed3\u5e93\u200b\u914d\u7f6e\u200b\u6839\u200b\u8bc1\u4e66\u200b\ncp ca.crt /etc/docker/certs.d/yourdomain.com:port/\n</code></pre>"},{"location":"docker/index.html#backup","title":"Backup","text":"<pre><code># \u200b\u5b89\u88c5\u200b\nsudo curl -sSL https://raw.githubusercontent.com/BretFisher/docker-vackup/main/vackup &gt; /usr/local/bin/vackup\nsudo chmod +x /usr/local/bin/vackup\n\n# \u200b\u5907\u4efd\u200b\u548c\u200b\u6062\u590d\u200b volume\nvackup export VOLUME_NAME VOLUME_NAME.tar.gz\nvackup import VOLUME_NAME.tar.gz VOLUME_NAME\n</code></pre>"},{"location":"docker/index.html#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Back Up and Share Docker Volumes with This Extension</li> <li>https://github.com/BretFisher/docker-vackup</li> </ul>"},{"location":"docker/install.html","title":"\u5b89\u88c5","text":""},{"location":"docker/install.html#_2","title":"\u56fd\u5185\u200b\u6e90","text":"<pre><code>cat &lt;&lt; EOF | sudo tee /etc/docker/daemon.json\n{\n  \"registry-mirrors\":[\n    \"https://hub-mirror.c.163.com\",\n    \"https://mirror.baidubce.com\",\n    \"https://qby02i3s.mirror.aliyuncs.com\",\n    \"https://docker.mirrors.ustc.edu.cn\"\n  ],\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  }\n}\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n</code></pre>"},{"location":"docker/install.html#_3","title":"\u6388\u6743\u200b\u666e\u901a\u7528\u6237","text":"<pre><code>sudo groupadd docker\nsudo usermod -aG docker $USER\n</code></pre>"},{"location":"docker/install.html#_4","title":"\u6dfb\u52a0\u200b\u975e\u200b\u5b89\u5168\u200b\u955c\u50cf\u200b\u4ed3\u5e93","text":"<p><code>vim /etc/docker/daemon.json</code></p> <pre><code>{\n  \"insecure-registries\" : [\n    \"http://registry.example.com:5000\"\n  ]\n}\n</code></pre>"},{"location":"docker/private.html","title":"\u79c1\u6709\u200b\u4ed3\u5e93","text":"<p>\u200b\u767b\u5f55\u200b\u5730\u5740\u200b</p> <ul> <li>https://cr.console.aliyun.com/cn-shenzhen</li> </ul> <p>\u200b\u4f7f\u7528\u200b\u65b9\u5f0f\u200b</p> <pre><code>docker login --username=1079087531@qq.com registry.cn-shenzhen.aliyuncs.com\ndocker pull registry.cn-shenzhen.aliyuncs.com/aisuhua/demo:latest\n</code></pre>"},{"location":"elastic/index.html","title":"Elastic","text":""},{"location":"elastic/index.html#links","title":"Links","text":"<ul> <li>How to Update Security Certificates in Elasticsearch</li> <li>Efficiently Deleting Snapshots in Elasticsearch</li> <li>\u200b\u591a\u200bes \u200b\u96c6\u7fa4\u200b\u6570\u636e\u200b\u8fc1\u79fb\u200b\u65b9\u6848\u200b</li> <li>ES\u200b\u5f02\u5730\u200b\u53cc\u6d3b\u200b\u65b9\u6848\u200b</li> </ul>"},{"location":"elastic/logstash.html","title":"Logstash","text":""},{"location":"elastic/logstash.html#sample","title":"Sample","text":"<pre><code># the json input\nroot@monitoring:~# cat tmp.json\n{\"message\":{\"someField\":\"someValue\"}}\n\n\n# the logstash configuration file\nroot@monitoring:~# cat /etc/logstash/conf.d/test.conf\ninput {\n  tcp {\n    port =&gt; 5400\n    codec =&gt; json\n  }\n}\n\nfilter{\n}\n\noutput {\n   stdout {\n     codec =&gt; rubydebug\n   }\n}\n\n\n# starting the logstash server\n/opt/logstash/bin/logstash -f /etc/logstash/conf.d/test.conf\n\n\n# sending the json to logstash with netcat\nnc localhost 5400 &lt;  tmp.json\n\n# the logstash output via stdout\n{\n       \"message\" =&gt; {\n        \"someField\" =&gt; \"someValue\"\n    },\n      \"@version\" =&gt; \"1\",\n    \"@timestamp\" =&gt; \"2016-02-02T13:31:18.703Z\",\n          \"host\" =&gt; \"0:0:0:0:0:0:0:1\",\n          \"port\" =&gt; 56812\n}\n</code></pre>"},{"location":"elastic/logstash.html#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Sending data to logstash via tcp</li> </ul>"},{"location":"git/index.html","title":"Git","text":""},{"location":"git/index.html#cheetsheet","title":"CheetSheet","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u5206\u652f\u200b\ngit config --global init.defaultBranch master\n\n# \u200b\u7a7a\u76ee\u5f55\u200b\u4fdd\u6301\u200b\n# Ignore everything in this directory\n*\n# Except this file\n!.gitignore\n</code></pre>"},{"location":"git/index.html#_1","title":"\u81ea\u52a8\u200b\u63d0\u4ea4","text":"<pre><code># \u200b\u5b89\u88c5\u200b\nsudo wget https://raw.githubusercontent.com/aisuhua/git-auto/master/git-auto -o /usr/local/bin/git-auto\nsudo chmod a+x /usr/local/bin/git-auto\n\n# \u200b\u914d\u7f6e\u200b crontab \u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\n* * * * * /usr/local/bin/git-auto -d /opt/www/aisuhua.github.io -o -p\n</code></pre>"},{"location":"git/gitea.html","title":"Gitea","text":"<ul> <li>Gitea deactivates user every day</li> </ul>"},{"location":"gpfs/gpfs.html","title":"GPFS","text":"<ul> <li>GPFS</li> </ul>"},{"location":"https/import.html","title":"\u5bfc\u5165\u200b\u8bc1\u4e66","text":""},{"location":"https/import.html#ubuntu","title":"Ubuntu","text":"<pre><code>sudo cp local-ca.crt /usr/local/share/ca-certificates\nsudo update-ca-certificates\n</code></pre>"},{"location":"https/import.html#centos","title":"CentOS","text":"<pre><code>sudo cp local-ca.crt /etc/pki/ca-trust/source/anchors\nsudo update-ca-trust\n</code></pre>"},{"location":"https/import.html#windows","title":"Windows","text":"<p>\u200b\u5bfc\u5165\u200b\u6839\u200b\u8bc1\u4e66\u200b</p> <pre><code>Import-Certificate -FilePath 'C:\\local-ca.crt' -CertStoreLocation Cert:\\LocalMachine\\Root\n</code></pre> <p>\u200b\u5bfc\u5165\u200b\u5ba2\u6237\u7aef\u200b\u8bc1\u4e66\u200b</p> <pre><code># \u200b\u5bfc\u5165\u200b\u4e0d\u200b\u542b\u200b\u5bc6\u7801\u200b\u7684\u200b\u8bc1\u4e66\u200b\nSet-Location -Path cert:\\CurrentUser\\My\nImport-PfxCertificate -Filepath 'C:\\client.p12'\n\n# \u200b\u5bfc\u5165\u200b\u542b\u200b\u5bc6\u7801\u200b\u7684\u200b\u8bc1\u4e66\u200b\n$pfxPassword = \"PASSWORD\" | ConvertTo-SecureString -AsPlainText -Force\nSet-Location -Path cert:\\CurrentUser\\My\nImport-PfxCertificate -Filepath 'C:\\client.p12' -Password $pfxPassword\n</code></pre>"},{"location":"https/import.html#links","title":"links","text":"<ul> <li>How to add Certificate Authority file in CentOS 7</li> <li>Adding trusted root certificates to the server</li> </ul>"},{"location":"java/index.html","title":"Java","text":"<ul> <li>Java SE 9 Archive Downloads</li> </ul>"},{"location":"java/war-sample.html","title":"War Sample","text":"<p>\u200b\u4e00\u4e2a\u200b\u5feb\u901f\u200b\u5165\u95e8\u200b\u7684\u200b\u4f7f\u7528\u200b tomcat \u200b\u90e8\u7f72\u200b Java \u200b\u5e94\u7528\u200b\u7684\u200b\u4f8b\u5b50\u200b\u3002</p>"},{"location":"java/war-sample.html#tomcat","title":"\u5b89\u88c5\u200b tomcat","text":"<pre><code># \u200b\u5b89\u88c5\u200b JDK\nsudo apt install default\u2013jdk\n\n# \u200b\u89e3\u538b\u200b\u5b89\u88c5\u5305\u200b\ncd /opt/www\nwget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.83/bin/apache-tomcat-9.0.83.tar.gz\ntar -zxvf apache-tomcat-9.0.83.tar.gz\n\n# \u200b\u8bbe\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b\nexport JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nexport CATALINA_HOME=/opt/www/apache-tomcat-9.0.83\n\n# \u200b\u4fee\u6539\u200b\u6210\u200b\u81ea\u52a8\u200b reload\nvim $CATALINA_HOME/conf/context.xml\n&lt;Context reloadable=\"true\"&gt;\n...\n&lt;/Context&gt;\n\n# \u200b\u542f\u52a8\u200b tomcat\n$CATALINA_HOME/bin/startup.sh\n</code></pre>"},{"location":"java/war-sample.html#java","title":"Java \u200b\u6e90\u7801\u200b\u90e8\u7f72","text":"<p>\u200b\u6e90\u4ee3\u7801\u200b: https://github.com/aisuhua/war-sample</p> <pre><code># \u200b\u4e0b\u8f7d\u200b\u6e90\u4ee3\u7801\u200b\u5230\u200b webapps \u200b\u76ee\u5f55\u200b\ncd $CATALINA_HOME/webapps\ngit clone git@github.com:aisuhua/war-sample.git\n\n# \u200b\u6d4b\u8bd5\u200b \ncurl http://localhost:8080/war-sample/\n</code></pre>"},{"location":"java/war-sample.html#class","title":"\u91cd\u65b0\u200b\u7f16\u8bd1\u200b class \u200b\u6587\u4ef6","text":"<pre><code># \u200b\u5148\u200b\u786e\u5b9a\u200b servlet jar \u200b\u5305\u200b\u7684\u200b\u4f4d\u7f6e\u200b\n$ ls /usr/share/java/ | grep servlet\nguice-servlet-4.0.jar\nguice-servlet.jar\ntomcat8-servlet-api-8.5.39.jar\ntomcat8-servlet-api.jar\n\n# \u200b\u8bbe\u7f6e\u200b CLASSPATH \u200b\u73af\u5883\u53d8\u91cf\u200b\nexport CLASSPATH=\"/usr/share/java/*\"\n\n# \u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u200b HelloServlet.java\ncd $CATALINA_HOME/webapps/war-sample/WEB-INF/classes/test\njavac HelloServlet.java\n</code></pre>"},{"location":"java/war-sample.html#war","title":"War \u200b\u5305\u200b\u90e8\u7f72","text":"<pre><code># \u200b\u5c06\u200b\u6e90\u4ee3\u7801\u200b\u6253\u5305\u200b\u6210\u200b War \u200b\u5305\u200b\ngit clone git clone git@github.com:aisuhua/war-sample.git\ncd war-sample\njar -cvf war-sample.war *\n\n# \u200b\u5c06\u200b war \u200b\u5305\u200b\u653e\u7f6e\u200b\u5230\u200b webapps \u200b\u76ee\u5f55\u200b\nmv war-sample.war $CATALINA_HOME/webapps/\n\n# \u200b\u6d4b\u8bd5\u200b \ncurl http://localhost:8080/war-sample/\n</code></pre>"},{"location":"java/war-sample.html#_1","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u67e5\u770b\u200b Java \u200b\u53ef\u7528\u200b\u7248\u672c\u200b\nupdate-java-alternatives -l\n\n# \u200b\u67e5\u770b\u200b\u65e5\u5fd7\u200b\ntail -f $CATALINA_HOME/logs/*.log\n</code></pre>"},{"location":"java/war-sample.html#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>Sample Application</li> <li>a hello, world servlet</li> <li>Servlets - Examples</li> <li>How to Install Apache Tomcat 8 on Ubuntu</li> <li>Tomcat - CATALINA_BASE and CATALINA_HOME variables</li> <li>javac command line compile error: package javax.servlet does not exist</li> <li>War File</li> <li>How do I update a Tomcat webapp without restarting the entire service?</li> <li>How To Install Apache Tomcat 8 on Ubuntu 16.04</li> </ol>"},{"location":"kubenetes/minikube.html","title":"minikube","text":""},{"location":"kubenetes/minikube.html#_1","title":"\u5b89\u88c5","text":"<pre><code>minikube start --driver=docker --container-runtime=containerd --image-mirror-country=cn\n</code></pre>"},{"location":"linux/index.html","title":"Linux","text":""},{"location":"linux/index.html#_1","title":"\u521d\u59cb\u5316","text":"<pre><code>sudo systemctl disable firewalld\nsudo systemctl stop firewalld\nsudo sed -i 's/SELINUX\\=enforcing/SELINUX\\=disabled/' /etc/selinux/config\nsudo setenforce 0\n</code></pre>"},{"location":"linux/index.html#journalctl","title":"journalctl","text":"<pre><code># \u200b\u67e5\u770b\u200b\u67d0\u4e2a\u200b\u670d\u52a1\u200b\u7684\u200b\u65e5\u5fd7\u200b\nsudo journalctl -u sshd --no-pager\n</code></pre>"},{"location":"linux/index.html#user","title":"User","text":"<pre><code># \u200b\u52a0\u5165\u200b\u7ec4\u200b\nusermod -a -G sudo suhua\n\n# sudo \u200b\u4e0d\u200b\u9700\u8981\u200b\u5bc6\u7801\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5199\u200b\u5728\u200b %sudo \u200b\u7ec4\u200b\u7684\u200b\u540e\u9762\u200b\nsuhua ALL=(ALL:ALL) NOPASSWD:ALL\n\n# \u200b\u5c06\u200b\u7528\u6237\u200b\u52a0\u5165\u200b\u7ec4\u200b\nsudo usermod -aG sudo username\n\n# \u200b\u5c06\u200b\u7528\u6237\u200b\u4ece\u200b\u7ec4\u4e2d\u200b\u5220\u9664\u200b\nsudo gpasswd --delete username sudo\n</code></pre>"},{"location":"linux/index.html#vim","title":"Vim","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u4e00\u4e2a\u200b tab \u200b\u7b49\u4e8e\u200b 2 \u200b\u4e2a\u200b\u7a7a\u683c\u200b\ncat &lt;&lt; EOF | sudo tee -a /etc/vim/vimrc.local\n\" one tab 2 space\nset tabstop=2\nset shiftwidth=2\nset autoindent\nset expandtab\nset softtabstop=0\nEOF\n\n# \u200b\u7f16\u8f91\u200b\u65f6\u200b\u51fa\u73b0\u200b 1H \u200b\u5947\u602a\u200b\u5b57\u7b26\u200b\nexport LANG=en.UTF-8\n</code></pre>"},{"location":"linux/index.html#grep","title":"grep","text":"<pre><code># \u200b\u5305\u542b\u200b\u4efb\u610f\u200b\u4e00\u4e2a\u200b\u5173\u952e\u5b57\u200b\ngrep -E 'google|youtube' file.txt\n</code></pre>"},{"location":"linux/index.html#generate-password","title":"generate password","text":""},{"location":"linux/TODO.html","title":"TODO","text":"<ul> <li>/var/log/audit/audit.log</li> <li>journalctl</li> <li>gpart</li> <li>grub2</li> <li>systemd</li> <li>PV \u200b\u5b58\u5728\u200b not usable 4.00 MiB [root@localhost ~]# pvdisplay   --- Physical volume ---   PV Name               /dev/sda3   VG Name               ROOTVG   PV Size               58.63 GiB / not usable 4.00 MiB   Allocatable           yes    PE Size               4.00 MiB   Total PE              15009   Free PE               1   Allocated PE          15008   PV UUID               HmgWNM-F3Cs-NGAb-Xz1V-DLtN-fN0g-eJJ512</li> </ul>"},{"location":"linux/TODO.html#links","title":"Links","text":"<ul> <li>How to Create Your Own Repositories for Packages</li> <li>SUSE Linux Enterprise Server \u200b\u6587\u6863\u200b</li> </ul>"},{"location":"linux/cheetsheet.html","title":"cheetsheet","text":""},{"location":"linux/cheetsheet.html#_1","title":"\u67e5\u770b\u200b\u5e8f\u5217\u53f7","text":"<pre><code># &gt; RHEL6\ncat /sys/devices/virtual/dmi/id/product_serial\n\n# RHEL5\nsudo dmidecode -s system-serial-number\n</code></pre>"},{"location":"linux/cheetsheet.html#_2","title":"\u53c2\u8003","text":"<ol> <li>Extract the Linux serial number without sudo</li> </ol>"},{"location":"linux/chrony.html","title":"Chrony","text":"<pre><code># \u200b\u624b\u5de5\u200b\u540c\u6b65\u200b\nsudo chronyc -a makestep\n</code></pre>"},{"location":"linux/concepts.html","title":"\u6982\u5ff5\u200b\u7406\u89e3","text":"<p>\u200b\u5bf9\u200b\u4e00\u4e9b\u200b\u96be\u61c2\u200b\u6216\u8005\u200b\u5bb9\u6613\u200b\u6df7\u6dc6\u200b\u7684\u200b\u6982\u5ff5\u200b\u8fdb\u884c\u200b\u8bf4\u660e\u200b\u3002</p>"},{"location":"linux/concepts.html#chroot","title":"chroot","text":"<p>chroot\uff0c\u200b\u5373\u200b change root directory\uff08\u200b\u66f4\u6539\u200b root \u200b\u76ee\u5f55\u200b\uff09\u3002\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u4e2d\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u90fd\u200b\u662f\u200b\u4ee5\u200b /\uff0c\u200b\u5373\u200b\u4ee5\u6839\u200b (root) \u200b\u5f00\u59cb\u200b\u7684\u200b\u3002\u200b\u800c\u200b\u5728\u200b\u4f7f\u7528\u200b chroot \u200b\u4e4b\u540e\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u7684\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5c06\u200b\u4ee5\u200b\u6307\u5b9a\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u4f5c\u4e3a\u200b / \u200b\u4f4d\u7f6e\u200b\u3002</p> <ul> <li>Linux chroot \u200b\u547d\u4ee4\u200b\u8be6\u89e3\u200b</li> </ul>"},{"location":"linux/cpu.html","title":"CPU","text":"<pre><code># CPUs = Threads per core X cores per socket X sockets\n$ lscpu | grep -E '^Thread|^Core|^Socket|^CPU\\('\nCPU(s):                8  # \nThread(s) per core:    2  # \u200b\u6bcf\u6838\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u6570\u200b\nCore(s) per socket:    4  # \u200b\u6bcf\u9897\u200b CPU \u200b\u7684\u200b\u6838\u6570\u200b\nSocket(s):             1  # CPU \u200b\u9897\u6570\u200b\n\n# \u200b\u83b7\u53d6\u200b CPU \u200b\u5382\u5546\u200b\u540d\u79f0\u200b\n$ lscpu | sed -nr '/Model name/ s/.*:\\s*(.*) @ .*/\\1/p'\nIntel(R) Atom(TM) CPU  Z3735F\n</code></pre>"},{"location":"linux/cpu.html#links","title":"Links","text":"<ul> <li>How to know number of cores of a system in Linux?</li> <li>How do I get the model name of my processor?</li> </ul>"},{"location":"linux/dhcp.html","title":"DHCP","text":"<pre><code># \u200b\u6d4b\u8bd5\u200b DHCP Server\nsudo nmap --script broadcast-dhcp-discover\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b IP\ndhcp-lease-list\n</code></pre>"},{"location":"linux/dhcp.html#links","title":"Links","text":"<ul> <li>https://serverfault.com/questions/171744/command-line-program-to-test-dhcp-service</li> </ul>"},{"location":"linux/env.html","title":"env","text":"<p>\u200b\u5173\u4e8e\u200b\u73af\u5883\u53d8\u91cf\u200b</p>"},{"location":"linux/env.html#etcenvironment","title":"/etc/environment","text":"<pre><code># /etc/environment \u200b\u53ea\u200b\u652f\u6301\u200b\u4ee5\u4e0b\u200b\u683c\u5f0f\u200b\uff0c\u200b\u4e0d\u200b\u652f\u6301\u200b\u4f7f\u7528\u200b export \u200b\u7b49\u200b shell \u200b\u8bed\u6cd5\u200b\nVARIABLE_NAME=\"Value\"\n</code></pre>"},{"location":"linux/env.html#_1","title":"\u7cfb\u7edf\u200b\u548c\u200b\u4e2a\u4eba\u200b\u73af\u5883\u200b\u8bbe\u7f6e","text":"<pre><code># \u200b\u7cfb\u7edf\u200b\u5168\u5c40\u200b\u7684\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\n\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b\uff1a/etc/profile\n\u200b\u975e\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b\uff1a/etc/bashrc\n\n# \u200b\u7528\u6237\u200b\u4e2a\u4eba\u200b\u7684\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\n\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b: $HOME/.bash_profile\n\u200b\u975e\u200b\u767b\u5f55\u200b\u73af\u5883\u200b\u8bbe\u7f6e\u200b\u6587\u4ef6\u200b\uff1a$HOME/.bashrc\n</code></pre>"},{"location":"linux/env.html#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How to Effectively Use the \u2018/etc/environment\u2019 File in Linux</li> <li>linux PATH\u200b\u73af\u5883\u53d8\u91cf\u200b\u5168\u200b\u89e3\u6790\u200b</li> </ul>"},{"location":"linux/faq.html","title":"FAQ","text":""},{"location":"linux/faq.html#_1","title":"\u54c1\u724c","text":"<ul> <li>x86_64<ul> <li>Intel</li> <li>\u200b\u6d77\u5149\u200b</li> </ul> </li> <li>aarch64<ul> <li>\u200b\u9cb2\u9e4f\u200b</li> <li>\u200b\u98de\u817e\u200b</li> </ul> </li> </ul>"},{"location":"linux/ftp.html","title":"FTP","text":""},{"location":"linux/ftp.html#lftp","title":"LFTP","text":"<p>\u200b\u4f7f\u7528\u200b</p> <pre><code>$ lftp 21.123.39.160 -u fhftp\nPassword:\nlftp fhftp@21.123.39.160:~&gt; put c.txt\n6 bytes transferred\nlftp fhftp@21.123.39.160:~&gt; ls\ntotal 1\n-rw-r-----   1 fhftp      fprs             6 Dec  7 12:41 c.txt\n</code></pre> <p>\u200b\u4e3b\u52a8\u200b\u6a21\u5f0f\u200b</p> <pre><code>set ftp:passive-mode off\n</code></pre> <p>\u200b\u5e38\u7528\u547d\u4ee4\u200b</p> <pre><code># ls \u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\u5185\u5bb9\u200b\n!dir \n!dir /opt/www\n\n# \u200b\u5207\u6362\u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\nlcd /tmp\n\n# \u200b\u67e5\u770b\u200b\u73b0\u5728\u200b\u6240\u5728\u200b\u672c\u5730\u200b\u4f4d\u7f6e\u200b\nlpwd\n</code></pre>"},{"location":"linux/grub.html","title":"grub","text":"<pre><code>grub2-setpassword\n</code></pre>"},{"location":"linux/iptables.html","title":"iptables","text":""},{"location":"linux/iptables.html#_1","title":"\u5b89\u88c5","text":"<pre><code>systemctl stop firewalld \nsystemctl disable firewalld \n\nyum -y install iptables-services \nsystemctl enable iptables\nsystemctl start iptables\n\nvim /etc/sysconfig/iptables\nsudo systemctl restart iptables\n\n$ sudo service iptables save\niptables: Saving firewall rules to /etc/sysconfig/iptables: [  OK  ]\n\n# RHEL7\u30018\uff0cv7update6 \u200b\u9700\u200b\u5355\u72ec\u200b\u5b89\u88c5\u200b\uff0cRHEL5\u30016\u3001kylin v10 \u200b\u9ed8\u8ba4\u200b\u81ea\u5e26\u200b\nsudo yum install iptables-services\n\n# \u200b\u4fdd\u5b58\u200b\u914d\u7f6e\u200b\uff0c\u200b\u914d\u7f6e\u200b\u4fdd\u5b58\u200b\u4f4d\u7f6e\u200b /etc/sysconfig/iptables\n# RHEL 5/6/\n/etc/init.d/iptables save\n\n# RHEL7\u30018/kylin v10/v7update6/\nservice iptables save\n\nservice iptables restart \n</code></pre>"},{"location":"linux/iptables.html#_2","title":"\u4f7f\u7528","text":"<pre><code># \u200b\u67e5\u770b\u200b\u89c4\u5219\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b iptables -t filter -L\niptables -L\n\n# \u200b\u53ea\u200b\u770b\u200b INPUT \u200b\u94fe\u200b\u7684\u200b filter \u200b\u8868\u200b\niptables -nvL INPUT --line-numbers\n\n# \u200b\u5728\u200b\u8868\u5934\u200b\u63d2\u5165\u200b\u89c4\u5219\u200b -I insert\niptables -t filter -I INPUT -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u6216\u8005\u200b\u5ffd\u7565\u200b -t filter \u200b\u9ed8\u8ba4\u200b\u5c31\u662f\u200b\u7f16\u8f91\u200b filter \u200b\u8868\u200b\niptables -I INPUT -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u5728\u200b\u8868\u5c3e\u200b\u8ffd\u52a0\u200b\u89c4\u5219\u200b -A append\niptables -A INPUT -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u5c06\u200b\u89c4\u5219\u200b\u63d2\u5165\u200b\u7279\u5b9a\u200b\u4f4d\u7f6e\u200b\niptables -I INPUT 2 -s 172.16.230.101 -j ACCEPT\n\n# \u200b\u6e05\u7a7a\u200b\u6240\u6709\u200b\u94fe\u8868\u200b\u7684\u200b\u89c4\u5219\u200b\niptables -F \n\n# \u200b\u4ec5\u4ec5\u200b\u6e05\u7a7a\u200b filter \u200b\u8868\u200b\u7684\u200b\u89c4\u5219\u200b\niptables -t filter -F\n\n# \u200b\u4ec5\u4ec5\u200b\u6e05\u7a7a\u200b INPUT \u200b\u94fe\u200b filter \u200b\u8868\u200b\u7684\u200b\u89c4\u5219\u200b\niptables -t filter -F INPUT\n</code></pre>"},{"location":"linux/iptables.html#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<pre><code># Yes, once you have added a rule to iptables it becomes active immediately - this is why you should be careful with your rules as it is possible to lock yourself out.\n\n# The iptables-save command writes a series of iptables commands to a file such that the current state of the firewall can be saved. If you want to restore that state you can use the iptables-restore command.\n</code></pre>"},{"location":"linux/iptables.html#links","title":"Links","text":"<ul> <li>iptables \u200b\u7cfb\u5217\u200b\u6587\u7ae0\u200b</li> <li>Is it enough adding iptables rules without restart?</li> <li>Is \"iptables-save\" will reload iptable configuration?</li> <li>3 ways to make iptables persistent</li> </ul>"},{"location":"linux/iso.html","title":"\u523b\u5f55\u5149\u76d8","text":""},{"location":"linux/iso.html#dd","title":"dd","text":"<pre><code>dd if=rhcos-4.8.14-x86_64-live.x86_64.iso of=&lt;dev/sdx&gt; status=progress\n</code></pre>"},{"location":"linux/iso.html#ventoy","title":"Ventoy","text":"<p>\u200b\u521d\u59cb\u5316\u200b U \u200b\u76d8\u200b</p> <pre><code>wget https://github.com/ventoy/Ventoy/releases/download/v1.0.91/ventoy-1.0.91-linux.tar.gz\ntar -zxvf ventoy-1.0.91-linux.tar.gz\ncd ventoy-1.0.91\nsudo sh Ventoy2Disk.sh -i /dev/sdX\n</code></pre> <p>\u200b\u5c06\u200b iso \u200b\u6587\u4ef6\u200b\u62f7\u8d1d\u5230\u200b U \u200b\u76d8\u200b</p> <pre><code>cp Win10_22H2_Chinese_Simplified_x64v1.iso /path/to/Ventory\n</code></pre> <p>\u200b\u63d2\u5165\u200b U \u200b\u76d8\u540e\u200b\uff0c\u200b\u8fdb\u5165\u200b BIOS\uff0c\u200b\u5173\u95ed\u200b Secure Boot \u200b\u5e76\u200b\u8bbe\u7f6e\u200b\u6210\u200b\u4ece\u200b U \u200b\u76d8\u200b\u542f\u52a8\u200b\u3002</p> <p>Note</p> <p>\u200b\u5fc5\u987b\u200b\u5173\u95ed\u200b Secure Boot \u200b\u529f\u80fd\u200b\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u51fa\u73b0\u200b <code>Verification failed: (0x1A) Security Violation</code> \u200b\u62a5\u9519\u200b\u3002</p>"},{"location":"linux/iso.html#_2","title":"\u53c2\u8003","text":"<ul> <li>https://www.ventoy.net/cn/doc_start.html#doc_linux_cli</li> <li>https://askubuntu.com/a/1456906</li> <li>https://github.com/pbatard/rufus</li> </ul>"},{"location":"linux/journalctl.html","title":"journalctl","text":"<pre><code># displays the messages from the current boot\njournalctl -k\n\n# view previous boots with the -b option\njournalctl -b\n</code></pre>"},{"location":"linux/kickstart.html","title":"PXE \u200b\u81ea\u52a8\u200b\u88c5\u673a","text":""},{"location":"linux/kickstart.html#iso","title":"\u901a\u8fc7\u200b ISO \u200b\u642d\u5efa\u200b\u8f6f\u4ef6\u200b\u6e90","text":"<pre><code># \u200b\u6302\u8f7d\u200b ISO \u200b\u5230\u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\nmount rhel-server-7.9-x86_64-dvd.iso /opt/mirror/rhel79\n\n# \u200b\u914d\u7f6e\u200b Nginx \u200b\u80fd\u200b\u8bbf\u95ee\u200b\u955c\u50cf\u200b\u6e90\u200b\nroot /opt/mirror/rhel79;\nautoindex on\n</code></pre>"},{"location":"linux/kickstart.html#kickstart","title":"\u51c6\u5907\u200b Kickstart","text":"<pre><code># \u200b\u914d\u7f6e\u200b Nginx \u200b\u80fd\u200b\u8bbf\u95ee\u200b ks.cfg\nalias /opt/ks;\n</code></pre>"},{"location":"linux/kickstart.html#dhcp","title":"\u642d\u5efa\u200b DHCP","text":"<pre><code># \u200b\u5b89\u88c5\u200b DHCP Server\nsudo apt install isc-dhcp-server\n\n## /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\nlog-facility local7;\n\nsubnet 192.168.88.0 netmask 255.255.255.0 {\n range 192.168.88.100 192.168.88.200;\n next-server 192.168.88.66;\n filename \"pxelinux/pxelinux.0\";\n}\n</code></pre>"},{"location":"linux/kickstart.html#tftp","title":"\u642d\u5efa\u200b TFTP","text":"<pre><code># \u200b\u5b89\u88c5\u200b tftp\nsudo apt install tftpd-hpa\n\n# \u200b\u9ed8\u8ba4\u200b\u914d\u7f6e\u200b /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/var/lib/tftpboot\"\nTFTP_ADDRESS=\":69\"\nTFTP_OPTIONS=\"--secure\"\n\n# \u200b\u51c6\u5907\u200b pxelinux.0\ncp /opt/mirror/rhel79/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\n\nmkdir /var/lib/tftpboot/pxelinux\ncp usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/pxelinux/\ncp usr/share/syslinux/vesamenu.c32 /var/lib/tftpboot/pxelinux/\n\n# RHEL\ne28413b36fee074c30554f8c9e54ca2c  pxelinux.0\n# Kylin V10\ndc53ded43315e73f09234a2b88fce38c  pxelinux.0\n\n# \u200b\u51c6\u5907\u200b\u5185\u6838\u200b\u6587\u4ef6\u200b\nmkdkir -p /var/lib/tftpboot/pxelinux/images/rhel79/\ncp /opt/mirror/rhel79/images/pxeboot/{vmlinuz,initrd.img} /var/lib/tftpboot/pxelinux/images/rhel79/\n\n# \u200b\u51c6\u5907\u200b\u83dc\u5355\u200b\u6587\u4ef6\u200b\nmkdir /var/lib/tftpboot/pxelinux/pxelinux.cfg\ncp /opt/mirror/rhel79/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux/pxelinux.cfg/default\n\n# \u200b\u4fee\u6539\u200b\u83dc\u5355\u200b\u6587\u4ef6\u200b\ndefault linux\n...\nlabel linux\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  menu default\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img ip=dhcp inst.ks=http://192.168.88.66/ks/ks.cfg quiet\n...\n\n# \u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\n/var/lib/tftpboot/\n\u2514\u2500\u2500 pxelinux\n    \u251c\u2500\u2500 images\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 rhel79\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n    \u251c\u2500\u2500 pxelinux.0\n    \u2514\u2500\u2500 pxelinux.cfg\n        \u2514\u2500\u2500 default\n</code></pre>"},{"location":"linux/kickstart.html#_1","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b IP\ndhcp-lease-list\n\n# \u200b\u6d4b\u8bd5\u200b DHCP Server\nsudo nmap --script broadcast-dhcp-discover\n\n# \u200b\u6d4b\u8bd5\u200b UDP \u200b\u7aef\u53e3\u200b\u662f\u5426\u200b\u901a\u200b\nnmap 10.0.0.1 -sU -pU:69\n</code></pre>"},{"location":"linux/kickstart.html#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Installing and Configuring TFTP Server on Ubuntu</li> <li>How to install and configure isc-dhcp-server</li> <li>01-\u200b\u81ea\u52a8\u5316\u200b\u88c5\u673a\u200b\u5de5\u5177\u200b-kickstart</li> <li>Need to set up yum repository for locally-mounted DVD on Red Hat Enterprise Linux 7</li> <li>27.3. Kickstart Syntax Reference</li> <li>PXE\u200b\u90e8\u7f72\u200b\u5b9e\u65bd\u200b</li> <li>Chapter 24. Preparing for a Network Installation</li> <li>How to set-up and configure a PXE Server</li> <li>List Assigned DHCP IP Addresses</li> <li>How do I configure syslinux to boot immediately</li> <li>dhcp-relay custom log file</li> <li>Sample kickstart partition example (RAID, LVM, Multipath, Simple,..)</li> <li>s14.\u200b\u8fd0\u7ef4\u200b\u81ea\u52a8\u5316\u200b\u4e4b\u200b\u7cfb\u7edf\u200b\u90e8\u7f72\u200b -- \u200b\u5b9e\u6218\u200b\u6848\u4f8b\u200b\uff1akickstart\u200b\u6587\u4ef6\u200b\u5236\u4f5c\u200b\u8fc7\u7a0b\u200b</li> <li>Why does Red Hat Enterprise Linux 7.6 kickstart installation not create bond interfaces properly?</li> <li>\u200b\u865a\u62df\u673a\u200b\u4e0b\u9762\u200b\u5b9e\u73b0\u200b\u53cc\u7f51\u5361\u200b\u7ed1\u5b9a\u200b <li>Linux: Create virtual network interface</li> <li>Introduction to Linux interfaces for virtual networking</li>"},{"location":"linux/kylin.html","title":"Kylin","text":""},{"location":"linux/kylin.html#_1","title":"\u67e5\u770b\u200b\u7248\u672c","text":"<pre><code>nkvers\ncat /etc/.productinfo\n</code></pre>"},{"location":"linux/kylin.html#_2","title":"\u914d\u7f6e\u200b\u7f51\u7edc","text":"<pre><code># \u200b\u914d\u7f6e\u200b IP\n[root@test ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens33\nTYPE=Ethernet\nPROXY_METHOD=none\nBROWSER_ONLY=no\n#BOOTPROTO=dhcp\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=ens33\nUUID=c67c9f61-64d2-44ad-999a-80b9f260a775\nDEVICE=ens33\n#ONBOOT=no\n\nONBOOT=yes\nBOOTPROTO=static\nIPADDR=172.16.230.199\nNETMASK=255.255.255.0\nGATEWAY=172.16.230.2\nDNS1=223.5.5.5\nDNS2=114.114.114.114\n\n# \u200b\u91cd\u542f\u200b\u7f51\u5361\u200b\nifdown ens33\nifup ens33\n\n# nmcli \u200b\u91cd\u65b0\u200b\u52a0\u8f7d\u200b\u7f51\u5361\u200b\u914d\u7f6e\u6587\u4ef6\u200b\nnmcli connection load /etc/sysconfig/network-scripts/ifcfg-ens33\nnmcli connection up ens33\n\n# \u200b\u6216\u8005\u200b\u91cd\u65b0\u200b\u52a0\u8f7d\u200b\u6240\u6709\u200b\u7f51\u5361\u200b\u914d\u7f6e\u6587\u4ef6\u200b\nnmcli connection reload\nnmcli connection up ens33\n</code></pre>"},{"location":"linux/kylin.html#_3","title":"\u4fee\u6539\u200b\u5b57\u7b26\u96c6","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u5b57\u7b26\u96c6\u200b\nlocale\n\n# \u200b\u4f7f\u7528\u200b localectl \u200b\u547d\u4ee4\u200b\u4fee\u6539\u200b\nsudo localectl set-locale LANG=en_US.UTF-8\n\n# \u200b\u6216\u8005\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b\n[root@test ~]# vim /etc/locale.conf\nLANG=en_US.UTF-8\n</code></pre>"},{"location":"linux/kylin.html#_4","title":"\u4fee\u6539\u200b\u65f6\u200b\u533a","text":"<pre><code># \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u53ef\u7528\u200b\u65f6\u200b\u533a\u200b\nsudo timedatectl list-timezones\n\n# \u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u4e1c\u516b\u533a\u200b\nsudo timedatectl set-timezone Asia/Shanghai\n</code></pre>"},{"location":"linux/kylin.html#_5","title":"\u65f6\u95f4\u200b\u670d\u52a1","text":"<pre><code># \u200b\u914d\u7f6e\u200b\u65f6\u95f4\u200b\u670d\u52a1\u200b\n$ sudo vim /etc/chrony.conf\nserver ntp.aliyun.com iburst\n\n# \u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\u5e76\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u81ea\u542f\u52a8\u200b\nsudo systemctl restart chronyd\nsudo systemctl enable chronyd\n\n# \u200b\u67e5\u770b\u200b\u65f6\u95f4\u200b\u662f\u5426\u200b\u540c\u6b65\u200b\u6210\u529f\u200b\uff0cIP \u200b\u524d\u9762\u200b\u5e26\u200b * \u200b\u53f7\u200b\u8868\u793a\u200b\u540c\u6b65\u200b\u6210\u529f\u200b\n[root@test ~]# chronyc sources -v\n210 Number of sources = 1\n\n  .-- Source mode  '^' = server, '=' = peer, '#' = local clock.\n / .- Source state '*' = current synced, '+' = combined , '-' = not combined,\n| /   '?' = unreachable, 'x' = time may be in error, '~' = time too variable.\n||                                                 .- xxxx [ yyyy ] +/- zzzz\n||      Reachability register (octal) -.           |  xxxx = adjusted offset,\n||      Log2(Polling interval) --.      |          |  yyyy = measured offset,\n||                                \\     |          |  zzzz = estimated error.\n||                                 |    |           \\\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^* 203.107.6.88                  2   6   177    30  -2223us[-5612us] +/-   34ms\n\n# \u200b\u624b\u5de5\u200b\u540c\u6b65\u200b\nchronyc makestep\n</code></pre>"},{"location":"linux/kylin.html#_6","title":"\u5355\u7528\u6237\u200b\u6a21\u5f0f","text":"<p>\u200b\u5f00\u673a\u200b\u540e\u200b\uff0cGrub \u200b\u754c\u9762\u200b\u9009\u62e9\u200b\u5bf9\u5e94\u200b Kernel\uff0c\u200b\u6309\u200b e \u200b\u8fdb\u5165\u200b\u7f16\u8f91\u200b\u6a21\u5f0f\u200b</p> <p>\u200b\u5149\u6807\u200b\u5411\u4e0b\u200b\u79fb\u52a8\u200b\u81f3\u200b <code>linux</code> \u200b\u5f00\u5934\u200b\u7684\u200b\u884c\u200b\uff0c\u200b\u4fee\u6539\u200b <code>ro</code> \u200b\u4e3a\u200b <code>rw</code>\uff0c\u200b\u672b\u5c3e\u200b\u6dfb\u52a0\u200b <code>rd.break console=tty0</code>\uff0c\u200b\u6309\u200b <code>Ctrl X</code> \u200b\u6216\u200b <code>F10</code> \u200b\u4fdd\u5b58\u200b\u7ee7\u7eed\u200b</p> <p></p> <p>\u200b\u8f93\u5165\u200b <code>chroot /sysroot</code> \u200b\u5207\u6362\u200b\u81f3\u200b\u4e3b\u673a\u200b\u7cfb\u7edf\u200b</p> <p></p>"},{"location":"linux/kylin.html#links","title":"Links","text":"<ul> <li>Kylinv10\u200b\u4f7f\u7528\u200b\u7b14\u8bb0\u200b</li> <li>\u200b\u94f6\u6cb3\u200b\u9e92\u9e9f\u200b\u9ad8\u7ea7\u200b\u670d\u52a1\u5668\u200b\u64cd\u4f5c\u7cfb\u7edf\u200bV10(sp1)\u200b\u5b89\u88c5\u200b\u624b\u518c\u200b</li> </ul>"},{"location":"linux/locale.html","title":"locale","text":"<pre><code># \u200b\u6240\u6709\u200b\u8bed\u8a00\u200b\u6e05\u5355\u200b\u5728\u200b /etc/locale.gen\uff0c\u200b\u9700\u8981\u200b\u53d6\u6d88\u200b\u6ce8\u91ca\u200b\u624d\u80fd\u200b\u751f\u6548\u200b\n#en_SG ISO-8859-1\nen_US.UTF-8 UTF-8\n#en_US ISO-8859-1\n\n# \u200b\u7136\u540e\u200b\u6267\u884c\u200b\u751f\u6210\u200b locale\nlocale-gen\n\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u8bed\u8a00\u200b\nlocale\nlocalectl status\n\n# \u200b\u67e5\u770b\u200b\u652f\u6301\u200b\u7684\u200b\u8bed\u8a00\u200b\u5217\u8868\u200b\nlocale -a\nlocalectl list-locales\n\n# \u200b\u4fee\u6539\u200b\u8bed\u8a00\u200b\nlocalectl set-locale LANG=en_US.UTF-8\n\n# \u200b\u6216\u8005\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b /etc/locale.conf\nLANG=en_US.UTF-8\n\n# \u200b\u4fee\u6539\u200b\u540e\u200b\u9700\u8981\u200b\u91cd\u65b0\u200b\u767b\u5f55\u200b\u624d\u80fd\u200b\u751f\u6548\u200b\uff0c\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u65b9\u6cd5\u200b\u7acb\u5373\u200b\u751f\u6548\u200b\nunset LANG\n# RHEL7\nsource /etc/profile.d/lang.sh \n# archlinux\nsource /etc/profile.d/locale.sh\n</code></pre>"},{"location":"linux/locale.html#links","title":"Links","text":"<ul> <li>https://wiki.archlinux.org/title/locale</li> </ul>"},{"location":"linux/logrotate.html","title":"logrotate","text":"<pre><code># /etc/logrotate.d/applog\n/opt/logs/*.log \n/opt/logs/*/*.log \n/opt/logs/*/*/*.log \n{\n  size 20M\n  rotate 3\n  missingok\n  notifempty\n}\n\n# \u200b\u624b\u5de5\u200b\u6267\u884c\u200b\nsudo logrotate /etc/logrotate.d/applog --force --verbose\n</code></pre>"},{"location":"linux/logrotate.html#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How To Manage Logfiles with Logrotate on Ubuntu 16.04</li> <li>https://github.com/linkyard/docker-logrotate</li> </ul>"},{"location":"linux/lvm.html","title":"LVM","text":""},{"location":"linux/lvm.html#_1","title":"\u6dfb\u52a0\u200b\u78c1\u76d8","text":"<pre><code># \u200b\u4e0d\u200b\u91cd\u542f\u200b VM\uff0c\u200b\u5c06\u200b\u65b0\u200b\u78c1\u76d8\u200b\u52a0\u200b\u5230\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\necho \"- - -\" | tee /sys/class/scsi_host/host*/scan\n\n# \u200b\u67e5\u770b\u200b\u5757\u200b\u8bbe\u5907\u200b\nlsblk\n</code></pre>"},{"location":"linux/lvm.html#_2","title":"\u5212\u5206\u200b\u5206\u533a","text":"<pre><code># \u200b\u5206\u533a\u200b\u7c7b\u578b\u200b\u9009\u62e9\u200b Linux LVM \u200b\u5373\u200b 8e\nfdisk /dev/sdb\n</code></pre>"},{"location":"linux/lvm.html#pv","title":"\u521b\u5efa\u200b PV","text":"<pre><code># \u200b\u5c06\u200b 3 \u200b\u4e2a\u200b\u5206\u533a\u200b\u90fd\u200b\u521b\u5efa\u200b\u4e3a\u200b PV\npvcreate /dev/sdb{1,2,3}\n\n# \u200b\u6216\u8005\u200b\u5355\u72ec\u200b\u9010\u4e2a\u200b\u521b\u5efa\u200b\npvcreate /dev/sdb1\npvcreate /dev/sdb2\npvcreate /dev/sdb3\n\n# \u200b\u67e5\u770b\u200b\u521b\u5efa\u200b\u51fa\u6765\u200b\u7684\u200b PV\npvscan\npvdisplay\n</code></pre>"},{"location":"linux/lvm.html#vg","title":"\u521b\u5efa\u200b VG","text":"<pre><code># \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b 3 \u200b\u4e2a\u200b PV \u200b\u7684\u200b VG\nvgcreate DATAVG /dev/sdb{1,2,3}\n\n# \u200b\u6216\u8005\u200b\u5148\u200b\u521b\u5efa\u200b VG \u200b\u518d\u200b\u8ffd\u52a0\u200b PV\nvgcreate DATAVG /dev/sdb1\nvgextend DATAVG /dev/sdb2\nvgextend DATAVG /dev/sdb2\n\n# \u200b\u67e5\u770b\u200b VG\nvgscan\nvgdisplay\n</code></pre>"},{"location":"linux/lvm.html#lv","title":"\u5212\u5206\u200b LV","text":"<pre><code># \u200b\u6839\u636e\u200b PE \u200b\u6570\u91cf\u200b\u521b\u5efa\u200b\uff0c\u200b\u5148\u200b vgdisplay \u200b\u67e5\u770b\u200b\u5269\u4f59\u200b\u53ef\u7528\u200b PE\nlvcreate -l 6397 -n lv_data DATAVG\n\n# \u200b\u6216\u8005\u200b\u6839\u636e\u200b\u5927\u5c0f\u200b\u6765\u200b\u521b\u5efa\u200b\nlvcreate -L +25G -n lv_data DATAVG\n# \u200b\u6216\u8005\u200b\u4f7f\u7528\u200b\u6240\u6709\u200b\u5269\u4f59\u200b\u5bb9\u91cf\u200b\nlvcreate -l +100%free -n lv_data DATAVG\n\n\u200b\u9009\u9879\u200b\u4e0e\u200b\u53c2\u6570\u200b\uff1a\n-L  \uff1a\u200b\u540e\u9762\u200b\u63a5\u200b\u5bb9\u91cf\u200b\uff0c\u200b\u5bb9\u91cf\u200b\u7684\u200b\u5355\u4f4d\u200b\u53ef\u4ee5\u200b\u662f\u200b M,G,T \u200b\u7b49\u200b\uff0c\u200b\u8981\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u6700\u5c0f\u200b\u5355\u4f4d\u200b\u4e3a\u200b PE\uff0c\n      \u200b\u56e0\u6b64\u200b\u8fd9\u4e2a\u200b\u6570\u91cf\u200b\u5fc5\u987b\u200b\u8981\u662f\u200b PE \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u82e5\u200b\u4e0d\u200b\u76f8\u7b26\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u4f1a\u200b\u81ea\u884c\u200b\u8ba1\u7b97\u200b\u6700\u200b\u76f8\u8fd1\u200b\u7684\u200b\u5bb9\u91cf\u200b\u3002\n-l  \uff1a\u200b\u540e\u9762\u200b\u53ef\u4ee5\u200b\u63a5\u200b PE \u200b\u7684\u200b\u300e\u200b\u4e2a\u6570\u200b\u300f\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u6570\u91cf\u200b\u3002\u200b\u82e5\u200b\u8981\u200b\u8fd9\u4e48\u200b\u505a\u200b\uff0c\u200b\u5f97\u200b\u8981\u200b\u81ea\u884c\u200b\u8ba1\u7b97\u200b PE \u200b\u6570\u200b\u3002\n-n  \uff1a\u200b\u540e\u9762\u200b\u63a5\u200b\u7684\u200b\u5c31\u662f\u200b LV \u200b\u7684\u200b\u540d\u79f0\u200b\u5566\u200b\uff01\n\n# \u200b\u67e5\u770b\u200b LV\nlvscan\nlvdisplay\n</code></pre>"},{"location":"linux/lvm.html#_3","title":"\u521b\u5efa\u200b\u6587\u4ef6\u7cfb\u7edf","text":"<pre><code># \u200b\u683c\u5f0f\u5316\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\nmkfs.xfs /dev/DATAVG/lv_data \n\n# \u200b\u6302\u8f7d\u200b\u4f7f\u7528\u200b\nmkdir /data\nmount /dev/DATAVG/lv_data /data\n\n# \u200b\u914d\u7f6e\u200b\u6210\u200b\u5f00\u673a\u200b\u81ea\u52a8\u200b\u6302\u8f7d\u200b\necho '/dev/mapper/DATAVG-lv_data /data xfs defaults 0 0' &gt;&gt; /etc/fstab\n</code></pre>"},{"location":"linux/lvm.html#lv_1","title":"\u653e\u5927\u200b LV \u200b\u5bb9\u91cf","text":"<pre><code>fdisk /dev/sdc\npvcreate /dev/sdc1\nvgextend DATAVG /dev/sdc1\nlvresize -l +100%free /dev/DATAVG/lv_data\n# lvresize -l +1279 /dev/DATAVG/lv_data\n# lvresize -L +10G /dev/DATAVG/lv_data\nxfs_growfs /dev/DATAVG/lv_data\n# ext4 \u200b\u4f7f\u7528\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\n# resize2fs /dev/DATAVG/lv_data\n</code></pre>"},{"location":"linux/lvm.html#links","title":"Links","text":"<ol> <li>\u200b\u903b\u8f91\u200b\u5377\u8f74\u200b\u7ba1\u7406\u5458\u200b (Logical Volume Manager)</li> <li>14.2\uff1a\u200b\u908f\u8f2f\u200b\u6372\u200b\u8ef8\u200b\u7ba1\u7406\u200b\u54e1\u200b (Logical Volume Manager)</li> <li>Rescan the SCSI Bus to Add a SCSI Device Without rebooting the VM</li> <li>Extending a logical volume in a virtual machine running Red Hat or Cent OS</li> </ol>"},{"location":"linux/network.html","title":"\u7f51\u7edc","text":""},{"location":"linux/network.html#cheetsheet","title":"CheetSheet","text":"<p>\u200b\u914d\u7f6e\u200b DNS</p> <pre><code># \u200b\u914d\u7f6e\u200b DNS \u200b\u670d\u52a1\u5668\u200b\nsudo nmcli con mod ens33 ipv4.dns \"223.5.5.5 223.6.6.6\"\n\n# \u200b\u7b49\u540c\u4e8e\u200b\u7f16\u8f91\u200b /etc/sysconfig/network-scripts/ifcfg-ens33 \nDNS1=223.5.5.5\nDNS2=223.6.6.6\n\n# Ignore automatically configured nameservers and search domains\nnmcli con mod ens33 ipv4.ignore-auto-dns yes\n\n## \u200b\u7b49\u540c\u4e8e\u200b\u7f16\u8f91\u200b /etc/sysconfig/network-scripts/ifcfg-ens33 \nPEERDNS=no\n\n# \u200b\u91cd\u542f\u200b NetworkManager\nsudo systemctl restart NetworkManager\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u9ed8\u8ba4\u200b\u7f51\u5173\u200b</p> <pre><code>$ ip route | grep default\ndefault via 192.168.88.1 dev enp60s0 proto static metric 100\n</code></pre>"},{"location":"linux/network.html#links","title":"Links","text":"<ul> <li>How to manage DNS in NetworkManager via console (nmcli)?</li> <li>Linux: Create virtual network interface</li> <li>How to configure network interface bonding on RHEL 8 / CentOS 8 Linux</li> <li>\u200b\u865a\u62df\u673a\u200b\u4e0b\u9762\u200b\u5b9e\u73b0\u200b\u53cc\u7f51\u5361\u200b\u7ed1\u5b9a"},{"location":"linux/pam.html","title":"PAM","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u4e86\u200b\u54ea\u4e9b\u200b\u6a21\u5757\u200b\nrpm -ql pam | grep lib\n\n# For Ubuntu\ndpkg -L libpam-modules | grep lib\n</code></pre>"},{"location":"linux/parted.html","title":"parted","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5206\u533a\u200b\u4fe1\u606f\u200b\nparted /dev/sdb print\n\n# create partition table\nparted /dev/sdb mklabel gpt\n\n# \u200b\u5ffd\u7565\u200b\u63d0\u793a\u4fe1\u606f\u200b\nparted -s /dev/sdb mklabel gpt\n</code></pre>"},{"location":"linux/parted.html#links","title":"Links","text":"<ul> <li>Parted</li> <li>Make parted start next partition after previous one - automatically?</li> </ul>"},{"location":"linux/pdf.html","title":"PDF","text":""},{"location":"linux/pdf.html#ghostscript","title":"ghostscript","text":"<p>\u200b\u5b89\u88c5\u200b</p> <pre><code>sudo apt install ghostscript\n</code></pre> <p>\u200b\u538b\u7f29\u200b</p> <p><pre><code># \u200b\u6309\u200b\u7535\u5b50\u4e66\u200b\u6bd4\u4f8b\u200b\u538b\u7f29\u200b\ngs -sDEVICE=pdfwrite -dCompatibilityLevel=1.0 -dPDFSETTINGS=/ebook -dNOPAUSE -dQUIET -dBATCH -sOutputFile=output.pdf input.pdf\n\n# \u200b\u81ea\u5b9a\u4e49\u200b\u5206\u8fa8\u7387\u200b\u4e3a\u200b 120 dpi\ngs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dDownsampleColorImages=true -dColorImageResolution=120 \\\n    -dNOPAUSE -dBATCH -sOutputFile=output.pdf input.pdf\n</code></pre> \u200b\u53c2\u8003\u200b</p> <ul> <li>Reduce PDF File Size in Linux</li> <li>How can I reduce the file size of a scanned PDF file?</li> </ul>"},{"location":"linux/redhat.html","title":"Redhat","text":""},{"location":"linux/redhat.html#links","title":"Links","text":"<ul> <li>Red Hat Enterprise Linux Release Dates</li> <li>Red Hat Enterprise Linux</li> </ul>"},{"location":"linux/repo.html","title":"\u642d\u5efa\u200b\u672c\u5730\u200b\u6e90","text":"<ul> <li>How to Create Your Own Repositories for Packages</li> </ul>"},{"location":"linux/security.html","title":"Security","text":""},{"location":"linux/security.html#links","title":"Links","text":"<ul> <li>RH442\u200b\u4e4b\u200b/etc/security/access.conf\u200b\u4e0e\u200btcp_wrappers</li> <li>Linux \u200b\u5982\u4f55\u200b\u8bbe\u7f6e\u200b\u5bc6\u7801\u200b\u590d\u6742\u5ea6\u200b\uff1f</li> </ul>"},{"location":"linux/shell.html","title":"Shell","text":""},{"location":"linux/shell.html#_1","title":"\u6280\u5de7","text":"<pre><code># \u200b\u5728\u200b\u811a\u672c\u200b\u4e2d\u200b\u5207\u6362\u200b\u5230\u200b root \u200b\u6267\u884c\u200b\n[ `whoami` = root ] || exec su -c $0 root\n[ `whoami` = root ] || exec sudo su - -c $0 root\n\n# \u200b\u5f53\u200b\u7528\u6237\u200b\u4e0d\u200b\u5b58\u5728\u200b\u65f6\u624d\u200b\u6dfb\u52a0\u200b\nid -u somename &amp;&gt;/dev/null || useradd somename \n\n# \u200b\u5728\u200b\u811a\u672c\u200b\u4e2d\u200b\u5207\u6362\u200b\u7528\u6237\u200b\u89d2\u8272\u200b\n#!/usr/bin/env bash\nwhoami\n\nsudo -i -u someuser bash &lt;&lt; EOF\necho \"In\"\nwhoami\nEOF\n\necho \"Out\"\nwhoami\n\n# \u200b\u83b7\u53d6\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u8def\u5f84\u200b\nSCRIPT=$(realpath \"$0\")\nSCRIPTPATH=$(dirname \"$SCRIPT\")\n\n# \u200b\u6839\u636e\u200b\u8fdb\u7a0b\u200b\u540d\u200b\u6740\u6b7b\u200b\u8fdb\u7a0b\u200b\nps ax | grep &lt;snippet&gt; | grep -v grep | awk '{print $1}' | xargs kill -9\n</code></pre>"},{"location":"linux/shell.html#tar","title":"tar","text":"<pre><code># \u200b\u5907\u4efd\u6587\u4ef6\u200b\u5217\u8868\u200b\u91cc\u9762\u200b\u7684\u200b\u6240\u6709\u200b\u5185\u5bb9\u200b\ntar -zcvf sos.tar.gz -T mylist.txt\n</code></pre>"},{"location":"linux/shell.html#du","title":"du","text":"<pre><code># \u200b\u4e0d\u200b\u7edf\u8ba1\u200b\u67d0\u4e9b\u200b\u76ee\u5f55\u200b\ndu -sh --exclude='demo01' --exclude='demo02' *\n</code></pre>"},{"location":"linux/shell.html#_2","title":"\u6267\u884c\u200b\u5386\u53f2\u8bb0\u5f55","text":"<pre><code># \u200b\u5c06\u200b\u7f13\u51b2\u533a\u200b\u5185\u5bb9\u200b\u62a5\u9519\u200b\u5230\u200b ~/.bash_history\nhistory -w\n\n# \u200b\u6e05\u7a7a\u200b\u7f13\u51b2\u533a\u200b\u5185\u5bb9\u200b\nhistory -c\n\n# \u200b\u663e\u793a\u200b\u65f6\u95f4\u200b\u6233\u200b\nexport HISTTIMEFORMAT='%F %T '\n\n# \u200b\u6301\u4e45\u200b\u5316\u200b\u914d\u7f6e\u200b\uff0c\u200b\u5199\u5165\u200b /etc/profile\necho \"export HISTTIMEFORMAT='%F %T '\" &gt;&gt; /etc/profile\nsource /etc/profile\n\n# \u200b\u5c06\u200b\u6240\u6709\u200b\u6267\u884c\u200b\u8fc7\u200b\u7684\u200b\u547d\u540d\u200b\u8bb0\u5f55\u200b\u5230\u200b\u6587\u4ef6\u200b\n# PROMPT_COMMAND \u200b\u73af\u5883\u53d8\u91cf\u200b\u4e2d\u200b\u8bbe\u5b9a\u200b\u7684\u200b\u5185\u5bb9\u200b\u5c06\u200b\u5728\u200b\u4ea4\u4e92\u5f0f\u200b\u811a\u672c\u200b\u7684\u200b\u63d0\u793a\u200b(PS1)\u200b\u51fa\u73b0\u200b\u4e4b\u524d\u200b\u88ab\u200b\u6267\u884c\u200b\nexport HISTORY_FILE=/var/log/audit_history.log\nexport PROMPT_COMMAND='{ date \"+%y-%m-%d %T ##### $(who am i |awk \"{print \\$1\\\" \\\"\\$2\\\" \\\"\\$5}\") #### $(pwd) #### $(history 1 | { read x cmd; echo \"$cmd\"; })\"; } &gt;&gt; $HISTORY_FILE' \n\n# \u200b\u6267\u884c\u200b shell \u200b\u65f6\u200b\u5c06\u200b\u547d\u4ee4\u200b\u8f93\u51fa\u200b\nset -o xtrace\n# or\nbash -x myscript.sh\n</code></pre>"},{"location":"linux/shell.html#links","title":"Links","text":"<ul> <li>\u200b\u8c01\u52a8\u200b\u4e86\u200b\u6211\u200b\u7684\u200b Linux\uff1f\u200b\u539f\u6765\u200b history \u200b\u53ef\u4ee5\u200b\u8fd9\u4e48\u200b\u5f3a\u5927\u200b\uff01</li> <li>Linux \u200b\u73af\u5883\u53d8\u91cf\u200bPROMPT_COMMAND</li> <li>How can I print each command before executing?</li> <li>Why doesn't \"sudo su\" in a shell script run the rest of the script as root?</li> <li>Add a user to the system only if it doesn't exist</li> <li>How do I use su to execute the rest of the bash script as that user?</li> <li>Reliable way for a Bash script to get the full path to itself [duplicate]</li> </ul>"},{"location":"linux/ssh.html","title":"SSH","text":""},{"location":"linux/ssh.html#_1","title":"\u4f7f\u7528","text":"<pre><code># Disable strict host key checking\nssh -o StrictHostKeyChecking=no user@remote-host \n\n# \u200b\u67e5\u770b\u200b\u5e2e\u52a9\u200b\u4fe1\u606f\u200b\nman sshd_config \n\n# \u200b\u67e5\u770b\u200b\u6240\u200b\u652f\u6301\u200b\u7684\u200b\u6240\u6709\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b\nssh -Q cipher\n\n# \u200b\u6d4b\u8bd5\u200b\u914d\u7f6e\u200b\n/usr/sbin/sshd -t\n\n# \u200b\u6253\u5370\u200b\u914d\u7f6e\u200b\n/usr/sbin/sshd -T | grep Ciphers\n\n# \u200b\u4ee5\u200b\u6307\u5b9a\u200b\u52a0\u5bc6\u200b\u65b9\u5f0f\u200b\u8fde\u63a5\u200b\nssh -c 3des-cbc localhost\nssh -c 3des-cbc -o macs=hmac-md5 bakroot02@172.31.96.102\n\n# \u200b\u8ffd\u52a0\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b 3des-cbc \u200b\u548c\u200b hmac-md5\uff0c\u200b\u9002\u5408\u200b RHEL8/Kylin V10 \u200b\u4ee5\u4e0b\u200b\u7248\u672c\u200b\u670d\u52a1\u5668\u200b\n$ sudo vi //etc/crypto-policies/back-ends/opensshserver.config\n/usr/sbin/sshd -D -oCiphers=3des-cbc,aes256-gcm@openssh.com,... -oMACs=hmac-md5,hmac-sha2-256-etm@openssh.com,...\n\nsudo systemctl daemon-reload\nsudo systemctl restart sshd\n\n# \u200b\u8ffd\u52a0\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b 3des-cbc \u200b\u548c\u200b hmac-md5\uff0c\u200b\u9002\u5408\u200b RHEL7 \u200b\u4ee5\u4e0b\u200b\u7248\u672c\u200b\u670d\u52a1\u5668\u200b\n$ sudo vi /etc/ssh/sshd_config \nCiphers +3des-cbc\nMACs +hmac-md5\n\nsudo systemctl restart sshd\n</code></pre>"},{"location":"linux/ssh.html#_2","title":"\u95ee\u9898","text":"<pre><code># WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!\nssh-keygen -R &lt;host&gt;\n</code></pre>"},{"location":"linux/ssh.html#links","title":"Links","text":"<ul> <li>\u200b\u5982\u4f55\u200b\u89e3\u6c7a\u200b SSH Server \u200b\u4f7f\u7528\u200b\u4e86\u200b\u4e0d\u200b\u5b89\u5168\u200b\u7684\u200b\u52a0\u5bc6\u200b\u6f14\u7b97\u6cd5\u200b: ARCFOUR\u3001CBC\u3001HMAC-MD5\u3001HMAC-RIPEMD160</li> <li>Harden SSH in CentOS 8</li> <li>restart ssh service while users still connected</li> <li>How to disable strict host key checking in ssh?</li> </ul>"},{"location":"linux/sudo.html","title":"sudo","text":"<pre><code># \u200b\u53ea\u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u514d\u200b\u5bc6\u5207\u200b\u6362\u200b\u5230\u200b\u6307\u5b9a\u200b\u7528\u6237\u200b\nuser-a ALL=(user-b:user-b) NOPASSWD:ALL\n\n# \u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u540d\u200b\u5207\u6362\u200b\nsudo -u lxapp01 -i\n</code></pre>"},{"location":"linux/sudo.html#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How do I allow only one user to su to another account?</li> </ul>"},{"location":"linux/systemd.html","title":"Systemd","text":""},{"location":"linux/systemd.html#usage","title":"Usage","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b runlevel\uff0c\u200b\u8fd8\u6709\u200b graphical.target\nsudo systemctl set-default multi-user.target\n\n# \u200b\u5207\u6362\u200b runlevel\nsudo systemctl isolate multi-user.target\n</code></pre>"},{"location":"linux/systemd.html#links","title":"Links","text":"<ul> <li>How To Use Systemctl to Manage Systemd Services and Units</li> <li>How to Change Runlevels (targets) in SystemD</li> </ul>"},{"location":"linux/ubuntu.html","title":"Ubuntu","text":""},{"location":"linux/ubuntu.html#hotspot","title":"\u4fee\u6539\u200b HotSpot \u200b\u5bc6\u7801","text":"<pre><code>sudo nm-connection-editor\n</code></pre>"},{"location":"linux/ubuntu.html#apt","title":"apt \u200b\u4f7f\u7528\u200b\u4ee3\u7406","text":"<pre><code>sudo apt -o acquire::http::proxy=\"http://127.0.0.1:1080\" install fluent-bit\n</code></pre>"},{"location":"linux/ubuntu.html#ip","title":"\u4fee\u6539\u200b\u7f51\u6bb5\u200b\u548c\u200bIP","text":"<pre><code>sudo vim /etc/NetworkManager/system-connections/Hotspot\n[ipv4]\ndns-search=\nmethod=shared\naddress1=10.0.0.1/24,10.0.0.1\n\n\nsudo service network-manager restart\n</code></pre>"},{"location":"linux/ubuntu.html#links","title":"Links","text":"<ul> <li>How to control IP ranges of Network Manager's hotspots?</li> </ul>"},{"location":"linux/ulimit.html","title":"ulimit","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u6253\u5f00\u200b\u4e86\u200b\u591a\u5c11\u200b\u4e2a\u200b\u6587\u4ef6\u200b\n# \u200b\u7b2c\u4e00\u5217\u200b\u662f\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u6570\u91cf\u200b\uff0c\u200b\u7b2c\u4e8c\u5217\u200b\u662f\u200b\u8fdb\u7a0b\u200bid\nlsof -n | awk '{print $2}' | sort | uniq -c | sort -nr | more\n\n# \u200b\u67e5\u770b\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u9650\u5236\u200b\ncat /proc/sys/fs/file-max\n\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u7528\u6237\u200b\u7684\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u9650\u5236\u200b\nulimit -n\n</code></pre>"},{"location":"linux/user.html","title":"\u7528\u6237","text":"<pre><code># \u200b\u6dfb\u52a0\u200b\u7528\u6237\u200b\nuseradd user01 &amp;&amp; echo PASSWORD | passwd --stdin user01\n\n# \u200b\u5206\u79bb\u200b\u6b65\u9aa4\u200b\nuseradd user01\npasswd user01\n\nuserdel user01\n\n# \u200b\u8fde\u540c\u200b\u5bb6\u200b\u76ee\u5f55\u200b\u4e00\u8d77\u200b\u5220\u9664\u200b\n# userdel -r user01\n</code></pre>"},{"location":"linux/vim.html","title":"VIM","text":"<pre><code># \u200b\u8bbe\u7f6e\u200b\u4e00\u4e2a\u200btab\u200b\u7b49\u4e8e\u200b4\u200b\u4e2a\u200b\u7a7a\u683c\u200b\n# vim /etc/vimrc\nset tabstop=4\nset shiftwidth=4\nset autoindent\nset expandtab\nset softtabstop=0\n\n# \u200b\u7f16\u8f91\u200b\u65f6\u200b\u51fa\u73b0\u200b1H\u200b\u5947\u602a\u200b\u5b57\u7b26\u200b\nexport LANG=en.UTF-8\n\n# \u200b\u6dfb\u52a0\u200b\u591a\u884c\u200b\u6ce8\u91ca\u200b\nCtrl + v\nI\n# \nESC\n\n# \u200b\u53d6\u6d88\u200b\u6ce8\u91ca\u200b\nCtrl + v \nDelete\n</code></pre>"},{"location":"linux/yum.html","title":"yum","text":""},{"location":"linux/yum.html#cheetsheet","title":"cheetsheet","text":"<pre><code># \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u66f4\u65b0\u200b\u8bb0\u5f55\u200b\nyum history list\n\nyum history info &lt;ID&gt;\n\n# \u200b\u641c\u7d22\u200b\u8f6f\u4ef6\u200b\nyum search nginx\n\n# \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u7248\u672c\u200b\nyum list nginx --showduplicates\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u7684\u200b\u6240\u6709\u200b\u8f6f\u4ef6\u200b\nyum list installed\n\n# \u200b\u6216\u8005\u200b\nrpm -qa\n\n# \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u662f\u5426\u200b\u5df2\u200b\u5b89\u88c5\u200b\nrpm -q nginx\n\n# \u200b\u67e5\u770b\u200b\u5df2\u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\nrpm -ql nginx\nrepoquery -l nginx\ndnf repoquery -l time\n\n# \u200b\u67e5\u770b\u200b\u67d0\u4e2a\u200b\u6587\u4ef6\u200b\u5c5e\u4e8e\u200b\u54ea\u4e2a\u200b\u5b89\u88c5\u5305\u200b\nrpm -qf /etc/pki/tls/certs/ca-bundle.crt\n\n# disable gpg signature checking\nrpm install --nogpgcheck\n\n# \u200b\u67e5\u770b\u200b\u8f6f\u4ef6\u200b\u5b89\u88c5\u65f6\u95f4\u200b\nrpm -qa --last rsyslog\n</code></pre>"},{"location":"linux/yum.html#_1","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"linux/yum.html#rpm-hang","title":"\u6267\u884c\u200b rpm \u200b\u547d\u4ee4\u200b\u540e\u200b\u4e00\u76f4\u200b hang \u200b\u4f4f","text":"<pre><code># Stop the install command and rebuild your rpm database.\nrm /var/lib/rpm/__db*\n\n# \u200b\u91cd\u5efa\u200b db\nrpm --rebuilddb\n</code></pre>"},{"location":"linux/yum.html#links","title":"Links","text":"<ul> <li>RPM command hangs</li> <li>How to check what package was updated using yum history?</li> </ul>"},{"location":"linux/alpine/index.html","title":"Alpine","text":""},{"location":"linux/alpine/index.html#_1","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u8fd0\u884c\u200b Golang \u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\napk add gcompat\n</code></pre>"},{"location":"linux/command/awk.html","title":"awk","text":"<pre><code># \u200b\u5206\u5272\u200b\u5185\u5bb9\u200b\u53d6\u200b\u5176\u4e2d\u200b\u4e00\u90e8\u5206\u200b\n$ uname -a\nLinux g7-7588 5.4.0-150-generic #167~18.04.1-Ubuntu SMP Wed May 24 00:51:42 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux\n$ uname -a | awk '{print $3}'\n5.4.0-150-generic\n$ uname -a | awk '{print $3}' | awk -F '-' '{print $1}'\n5.4.0\n$ uname -a | awk '{print $3}' | awk -F '-150-' '{print $1}'\n5.4.0\n</code></pre>"},{"location":"linux/command/crontab.html","title":"crontab","text":"<pre><code># \u200b\u6dfb\u52a0\u200b\u4e00\u6761\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\n(crontab -u suhua -l ; echo \"*/5 * * * * perl /home/mobman/test.pl\") | crontab -u suhua -\n\n# \u200b\u5220\u9664\u200b\u4e00\u6761\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\ncrontab -u suhua -l | grep -v 'perl /home/mobman/test.pl'  | crontab -u suhua -\n</code></pre>"},{"location":"linux/command/crontab.html#links","title":"Links","text":"<ul> <li>How to remove or delete single cron job using linux command?</li> </ul>"},{"location":"linux/command/curl.html","title":"curl","text":"<pre><code>curl --resolve www.aaa.com:443:22.145.31.245 https://www.aaa.com -kv\ncurl -H \"Host: www.aaa.com\" https://22.145.31.245\n</code></pre>"},{"location":"linux/command/date.html","title":"date","text":"<pre><code># 2024-11-01 10:20:20\ndate '+%Y-%m-%d %H:%M:%S'\n\n# ISO8601 2024-01-30T09:11:04+0800\ndate '+%Y-%m-%dT%H:%M:%S%z'\n</code></pre>"},{"location":"linux/command/du.html","title":"du","text":"<pre><code># \u200b\u5bf9\u200b\u7edf\u8ba1\u200b\u7ed3\u679c\u200b\u7684\u200b\u5927\u5c0f\u200b\u8fdb\u884c\u200b\u6392\u5e8f\u200b\ndu -sh * | sort -h\n\n# \u200b\u4e00\u5929\u200b\u5185\u200b\u4fee\u6539\u200b\u8fc7\u200b\u7684\u200b\u6587\u4ef6\u200b\u603b\u200b\u5927\u5c0f\u200b\nfind /opt/www -type f -mtime -1 -exec du -ch {} + | grep total$\n</code></pre>"},{"location":"linux/command/find.html","title":"find","text":"<pre><code># \u200b\u67e5\u627e\u200b 5 \u200b\u5206\u949f\u200b\u5185\u200b\u4fee\u6539\u200b\u8fc7\u200b\u7684\u200b\u6587\u4ef6\u200b\u5e76\u200b\u6392\u5e8f\u200b\nfind /etc/ -mmin -5 -printf '%TY-%Tm-%Td %TT %p\\n' | sort\n</code></pre>"},{"location":"linux/command/grep.html","title":"grep","text":"<p>```sh</p>"},{"location":"linux/command/grep.html#_1","title":"\u5ffd\u7565\u200b\u6ce8\u91ca\u200b\u548c\u200b\u7a7a\u884c","text":"<p>grep -v '#' filebeat.yml | grep -v '^$'</p>"},{"location":"linux/command/grep.html#_2","title":"\u4f7f\u7528\u200b $ \u200b\u53c2\u6570","text":"<p>echo 192.168.1. | xargs -I{} grep {} *.txt ```\u2018</p>"},{"location":"linux/command/grep.html#links","title":"Links","text":"<ul> <li>Make xargs pass as first parameter</li> </ul>"},{"location":"linux/command/info.html","title":"Info","text":"<pre><code># \u200b\u67e5\u770b\u200b\u670d\u52a1\u5668\u200b\u67b6\u6784\u200b x86_64\nuname -m\n\n# \u200b\u67e5\u770b\u200b\u662f\u200b 64 \u200b\u4f4d\u200b\u8fd8\u662f\u200b 32 \u200b\u4f4d\u200b Linux \u200b\u5185\u6838\u200b\ngetconf LONG_BIT\n\n# \u200b\u67e5\u770b\u200b CPU \u200b\u662f\u200b 32 \u200b\u4f4d\u200b\u8fd8\u662f\u200b  64 \u200b\u4f4d\u200b\uff0c\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u6709\u200b 1m \u200b\u8868\u793a\u200b\u662f\u200b 64 \u200b\u4f4d\u200b\ngrep -o -w 'lm' /proc/cpuinfo | sort -u\n</code></pre>"},{"location":"linux/command/ip.html","title":"IP","text":"<pre><code># \u200b\u67e5\u770b\u200b\u6240\u6709\u200b IP \u200b\u5730\u5740\u200b\nip -4 -o addr | awk '!/^[0-9]*: ?lo|link\\/ether/ {print $2\" \"$4}'\n</code></pre>"},{"location":"linux/command/ip.html#links","title":"Links","text":"<ul> <li>Bash script to get all IP addresses</li> </ul>"},{"location":"linux/command/kill.html","title":"kill","text":"<pre><code>ps -aux | grep nginx | awk '{print $2}' | xargs kill -9 $1\n</code></pre>"},{"location":"linux/command/memory.html","title":"Memory","text":"<pre><code># \u200b\u7edf\u8ba1\u200b\u5185\u5b58\u200b\u4f7f\u7528\u7387\u200b\nfree | grep Mem | awk '{print $3/$2 * 100.0}'\n\n# \u200b\u53d6\u200b\u6574\u6570\u200b\nfree | grep Mem | awk '{ printf(\"%d\", $3/$2 * 100.0) }'\n</code></pre>"},{"location":"linux/command/memory.html#_1","title":"\u53c2\u8003","text":"<ol> <li>How to get the percentage of memory free with a Linux command?</li> </ol>"},{"location":"linux/command/mktemp.html","title":"mktemp","text":"<pre><code># \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u4e34\u65f6\u6587\u4ef6\u200b\uff0c\u200b\u5982\u200b\uff1a/tmp/tmp.Uig45dNXN8\nmktemp\n\n# \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5982\u200b\uff1a/tmp/tmp.pqNKRl3vck\nmktemp -d\n</code></pre>"},{"location":"linux/command/sed.html","title":"sed","text":"<pre><code># \u200b\u66ff\u6362\u200b\u5b57\u7b26\u4e32\u200b\nsed 's/r\"LVM version:.*\"/\"xxx\"/g' hello\n</code></pre>"},{"location":"linux/command/stat.html","title":"stat","text":""},{"location":"linux/command/stat.html#cpu","title":"CPU","text":"<pre><code># \u200b\u67e5\u770b\u200b CPU \u200b\u6838\u5fc3\u200b\u6570\u200b\uff0cSocket \u200b\u7269\u7406\u200b\u5185\u6838\u200b\u3001Core \u200b\u5355\u6838\u200b\u6838\u5fc3\u200b\u6570\u200b\uff0cThread \u200b\u5355\u6838\u5fc3\u200b\u7ebf\u7a0b\u200b\u6570\u200b\n# lscpu | grep -E '^Thread|^Core|^Socket|^CPU\\('\nCPU(s):              128\nThread(s) per core:  2\nCore(s) per socket:  16\nSocket(s):           4\n</code></pre>"},{"location":"linux/command/stat.html#_1","title":"\u53c2\u8003","text":"<ul> <li>What is the meaning of CPU and core in Kubernetes?</li> </ul>"},{"location":"linux/command/tshark.html","title":"tshark","text":"<ul> <li>Decrypt TLS encrypted HTTP traffic for debugging</li> </ul>"},{"location":"linux/command/wget.html","title":"wget","text":"<pre><code># \u200b\u4e0b\u8f7d\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\nwget -r -np -nH -R index.html -R index.html.tmp https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/\nwget -r -np -nH -R index.html -R index.html.tmp https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/x86_64/\n\nwget -r -np -R \"index.html*\" http://example.com/configs/.vim/\n</code></pre>"},{"location":"linux/command/wget.html#links","title":"Links","text":"<ul> <li>Using wget to recursively fetch a directory with arbitrary files in it</li> </ul>"},{"location":"mirror/index.html","title":"Mirror","text":"<ul> <li>https://developer.aliyun.com/mirror/</li> <li>https://mirrors.aliyun.com/centos-vault/7.0.1406/isos/x86_64/</li> </ul>"},{"location":"mirror/index.html#centos","title":"CentOS","text":"<pre><code># \u200b\u5907\u4efd\u200b\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n\n# CentOS 7\nwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo\ncurl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo\n\n# EPEL\nwget -O /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo\ncurl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo\n\n# CentOS 8\nwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo\ncurl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo\n\n# CentOS 6\nwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-6.10.repo\ncurl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-6.10.repo\n\n# EPEL\nwget -O /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-6.repo\ncurl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-6.repo\n\n# \u200b\u5237\u65b0\u200b\u6e90\u200b\u7f13\u5b58\u200b\nyum clean all &amp;&amp; yum makecache\n</code></pre>"},{"location":"mirror/index.html#debian","title":"Debian","text":"<pre><code>sed -i 's#http://deb.debian.org#https://mirrors.163.com#g' /etc/apt/sources.list\n\n# or\nsudo sed -i 's/deb.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list\nsudo sed -i 's/http:/https:/g' /etc/apt/sources.list\n</code></pre>"},{"location":"mirror/index.html#ubuntu","title":"Ubuntu","text":"<pre><code>sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list\nsed -i s@/security.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list\n\n# PPA\nsed -i \"s/http:\\/\\/ppa.launchpad.net/https:\\/\\/launchpad.proxy.ustclug.org/g\" /etc/apt/sources.list.d/*.list\n\n# \u200b\u6216\u8005\u200b\nfind /etc/apt/sources.list.d/ -type f -name \"*.list\" -exec  sed  -i.bak -r  's#deb(-src)?\\s*http(s)?://ppa.launchpad.net#deb\\1 https\\2://launchpad.proxy.ustclug.org#ig' {} \\;\n</code></pre>"},{"location":"mirror/index.html#alpine","title":"Alpine","text":"<pre><code>sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories\n</code></pre>"},{"location":"mirror/index.html#nodejs","title":"Node.js","text":"<pre><code>npm config set registry https://registry.npmmirror.com\n</code></pre>"},{"location":"mirror/index.html#composer","title":"Composer","text":"<pre><code># \u200b\u5168\u5c40\u200b\ncomposer config -g repo.packagist composer https://mirrors.aliyun.com/composer/\n\n# \u200b\u5f53\u524d\u200b\u9879\u76ee\u200b\ncomposer config repo.packagist composer https://mirrors.aliyun.com/composer/\n</code></pre>"},{"location":"mirror/index.html#python","title":"Python","text":"<pre><code>pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/\n</code></pre>"},{"location":"mirror/index.html#go","title":"Go","text":"<pre><code>export GOPROXY=https://proxy.golang.com.cn,direct\n</code></pre>"},{"location":"mirror/index.html#time","title":"Time","text":"<pre><code>ntp.aliyun.com\n</code></pre>"},{"location":"mirror/centos5.html","title":"CentOS 5","text":"<pre><code>[base]\nname=CentOS-$releasever - Base\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/os/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/os/$basearch/\nenabled=1\ngpgcheck=0\n\n[updates]\nname=CentOS-$releasever - Updates\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/updates/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/updates/$basearch/\nenabled=1\ngpgcheck=0\n\n[extras]\nname=CentOS-$releasever - Extras\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/extras/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/extras/$basearch/\nenabled=1\ngpgcheck=0\n\n[centosplus]\nname=CentOS-$releasever - Plus\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/5.11/centosplus/$basearch/\n    https://mirrors.aliyun.com/centos-vault/5.11/extras/$basearch/\nenabled=1\ngpgcheck=0\n</code></pre>"},{"location":"mirror/create.html","title":"\u5236\u4f5c\u200b\u6e90","text":""},{"location":"mirror/create.html#yum","title":"yum \u200b\u6e90","text":"<pre><code># \u200b\u521d\u59cb\u5316\u200b yum \u200b\u6e90\u200b\ncreaterepo /opt/rpms\n\n# \u200b\u66f4\u65b0\u200b yum \u200b\u6e90\u200b\ncreaterepo --update /opt/rpms\n\n# repo \u200b\u6587\u4ef6\u200b\n[customrepo]\nname=CustomRepository\nbaseurl=file:///opt/rpms\nenabled=1\ngpgcheck=0\n</code></pre>"},{"location":"mirror/create.html#_2","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>How to Create Your Own Repositories for Packages</li> <li>Need to set up yum repository for locally-mounted DVD on Red Hat Enterprise Linux 7</li> <li>How To Install createrepo on Ubuntu 18.04</li> </ul>"},{"location":"mysql/index.html","title":"MySQL","text":""},{"location":"mysql/index.html#database","title":"Database","text":"<pre><code># \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b\nCREATE DATABASE mydatabase CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/index.html#_1","title":"\u521b\u5efa\u200b\u7528\u6237","text":"<pre><code># \u200b\u521b\u5efa\u200b\u7528\u6237\u200b\nCREATE USER 'username'@'172.16.%' IDENTIFIED BY 'password';\n\n# \u200b\u6388\u6743\u200b\nGRANT SELECT, INSERT, UPDATE, DELETE ON `dbname`.* TO 'username'@'172.16.%'\n\n# \u200b\u6388\u4e88\u200b\u7ba1\u7406\u5458\u200b\u6743\u9650\u200b\nGRANT ALL PRIVILEGES ON *.* TO 'username'@`172.16.%`;\n</code></pre>"},{"location":"mysql/index.html#_2","title":"\u4f7f\u7528","text":"<pre><code># \u200b\u622a\u53d6\u200b\u5b57\u7b26\u4e32\u200b\nSELECT CHAR_LENGTH(\"Have_a_good_day\") - LOCATE('_', REVERSE(\"Have_a_good_day\"))+1;\n</code></pre>"},{"location":"mysql/index.html#links","title":"Links","text":"<ul> <li>Last index of a given substring in MySQL</li> </ul>"},{"location":"mysql/utf8mb4.html","title":"\u4fee\u6539\u200b\u5b57\u7b26\u96c6\u200b\u4e3a\u200b utf8mb4","text":"<p>\u200b\u4fee\u6539\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u5b57\u7b26\u96c6\u200b\u4e3a\u200b utf8mb4\uff0c\u200b\u8ba9\u200b\u5b83\u200b\u80fd\u200b\u5b58\u50a8\u200b 4 \u200b\u5b57\u8282\u200b\u7684\u200b emoji \u200b\u8868\u60c5\u200b\u3002</p>"},{"location":"mysql/utf8mb4.html#_1","title":"\u4fee\u6539\u200b\u6570\u636e\u5e93","text":"<pre><code>ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/utf8mb4.html#_2","title":"\u4fee\u6539\u200b\u8868","text":"<pre><code>ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n</code></pre>"},{"location":"mysql/utf8mb4.html#_3","title":"\u81ea\u52a8\u200b\u751f\u6210\u200b\u4fee\u6539\u200b\u8bed\u53e5","text":"<p>\u200b\u521b\u5efa\u200b <code>gen_queries.sql</code> \u200b\u6587\u4ef6\u200b\uff0c\u200b\u8bf7\u200b\u7528\u200b\u5b9e\u9645\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u540d\u79f0\u200b\u66ff\u6362\u200b <code>YOUR_DATABASE_NAME</code> </p> <pre><code>USE information_schema;\nSELECT CONCAT(\"ALTER DATABASE `\",table_schema,\"` CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\") AS _sql\nFROM `TABLES` WHERE table_schema LIKE \"YOUR_DATABASE_NAME\" AND TABLE_TYPE='BASE TABLE' GROUP BY table_schema UNION\nSELECT CONCAT(\"ALTER TABLE `\",table_schema,\"`.`\",table_name,\"` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\") AS _sql\nFROM `TABLES` WHERE table_schema LIKE \"YOUR_DATABASE_NAME\" AND TABLE_TYPE='BASE TABLE' GROUP BY table_schema, table_name UNION\nSELECT CONCAT(\"ALTER TABLE `\",`COLUMNS`.table_schema,\"`.`\",`COLUMNS`.table_name, \"` CHANGE `\",column_name,\"` `\",column_name,\"` \",data_type,\"(\",character_maximum_length,\") CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\",IF(is_nullable=\"YES\",\" NULL\",\" NOT NULL\"),\";\") AS _sql\nFROM `COLUMNS` INNER JOIN `TABLES` ON `TABLES`.table_name = `COLUMNS`.table_name WHERE `COLUMNS`.table_schema like \"YOUR_DATABASE_NAME\" and data_type in ('varchar','char') AND TABLE_TYPE='BASE TABLE' UNION\nSELECT CONCAT(\"ALTER TABLE `\",`COLUMNS`.table_schema,\"`.`\",`COLUMNS`.table_name, \"` CHANGE `\",column_name,\"` `\",column_name,\"` \",data_type,\" CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\",IF(is_nullable=\"YES\",\" NULL\",\" NOT NULL\"),\";\") AS _sql\nFROM `COLUMNS` INNER JOIN `TABLES` ON `TABLES`.table_name = `COLUMNS`.table_name WHERE `COLUMNS`.table_schema like \"YOUR_DATABASE_NAME\" and data_type in ('text','tinytext','mediumtext','longtext') AND TABLE_TYPE='BASE TABLE';\n</code></pre> <p>\u200b\u751f\u6210\u200b\u4fee\u6539\u200b\u8bed\u53e5\u200b </p> <pre><code>mysql -u root -p -s &lt; gen_queries.sql &gt; queries.sql\n</code></pre> <p>\u200b\u6267\u884c\u200b\u4fee\u6539\u200b\u8bed\u53e5\u200b</p> <pre><code>mysql -u root -p &lt; queries.sql\n</code></pre>"},{"location":"mysql/utf8mb4.html#_4","title":"\u53c2\u8003","text":"<ul> <li>How to easily convert utf8 tables to utf8mb4 in MySQL 5.5</li> <li>utf8mb4-convert</li> </ul>"},{"location":"network/bond.html","title":"bond","text":""},{"location":"network/bond.html#_1","title":"\u5355\u200b\u7f51\u5361\u200b\u914d\u7f6e","text":"<pre><code>sudo nmcli connection add con-name eth0 ifname ens192 type Ethernet ip4 10.0.0.100/24 gw4 10.0.0.254 ipv4.dns 223.5.5.5 ipv4.method manual connection.autoconnect yes\nsudo nmcli connection up eth0\n</code></pre>"},{"location":"network/bond.html#bond_1","title":"\u53cc\u7f51\u5361\u200b bond","text":"<pre><code>sudo nmcli connection add type bond con-name bond0 ifname bond0 mode active-backup ip4 10.0.0.100/24 gw4 10.0.0.254 ipv4.dns 223.5.5.5 ipv4.method manual connection.autoconnect yes\nnmcli connection add type ethernet slave-type bond con-name bond0-eth0 ifname eth0 master bond0\nnmcli connection add type ethernet slave-type bond con-name bond0-eth1 ifname eth1 master bond0\n</code></pre>"},{"location":"network/bond.html#_2","title":"\u5207\u6362\u200b\u6d4b\u8bd5","text":"<pre><code>ifdown eth0\nifup eth0\ncat /proc/net/bonding/bond0\nnmcli con reload\nsystemctl restart network\n</code></pre>"},{"location":"network/bond.html#_3","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>Chapter 3. Configuring network bonding</li> <li>7.3. Network Bonding Using the NetworkManager Command Line Tool, nmcli</li> <li>Interface bonding CENTOS 6/7</li> </ul>"},{"location":"network/interface.html","title":"Interface","text":""},{"location":"network/interface.html#ip","title":"\u4e3a\u200b\u7f51\u5361\u200b\u6dfb\u52a0\u200b\u4e00\u4e2a\u200b IP","text":"<pre><code># \u200b\u6dfb\u52a0\u200b IP\nsudo ip address add &lt;ip-address&gt;/&lt;prefix-length&gt; dev &lt;interface&gt;\n\n# \u200b\u5220\u9664\u200b IP\nsudo ip address del 172.16.100.17/24 dev eth0\n\n# \u200b\u67e5\u770b\u200b IP\nip address show eth0\n</code></pre>"},{"location":"network/interface.html#_1","title":"\u53c2\u8003","text":"<ul> <li>How can I (from CLI) assign multiple IP addresses to one interface?</li> </ul>"},{"location":"nginx/index.html","title":"Nginx","text":""},{"location":"nginx/index.html#https","title":"HTTPS \u200b\u8bc1\u4e66\u200b\u914d\u7f6e\u200b\u5b9e\u4f8b","text":"<pre><code>server {\n  listen 443 ssl;\n\n  server_name example.com;\n\n  # \u200b\u670d\u52a1\u7aef\u200b\u8bc1\u4e66\u200b\u8ba4\u8bc1\u200b\n  ssl_certificate /etc/nginx/certs/example.com.pem;\n  ssl_certificate_key /etc/nginx/certs/example.com-key.pem;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_ciphers HIGH:!aNULL:!MD5;\n\n  # \u200b\u5ba2\u6237\u7aef\u200b\u8bc1\u4e66\u200b\u8ba4\u8bc1\u200b\n  ssl_client_certificate /etc/nginx/certs/ca.pem;\n  ssl_verify_client optional;\n\n  location / {\n    # \u200b\u81ea\u5b9a\u4e49\u200b\u5ba2\u6237\u7aef\u200b\u8ba4\u8bc1\u200b\u5931\u8d25\u200b\u65f6\u200b\u7684\u200b\u9519\u8bef\u4fe1\u606f\u200b\n    if ($ssl_client_verify != SUCCESS) {\n      return 500 ' ';\n    }\n\n    default_type text/html;\n    return 200 'ok';\n  }\n}\n</code></pre>"},{"location":"nginx/index.html#links","title":"Links","text":"<ul> <li>\u200b\u5de7\u7528\u200b Nginx \u200b\u5feb\u901f\u200b\u5b9e\u73b0\u200b HTTPS \u200b\u53cc\u5411\u200b\u8ba4\u8bc1\u200b</li> </ul>"},{"location":"openshift/index.html","title":"OpenShift","text":""},{"location":"openshift/index.html#event","title":"Event","text":"<pre><code># \u200b\u6309\u200b\u65f6\u95f4\u200b\u987a\u5e8f\u200b\u67e5\u770b\u200b\u4e8b\u4ef6\u200b\nkubectl get events --sort-by='.lastTimestamp'\n</code></pre>"},{"location":"openshift/index.html#namespace","title":"Namespace","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u5728\u200b\u54ea\u4e2a\u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b\noc config view --minify -o 'jsonpath={..namespace}'\n\n# \u200b\u6216\u8005\u200b\nkubectl config view --minify -o 'jsonpath={..namespace}'\n</code></pre>"},{"location":"openshift/index.html#pod","title":"Pod","text":"<pre><code># \u200b\u5f3a\u5236\u200b\u5220\u9664\u200b Pod\nkubectl delete pod --grace-period=0 --force --namespace &lt;NAMESPACE&gt; &lt;PODNAME&gt;\n\n# \u200b\u5220\u9664\u200b\u5f53\u524d\u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b\u4e0b\u200b\u6240\u6709\u200b Terminating \u200b\u7684\u200b Pod\nfor p in $(kubectl get pods | grep Terminating | awk '{print $1}'); do kubectl delete pod $p --grace-period=0 --force;done\n\n# \u200b\u5220\u9664\u200b\u96c6\u7fa4\u200b\u91cc\u200b\u6240\u6709\u200b Terminating \u200b\u7684\u200b Pod\nkubectl get pods --all-namespaces | awk '{if ($4==\"Terminating\") print \"oc delete pod \" $2 \" -n \" $1 \" --force --grace-period=0 \";}' | sh\n</code></pre>"},{"location":"openshift/audit.html","title":"\u5ba1\u8ba1\u200b\u65e5\u5fd7","text":""},{"location":"openshift/audit.html#_2","title":"\u53c2\u8003","text":"<ul> <li>Viewing audit logs</li> </ul>"},{"location":"openshift/faq.html","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"openshift/faq.html#mcp","title":"MCP \u200b\u81ea\u52a8\u66f4\u65b0\u200b\u5e76\u200b\u89e6\u53d1\u200b\u8282\u70b9\u200b\u91cd\u542f","text":"<p>\u200b\u5b98\u65b9\u200b\u5efa\u8bae\u200b MCP \u200b\u5e94\u8be5\u200b\u4fdd\u6301\u200b\u5f00\u542f\u200b\u72b6\u6001\u200b\u3002\u200b\u56e0\u4e3a\u200b\u4ece\u200b 4.7.4 \u200b\u7248\u672c\u200b\u5f00\u59cb\u200b\uff0capi-server \u200b\u8bc1\u4e66\u200b\u81ea\u52a8\u200b\u8f6e\u8f6c\u200b\u4e0d\u4f1a\u200b\u518d\u200b\u89e6\u53d1\u200b\u8282\u70b9\u200b\u91cd\u542f\u200b\uff0c\u200b\u800c\u200b\u5173\u95ed\u200b\u81ea\u52a8\u66f4\u65b0\u200b\u5219\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u8bc1\u4e66\u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u66f4\u65b0\u200b\u3002</p> <p>\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff0c\u200b\u5f00\u542f\u200b MCP \u200b\u81ea\u52a8\u66f4\u65b0\u200b</p> <pre><code>oc patch --type merge machineconfigpool/master -p '{\"spec\":{\"paused\":false}}'\noc patch --type merge machineconfigpool/worker -p '{\"spec\":{\"paused\":false}}'\n</code></pre> <ul> <li>Understand CA cert auto renewal in Red Hat OpenShift 4</li> <li>Disabling the Machine Config Operator from automatically rebooting by using the console</li> </ul>"},{"location":"openshift/faq.html#coreos-hostname","title":"CoreOS \u200b\u91cd\u542f\u200b\u540e\u200b hostname \u200b\u4e0d\u200b\u5bf9","text":"<p>\u200b\u5728\u200b\u6dfb\u52a0\u200b worker \u200b\u8282\u70b9\u200b\u65f6\u200b\uff0c\u200b\u867d\u7136\u200b\u4f7f\u7528\u200b <code>hostnamectl set-hostname</code> \u200b\u8bbe\u7f6e\u200b\u4e86\u200b hostname\uff0c\u200b\u4f46\u200b\u91cd\u542f\u200b\u540e\u200b\u4e3b\u673a\u540d\u200b\u53d8\u6210\u200b\u4e86\u200b localhost\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u5728\u200b ignition \u200b\u6587\u4ef6\u200b\u91cc\u200b\u6dfb\u52a0\u200b\u4e3b\u673a\u540d\u200b\u89e3\u51b3\u200b\u8be5\u200b\u95ee\u9898\u200b</p> <pre><code>$ cat worker.ign | jq . &gt; worker1.ocp1.example.com.ign\n$ cat worker1.ocp1.example.com.ign\n{\n  \"ignition\": {\n    \"config\": {\n      \"merge\": [\n        {\n          \"source\": \"https://api-int.test.example.com:22623/config/worker\"\n        }\n      ]\n    },\n    \"security\": {\n      \"tls\": {\n        \"certificateAuthorities\": [\n          {\n            \"source\": \"data:text/plain;charset=utf-8;base64,LS0tLS1CR....\"\n          }\n        ]\n      }\n    },\n    \"version\": \"3.1.0\"\n  },\n  \"storage\": {\n    \"files\": [\n      {\n        \"path\": \"/etc/hostname\",\n        \"contents\": {\n          \"source\": \"data:,worker1.ocp1.example.com\"\n        },\n        \"mode\": 420\n      }\n    ]\n  }\n}\n</code></pre> <ul> <li>Hostname can not persist when installing RHCOS</li> <li>How to configure persistent hostname when creating RHCOS in OpenShift 4.6 or later?</li> </ul>"},{"location":"openshift/faq.html#the-cluster-operator-image-registry-is-degraded","title":"the cluster operator image-registry is degraded","text":"<p>\u200b\u5347\u7ea7\u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u8fdb\u884c\u200b\uff0c\u200b\u5e76\u200b\u957f\u65f6\u95f4\u200b\u505c\u7559\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u72b6\u6001\u200b</p> <pre><code>$ oc get clusterversion -o wide\nNAME      VERSION                                   AVAILABLE   PROGRESSING   SINCE   STATUS\nversion   4.5.0-0.nightly-s390x-2020-06-29-163732   True        False         15h     Error while reconciling 4.5.0-0.nightly-s390x-2020-06-29-163732: the cluster operator image-registry is degraded\n</code></pre> <p>\u200b\u67e5\u770b\u200b co \u200b\u72b6\u6001\u200b</p> <pre><code>$ oc describe co image-registry\nImagePrunerDegraded: Job has reached the specified backoff limit\n</code></pre> <p>\u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b</p> <pre><code>oc patch imagepruner.imageregistry/cluster --patch '{\"spec\":{\"suspend\":true}}' --type=merge\noc -n openshift-image-registry delete jobs --all\n</code></pre> <ul> <li>ImagePrunerDegraded error stalling upgrade</li> <li>OpenShift v4.x - ImagePrunerDegraded: Job has reached the specified backoff limit</li> </ul>"},{"location":"openshift/faq.html#no-space-left-on-device","title":"no space left on device","text":"<p>Pod \u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u542f\u52a8\u200b\uff0c\u200b\u4e00\u76f4\u200b\u5904\u4e8e\u200b ContainerCreating \u200b\u72b6\u6001\u200b\uff0c\u200b\u67e5\u770b\u200b\u4e8b\u4ef6\u200b\u53d1\u73b0\u200b\u62a5\u200b <code>no space left on device</code> \u200b\u9519\u8bef\u200b</p> <pre><code>$ oc describe pods mysql8.0.28-nacos3-67965c8f4-6r4st\nEvents:\n  Type     Reason       Age   From               Message\n  ----     ------       ----  ----               -------\n  Normal   Scheduled    79s   default-scheduler  Successfully assigned zfqs/mysql8.0.28-nacos3-67965c8f4-6r4st to worker8.dev3.example.com\n  Warning  FailedMount  79s   kubelet            MountVolume.SetUp failed for volume \"kube-api-access-dp55p\" : write /var/lib/kubelet/pods/eda464b0-1376-4edb-b0ea-c495f18bbb9e/volumes/kubernetes.io~projected/kube-api-access-dp55p/..2023_05_29_08_16_36.1470493620/ca.crt: no space left on device\n  Warning  FailedMount  78s   kubelet            MountVolume.SetUp failed for volume \"kube-api-access-dp55p\" : write /var/lib/kubelet/pods/eda464b0-1376-4edb-b0ea-c495f18bbb9e/volumes/kubernetes.io~projected/kube-api-access-dp55p/..2023_05_29_08_16_37.1796074709/service-ca.crt: no space left on device\n</code></pre> <p>\u200b\u53d1\u73b0\u200b\u662f\u200b <code>limit.memory</code> \u200b\u548c\u200b <code>request.memory</code> \u200b\u7684\u200b\u5355\u4f4d\u200b\u5199\u9519\u200b\u4e86\u200b</p> <pre><code>resources:\n  requests:\n    memory: 256m\n    cpu: 100m\n  limits:\n    memory: 512m\n    cpu: 100m\n</code></pre> <p>\u200b\u5c06\u200b memory \u200b\u7684\u200b\u5355\u4f4d\u200b\u6539\u6210\u200b <code>Mi</code> \u200b\u5373\u53ef\u200b</p> <p>```yaml hl_lines=\"3,6\" resources:   requests:     memory: 256Mi     cpu: 100m   limits:     memory: 512Mi     cpu: 100m <pre><code>- https://github.com/orgs/strimzi/discussions/6399#discussioncomment-2224453\n\n## Cluster operator operator-lifecycle-manager-packageserver is stuck in progressing state\n\n\u200b\u5f53\u200b lifecycle operator \u200b\u8bc1\u4e66\u200b\u8fc7\u671f\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u8be5\u62a5\u200b\u9519\u200b\n\n```sh\n# \u200b\u68c0\u67e5\u200b\u8bc1\u4e66\u200b\u662f\u5426\u200b\u5df2\u8fc7\u671f\u200b\noc get secret packageserver-service-cert -o json -n openshift-operator-lifecycle-manager | jq -r '.data | .[\"tls.crt\"]' | base64 -d | openssl x509 -noout -dates\n\n# \u200b\u66f4\u65b0\u200b secret\noc delete secret packageserver-service-cert -n openshift-operator-lifecycle-manager\n</code></pre></p> <ul> <li>Cluster operator operator-lifecycle-manager-packageserver is stuck in progressing state</li> </ul>"},{"location":"openshift/init.html","title":"\u521d\u59cb\u5316","text":""},{"location":"openshift/init.html#_2","title":"\u65b0\u200b\u7528\u6237\u200b\u4e0d\u80fd\u200b\u521b\u5efa\u200b\u9879\u76ee","text":"<pre><code>oc patch clusterrolebinding.rbac self-provisioners -p '{\"subjects\": null}'\noc patch clusterrolebinding.rbac self-provisioners -p '{\"metadata\": {\"annotations\": {\"rbac.authorization.kubernetes.io/autoupdate\": \"false\" }}}'\n</code></pre> <ul> <li>Disabling project self-provisioning</li> </ul>"},{"location":"openshift/links.html","title":"\u6709\u7528\u200b\u7684\u200b\u94fe\u63a5","text":"<ul> <li>Annotating a route with a cookie</li> <li>OpenShift Container Platform 4.x Tested Integrations (for x86_x64)</li> <li>7.2. \u200b\u67e5\u770b\u200b\u5ba1\u8ba1\u200b\u65e5\u5fd7\u200b</li> <li>Configuring route timeouts</li> <li>How to request and pass an oauth token for REST API access in OpenShift 4</li> <li>Configuring the web console</li> <li>Session timeout in Openshift 4</li> <li>Disabling project self-provisioning</li> <li>Setting up additional trusted certificate authorities for builds</li> <li>Replacing an unhealthy etcd member</li> <li>Kubernetes: copying files into and out of containers without \u2018kubectl cp\u2019</li> <li>How to Copy Files from NODE using oc cp?</li> </ul>"},{"location":"openshift/registry.html","title":"\u955c\u50cf\u200b\u4ed3\u5e93","text":"<ol> <li>Using an external registry with OpenShift 4</li> <li>Adding certificate authorities to the cluster</li> </ol>"},{"location":"openshift/%E5%AE%89%E8%A3%85/index.html","title":"\u5b89\u88c5","text":"<p>\u200b\u672c\u6587\u200b\u8bb0\u5f55\u200b\u4e86\u200b\u5728\u200b\u79bb\u7ebf\u200b\u73af\u5883\u200b\u4e0b\u200b\u5b89\u88c5\u200b OpenShift 4.8.36 \u200b\u7684\u200b\u5b8c\u6574\u200b\u6b65\u9aa4\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/index.html#_2","title":"\u524d\u63d0","text":"<p>\u200b\u8981\u200b\u5b8c\u6210\u200b\u5b89\u88c5\u200b OpenShift\uff0c\u200b\u5fc5\u987b\u200b\u8981\u200b\u6709\u200b DNS\u3001Chrony\u3001\u200b\u8d1f\u8f7d\u200b\u5747\u8861\u5668\u200b\uff08HAProxy\u3001Nginx \u200b\u7b49\u200b\uff09\u3001\u200b\u955c\u50cf\u200b\u4ed3\u5e93\u200b\uff08Harbor\uff09\u3002</p> <ol> <li>CoreDNS</li> </ol>"},{"location":"openshift/%E5%AE%89%E8%A3%85/index.html#_3","title":"\u76f8\u5173\u200b\u8d44\u6e90","text":"<ul> <li>\u200b\u4e0b\u8f7d\u5b89\u88c5\u200b\u6587\u4ef6\u200b https://mirror.openshift.com/pub/openshift-v4/</li> <li>\u200b\u67e5\u770b\u200b\u6700\u65b0\u200b\u53d1\u884c\u7248\u200b https://openshift-release.apps.ci.l2s4.p1.openshiftapps.com/</li> <li>\u200b\u67e5\u770b\u200b\u5347\u7ea7\u200b\u8def\u5f84\u200b https://access.redhat.com/labs/ocpupgradegraph/update_path</li> <li>\u200b\u67e5\u770b\u200b\u4e0d\u540c\u200b\u7248\u672c\u200b\u4e4b\u95f4\u200b\u7684\u200b\u53d8\u5316\u200b https://openshift-release.apps.ci.l2s4.p1.openshiftapps.com/releasestream/4-stable/release/4.8.56?from=4.8.36</li> <li>[Red Hat OpenShift Container Platform Life Cycle Policy] (https://access.redhat.com/support/policy/updates/openshift#dates)</li> </ul>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns.html","title":"\u6dfb\u52a0\u200b\u57df\u540d\u89e3\u6790","text":"<p>\u200b\u4e0b\u9762\u200b\u4ee5\u200b CoreDNS \u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u5176\u4ed6\u200b DNS \u200b\u505a\u6cd5\u200b\u7c7b\u4f3c\u200b\u3002 </p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns.html#_2","title":"\u6b63\u5411\u200b\u89e3\u6790","text":"<p>\u200b\u65b0\u5efa\u200b db.ocp1.example.com \u200b\u6587\u4ef6\u200b\uff0c\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b</p> <pre><code>$ORIGIN ocp1.example.com.\n@   3600 IN SOA example.com. example.com. (\n                2017042745 ; serial\n                7200       ; refresh (2 hours)\n                3600       ; retry (1 hour)\n                1209600    ; expire (2 weeks)\n                3600       ; minimum (1 hour)\n                )\n\n    3600 IN NS ns.example.com.\n\napi         IN A     192.168.1.10\napi-int     IN A     192.168.1.10\n\n*.apps      IN A     192.168.1.10\n\nbootstrap   IN A     192.168.1.10\n\nmaster1     IN A     192.168.1.20\nmaster2     IN A     192.168.1.21\nmaster3     IN A     192.168.1.22\n\nworker1     IN A     192.168.1.30\nworker2     IN A     192.168.1.31\nworker3     IN A     192.168.1.32\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns.html#_3","title":"\u53cd\u5411\u200b\u89e3\u6790","text":"<p>\u200b\u65b0\u5efa\u200b db.1.168.192 \u200b\u6587\u4ef6\u200b\uff0c\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b</p> <pre><code>@   3600 IN SOA example.com. example.com. (\n                2017042745 ; serial\n                7200       ; refresh (2 hours)\n                3600       ; retry (1 hour)\n                1209600    ; expire (2 weeks)\n                3600       ; minimum (1 hour)\n                )\n\n    3600 IN NS ns.example.com.\n\n10     IN PTR     api.ocp1.example.com.\n10     IN PTR     api-int.ocp1.example.com.\n20     IN PTR     master1.ocp1.example.com.\n21     IN PTR     master2.ocp1.example.com.\n22     IN PTR     master3.ocp1.example.com.\n30     IN PTR     worker1.ocp1.example.com.\n31     IN PTR     worker2.ocp1.example.com.\n32     IN PTR     worker3.ocp1.example.com.\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns.html#corefile","title":"\u914d\u7f6e\u200b\u5230\u200b Corefile","text":"<pre><code>.:53 {\n    log\n    errors\n    cache\n\n    file db.ocp1.example.com ocp1.example.com\n    file db.1.168.192 1.168.192.in-addr.arpa\n}\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/dns.html#_4","title":"\u68c0\u67e5\u200b\u914d\u7f6e","text":"<p>\u200b\u8fd0\u884c\u200b\u4ee5\u4e0b\u200b\u811a\u672c\u200b\u68c0\u67e5\u200b DNS \u200b\u662f\u5426\u200b\u90fd\u200b\u914d\u7f6e\u200b\u6b63\u786e\u200b</p> <pre><code>#/bin/bash\n\nDNS_IP=127.0.0.1\n\ndeclare -A arr\narr[api.ocp1.example.com]=192.168.1.10\narr[api-int.ocp1.example.com]=192.168.1.10\narr[a.apps.ocp1.example.com]=192.168.1.10\narr[master1.ocp1.example.com]=192.168.1.20\narr[master2.ocp1.example.com]=192.168.1.21\narr[master3.ocp1.example.com]=192.168.1.22\narr[worker1.ocp1.example.com]=192.168.1.30\narr[worker2.ocp1.example.com]=192.168.1.31\narr[worker3.ocp1.example.com]=192.168.1.32\n\nfor key in \"${!arr[@]}\"; \ndo \n    ip=$(dig @$DNS_IP +short $key)\n    if [ \"$ip\" != \"${arr[$key]}\" ]; then\n        echo \"$key is ${arr[$key]}, result $ip\"\n    fi\n\n    domain=$(dig @$DNS_IP +short -x ${arr[$key]})\n\n    if [[ $key == a.* ]]; then\n        continue\n    fi\n\n    if [[ $key == api* ]]; then\n        domains=($domain)\n        if [[ ! \"${domains[*]}\" =~ \"${key}\" ]]; then\n            echo \"${arr[$key]} is $key, result ${array[*]}\"\n        fi\n    else\n        if [[ ! \"$domain\" == \"$key.\" ]]; then\n            echo \"${arr[$key]} is $key, result $domain\"\n        fi\n    fi\ndone\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html","title":"\u51c6\u5907\u200b\u5b89\u88c5\u200b\u4ecb\u8d28","text":""},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#_2","title":"\u9700\u8981\u200b\u7684\u200b\u4ecb\u8d28","text":"<ol> <li>OpenShift \u200b\u5b89\u88c5\u200b\u811a\u672c\u200b openshift-install-linux-4.8.36.tar.gz</li> <li>OpenShift oc \u200b\u5ba2\u6237\u7aef\u200b openshift-client-linux-4.8.36.tar.gz </li> <li>CoreOS \u200b\u5b89\u88c5\u200b\u5149\u76d8\u200b rhcos-4.8.14-x86_64-live.x86_64.iso</li> <li>machine configs \u200b\u751f\u6210\u200b\u5de5\u5177\u200b butane</li> <li>OpenShift \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b 4.8.36_releases</li> <li>\u200b\u4e00\u4e2a\u200b 4G+ \u200b\u7684\u200b U \u200b\u76d8\u200b\uff0c\u200b\u7528\u4e8e\u200b\u523b\u5f55\u200b\u5b89\u88c5\u200b\u5149\u76d8\u200b</li> </ol> <p>\u200b\u4ee5\u4e0a\u200b\u4ecb\u8d28\u200b\uff0c\u200b\u9664\u4e86\u200b\u4e0b\u8f7d\u200b OpenShift \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b\u9700\u8981\u200b\u767b\u5f55\u200b\uff0c\u200b\u5176\u4ed6\u200b\u4ecb\u8d28\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5728\u200b\u516c\u7f51\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#_3","title":"\u4e0b\u8f7d\u5b89\u88c5\u200b\u955c\u50cf","text":"<p>\u200b\u4ee5\u4e0b\u200b\u6b65\u9aa4\u200b\u5c06\u200b\u4e0b\u8f7d\u200b OpenShift \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b\u5230\u200b\u672c\u5730\u200b\u78c1\u76d8\u200b\uff0c\u200b\u955c\u50cf\u200b\u6bd4\u8f83\u200b\u5927\u200b\uff0c\u200b\u8bf7\u200b\u9884\u7559\u200b\u81f3\u5c11\u200b 20GB \u200b\u7a7a\u95f4\u200b\u3002</p> <p>Note</p> <p>\u200b\u56e0\u4e3a\u200b\u9700\u8981\u200b\u4ece\u200b\u7ea2\u5e3d\u200b\u5b98\u7f51\u200b\u4e0b\u8f7d\u200b\u955c\u50cf\u200b\uff0c\u200b\u5982\u679c\u200b\u7528\u200b\u4e2a\u4eba\u7535\u8111\u200b\u4e0b\u8f7d\u200b\uff0c\u200b\u901f\u5ea6\u200b\u4f1a\u200b\u6bd4\u8f83\u6162\u200b\uff0c\u200b\u800c\u4e14\u200b\u7ecf\u5e38\u200b\u4e2d\u65ad\u200b\uff0c \u200b\u6240\u4ee5\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b\u56fd\u5185\u200b\u7684\u200b\u4e91\u200b\u670d\u52a1\u5668\u200b\uff08\u200b\u4f8b\u5982\u200b\uff1a\u200b\u963f\u91cc\u200b\u4e91\u200b\u3001\u200b\u817e\u8baf\u200b\u4e91\u200b\u7b49\u200b\uff09\u200b\u8fdb\u884c\u200b\u4e0b\u8f7d\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#oc","title":"\u5b89\u88c5\u200b oc \u200b\u5ba2\u6237\u7aef","text":"<pre><code>tar -zxvf openshift-client-linux-4.8.36.tar.gz -C /usr/local/bin oc kubectl\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#pull-secerttxt","title":"\u83b7\u53d6\u200b pull-secert.txt","text":"<p>\u200b\u6253\u5f00\u200b https://console.redhat.com/openshift/install/pull-secret \u200b\u9875\u9762\u200b\uff0c\u200b\u4f7f\u7528\u200b\u8d26\u53f7\u200b\u767b\u5f55\u200b\u540e\u200b\u4e0b\u8f7d\u200b\u3002\u200b\u5982\u679c\u200b\u4f60\u200b\u6ca1\u6709\u200b\u8d26\u53f7\u200b\u53ef\u200b\u81ea\u884c\u200b\u6ce8\u518c\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#_4","title":"\u5c06\u200b\u955c\u50cf\u200b\u540c\u6b65\u200b\u5230\u200b\u672c\u5730","text":"<pre><code>oc adm release mirror -a pull-secret.txt 4.8.36 --to-dir ./4.8.36_release\n</code></pre> <p>Info</p> <p>\u200b\u4e0b\u8f7d\u200b\u5176\u4ed6\u200b\u7248\u672c\u200b\u7684\u200b\u955c\u50cf\u200b\u8bf7\u200b\u4fee\u6539\u200b <code>4.8.36</code> \u200b\u7248\u672c\u53f7\u200b\uff0c<code>oc adm release mirror --help</code> \u200b\u67e5\u770b\u200b\u66f4\u200b\u591a\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b\u3002 </p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#_5","title":"\u6253\u5305\u200b\u955c\u50cf\u6587\u4ef6\u200b\u5939","text":"<pre><code>tar -cvf 4.8.36_release.tar 4.8.36_release\n</code></pre>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#_6","title":"\u5236\u4f5c\u200b\u542f\u52a8\u76d8","text":"<pre><code>dd if=rhcos-4.8.14-x86_64-live.x86_64.iso of=&lt;dev/sdx&gt; status=progress\n</code></pre> <p>Note</p> <p>CoreOS \u200b\u5b89\u88c5\u200b\u955c\u50cf\u200b\u7684\u200b\u7248\u672c\u200b\u4e0d\u80fd\u200b\u9ad8\u8fc7\u200b\u73b0\u5728\u200b\u6b63\u5728\u200b\u5b89\u88c5\u200b\u7684\u200b OpenShift \u200b\u7684\u200b\u7248\u672c\u200b\u3002</p>"},{"location":"openshift/%E5%AE%89%E8%A3%85/download.html#_7","title":"\u53c2\u8003","text":"<ol> <li>Mirroring the OpenShift Container Platform image repository</li> <li>Installing with USB media</li> </ol>"},{"location":"openshift/%E5%AE%89%E8%A3%85/lb.html","title":"\u914d\u7f6e\u200b\u8d1f\u8f7d\u200b\u5747\u8861","text":"<p>TODO</p>"},{"location":"oracle/sqlplus.html","title":"sqlplus","text":"<pre><code># \u200b\u8dd1\u200b sql \u200b\u8bed\u53e5\u200b\necho exit | sqlplus user/pass@connect @scriptname\n</code></pre>"},{"location":"podman/index.html","title":"Podman","text":""},{"location":"podman/index.html#login","title":"Login","text":"<pre><code># \u200b\u5ffd\u7565\u200b\u8bc1\u4e66\u200b\u9a8c\u8bc1\u200b\ndocker login --tls-verify=false\n</code></pre>"},{"location":"pxe/index.html","title":"PXE","text":"<p>\u200b\u5feb\u901f\u200b\u64cd\u4f5c\u200b\u6307\u5f15\u200b\uff0c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\u5728\u200b Ubuntu 20.04 \u200b\u4e0b\u200b\u8fdb\u884c\u200b</p>"},{"location":"pxe/index.html#_1","title":"\u5b89\u88c5\u200b\u6240\u200b\u9700\u200b\u8f6f\u4ef6","text":"<pre><code>apt install tftpd-hpa isc-dhcp-server nginx\n</code></pre>"},{"location":"pxe/index.html#iso","title":"\u4e0b\u8f7d\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b ISO \u200b\u955c\u50cf","text":"<pre><code>rhel-server-7.9-x86_64-dvd.iso\nrhel-8.3-x86_64-dvd.iso\nKylin-Server-10-SP1-Release-Build20-20210518-x86_64.iso\nKylin-Server-10-SP2-x86-Release-Build09-20210524.iso\n</code></pre>"},{"location":"pxe/index.html#_2","title":"\u5236\u4f5c\u200b\u672c\u5730\u200b\u6e90","text":"<p>\u200b\u4ee5\u200b\u5236\u4f5c\u200b RHEL 7.9 \u200b\u672c\u5730\u200b\u6e90\u4e3a\u4f8b\u200b\uff0c\u200b\u5176\u4ed6\u200b\u53d1\u884c\u7248\u200b\u505a\u6cd5\u200b\u7c7b\u4f3c\u200b </p> <pre><code>mkdir -p /mnt/rhel79\nmount rhel-server-7.9-x86_64-dvd.iso /mnt/rhel79\nmkdir -p /var/www/html/rhel79/x86_64 \ncp -r /mnt/rhel79 /var/www/html/rhel79/x86_64/base\n\n$ sudo vim /etc/nginx/sites-enabled/default\nserver {\n  listen 80 default_server;\n  root /var/www/html;\n  autoindex on;\n}\n</code></pre>"},{"location":"pxe/index.html#kickstart","title":"\u5236\u4f5c\u200b Kickstart \u200b\u6587\u4ef6","text":"<p>\u200b\u53ef\u4ee5\u200b\u5148\u200b\u624b\u5de5\u200b\u5b89\u88c5\u200b\u597d\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u540e\u200b\uff0c\u200b\u4ece\u200b <code>/root/anaconda-ks.cfg</code> \u200b\u83b7\u53d6\u200b\u5230\u200b\u8be5\u200b\u6587\u4ef6\u200b</p> <pre><code>mkdir /var/www/html/kickstart\ncp rhel79.cfg /var/www/html/kickstart/\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/var/www/html\n\u251c\u2500\u2500 kickstart\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cdh.cfg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gbase.cfg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79.cfg\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1.cfg\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2.cfg\n\u251c\u2500\u2500 rhel79\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u251c\u2500\u2500 rhel83\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u251c\u2500\u2500 rhel84\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u251c\u2500\u2500 v10sp1\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 addons\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 updates\n\u2514\u2500\u2500 v10sp2\n    \u2514\u2500\u2500 x86_64\n        \u251c\u2500\u2500 addons\n        \u251c\u2500\u2500 base\n        \u2514\u2500\u2500 updates\n</code></pre>"},{"location":"pxe/index.html#dhcp","title":"\u914d\u7f6e\u200b DHCP","text":"<p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u5148\u200b\u5c06\u200b\u672c\u673a\u200b IP \u200b\u914d\u7f6e\u200b\u6210\u200b <code>10.0.0.1</code></p> <pre><code>$ sudo vim /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\nlog-facility local7;\n\noption arch code 93 = unsigned integer 16;\n\nsubnet 10.0.0.0 netmask 255.255.255.0 {\n  range 10.0.0.10 10.0.0.50;\n  next-server 10.0.0.1;\n\n  class \"pxeclients\" {\n    match if substring (option vendor-class-identifier, 0, 9) = \"PXEClient\";\n\n    if option arch = 00:07 or option arch = 00:09 {\n      # x86-64 EFI BIOS\n      filename \"efi/x86_64/BOOTX64.EFI\";\n    } else if option arch = 00:0b {\n      # ARM64 aarch64 EFI BIOS\n      filename \"efi/aarch64/BOOTAA64.EFI\";\n    } else {\n      # Legacy non-EFI BIOS\n      filename \"bios/x86_64/pxelinux.0\";\n    }\n  }\n}\n\n$ sudo vim /etc/rsyslog.d/dhcp-relay.conf\nlocal7.* -/var/log/dhcp-relay.log\n\n# \u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\nsystemctl restart isc-dhcp-server\n</code></pre>"},{"location":"pxe/index.html#tftp","title":"\u914d\u7f6e\u200b TFTP","text":"<pre><code>$ sudo vim /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/srv/tftp\"\nTFTP_ADDRESS=\":69\"\nTFTP_OPTIONS=\"--secure -vvv\"\n\n# \u200b\u521b\u5efa\u200b BIOS \u200b\u76ee\u5f55\u200b\nmkdir -p /srv/tftp/bios/x86_64\n\n# \u200b\u51c6\u5907\u200b pxelinux.0 \u200b\u548c\u200b vesamenu.c32 \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\ncp usr/share/syslinux/pxelinux.0 /srv/tftp/bios/x86_64/\ncp usr/share/syslinux/vesamenu.c32 /srv/tftp/bios/x86_64/\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz //srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/bios/x86_64/images/rhel79\n\n# \u200b\u51c6\u5907\u200b default \u200b\u6587\u4ef6\u200b\nmkdir /srv/tftp/bios/x86_64/pxelinux.cfg\ncp /var/www/html/rhel79/x86_64/base/isolinux/isolinux.cfg /srv/tftp/bios/x86_64/pxelinux.cfg/default\n$ sudo vim /srv/tftp/bios/x86_64/pxelinux.cfg/default\ndefault vesamenu.c32\ntimeout 600\n\nlabel local\n  menu label Boot from ^local drive\n  menu default\n  localboot 0xffff\n\nlabel rhel79\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel79.cfg quiet\n\nlabel rhel83\n  menu label ^Install Red Hat Enterprise Linux 8.3\n  kernel images/rhel83/vmlinuz\n  append initrd=images/rhel83/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel83.cfg quiet\n\nlabel v10sp1\n  menu label ^Install Kylin Linux Advanced Server V10 SP1\n  kernel images/v10sp1/vmlinuz\n  append initrd=images/v10sp1/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg quiet\n\nlabel v10sp2\n  menu label ^Install Kylin Linux Advanced Server V10 SP2\n  kernel images/v10sp2/vmlinuz\n  append initrd=images/v10sp2/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg quiet\n\n# \u200b\u521b\u5efa\u200b UEFI \u200b\u76ee\u5f55\u200b\nmkdir -p /srv/tftp/efi/x86_64\n\n# \u200b\u51c6\u5907\u200b BOOTX64.EFI\u3001grubx64.efi \u200b\u548c\u200b grub.cfg \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/BOOTX64.EFI /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grubx64.efi /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grub.cfg /srv/tftp/efi/x86_64/\nchmod 644 /srv/tftp/efi/x86_64/BOOTX64.EFI\nchmod 644 /srv/tftp/efi/x86_64/grubx64.efi\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/efi/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz /srv/tftp/efi/x86_64/images/rhel79/\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/efi/x86_64/images/rhel79/\n\n# \u200b\u51c6\u5907\u200b grub.cfg \u200b\u6587\u4ef6\u200b\n$ sudo vim /srv/tftp/efi/x86_64/grub.cfg\nset timeout=5\nset default=0\n\nmenuentry 'Install Red Hat Enterprise Linux 7.9' {\n  linuxefi efi/x86_64/images/rhel79/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/rhel79.cfg\n  initrdefi efi/x86_64/images/rhel79/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP1' {\n  linuxefi efi/x86_64/images/v10sp1/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg\n  initrdefi efi/x86_64/images/v10sp1/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP2' {\n  linuxefi efi/x86_64/images/v10sp2/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg\n  initrdefi efi/x86_64/images/v10sp2/initrd.img\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp\n\u251c\u2500\u2500 bios\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 images\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.0\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.cfg\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 vesamenu.c32\n\u2514\u2500\u2500 efi\n    \u2514\u2500\u2500 x86_64\n        \u251c\u2500\u2500 BOOTX64.EFI\n        \u251c\u2500\u2500 grub.cfg\n        \u251c\u2500\u2500 grubx64.efi\n        \u2514\u2500\u2500 images\n            \u251c\u2500\u2500 rhel79\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u251c\u2500\u2500 v10sp1\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u2514\u2500\u2500 v10sp2\n                \u251c\u2500\u2500 initrd.img\n                \u2514\u2500\u2500 vmlinuz\n</code></pre>"},{"location":"pxe/index.html#_3","title":"\u67e5\u770b\u200b\u65e5\u5fd7","text":"<pre><code>tail -f /var/log/syslog | grep dhcp\ntail -f /var/log/syslog | grep tftp\ntail -f /var/log/nginx/access.log\n</code></pre>"},{"location":"pxe/index.html#_4","title":"\u8c03\u8bd5","text":"<pre><code># \u200b\u6d4b\u8bd5\u200b\u955c\u50cf\u200b\u6e90\u200b\ncurl 10.0.0.1\ncurl 10.0.0.1/kickstart/rhel79.cfg\n\n# \u200b\u6d4b\u8bd5\u200b DHCP\nsudo nmap --script broadcast-dhcp-discover\nsudo nmap --script broadcast-dhcp-discover -e eth0\ndhcp-lease-list\n\n# \u200b\u6d4b\u8bd5\u200b TFTP\n$ tftp 10.0.0.1\ntftp&gt; get bios/x86_64/pxelinux.0\nReceived 27158 bytes in 0.1 seconds\ntftp&gt;\n</code></pre>"},{"location":"pxe/index.html#_5","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>Change permissions for grub2/shim.efi</li> <li>How to set-up and configure a PXE Server</li> <li>Create a PXE bootserver to install multiple Linux distributions </li> <li>Understanding PXE Booting and Kickstart Technology</li> <li>Kickstart Server</li> <li>Preparing for a Network Installation</li> <li>Making the Kickstart File Available</li> <li>\u200b\u4f7f\u7528\u200bkickstart\u200b\u81ea\u52a8\u5316\u200b\u5b89\u88c5\u200b</li> <li>s14.\u200b\u8fd0\u7ef4\u200b\u81ea\u52a8\u5316\u200b\u4e4b\u200b\u7cfb\u7edf\u200b\u90e8\u7f72\u200b -- \u200b\u5b9e\u6218\u200b\u6848\u4f8b\u200b\uff1akickstart\u200b\u6587\u4ef6\u200b\u5236\u4f5c\u200b\u8fc7\u7a0b\u200b</li> <li>Sample kickstart partition example (RAID, LVM, Multipath, Simple,..)</li> <li>How to install and configure isc-dhcp-server</li> <li>Installing and Configuring TFTP Server on Ubuntu</li> <li>Need to set up yum repository for locally-mounted DVD on Red Hat Enterprise Linux 7</li> <li>\u200b\u81ea\u52a8\u5316\u200b\u88c5\u673a\u200b\u5de5\u5177\u200b-kickstart</li> <li>How do I configure syslinux to boot immediately</li> <li>dhcp-relay custom log file</li> <li>Kickstart Syntax Reference</li> <li>Kickstart Documentation</li> <li>error: ../../grub-core/net/net.c:1795:timeout reading initrd.img</li> <li>How To Install createrepo on Ubuntu 18.04</li> <li>How to Create Your Own Repositories for Packages</li> <li>PXELINUX</li> <li>01-\u200b\u81ea\u52a8\u5316\u200b\u88c5\u673a\u200b\u5de5\u5177\u200b-kickstart</li> <li>27.2. How Do You Perform a Kickstart Installation?</li> </ol>"},{"location":"pxe/dhcp.html","title":"DHCP","text":""},{"location":"pxe/dhcp.html#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo apt install isc-dhcp-server\n</code></pre>"},{"location":"pxe/dhcp.html#_2","title":"\u914d\u7f6e","text":"<p>\u200b\u53ea\u200b\u652f\u6301\u200b BIOS \u200b\u542f\u52a8\u200b\u7684\u200b\u914d\u7f6e\u200b\u793a\u4f8b\u200b</p> <pre><code># /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\n\nsubnet 10.0.0.0 netmask 255.255.255.0 {\n  range 10.0.0.10 10.0.0.50;\n  next-server 10.0.0.1;\n  filename \"pxelinux/pxelinux.0\";\n}\n</code></pre> <p>\u200b\u652f\u6301\u200b BIOS \u200b\u548c\u200b UEFI \u200b\u4e24\u79cd\u200b\u542f\u52a8\u200b\u65b9\u5f0f\u200b\u7684\u200b\u914d\u7f6e\u200b\u793a\u4f8b\u200b</p> <pre><code># /etc/dhcp/dhcpd.conf\ndefault-lease-time 600;\nmax-lease-time 7200;\nlog-facility local7;\n\noption arch code 93 = unsigned integer 16;\n\nsubnet 10.0.0.0 netmask 255.255.255.0 {\n  range 10.0.0.10 10.0.0.50;\n  next-server 10.0.0.1;\n\n  class \"pxeclients\" {\n    match if substring (option vendor-class-identifier, 0, 9) = \"PXEClient\";\n\n    if option arch = 00:07 or option arch = 00:09 {\n      # x86-64 EFI BIOS\n      filename \"efi/x86_64/BOOTX64.EFI\";\n    } else if option arch = 00:0b {\n      # ARM64 aarch64 EFI BIOS\n      filename \"efi/aarch64/BOOTAA64.EFI\";\n    } else {\n      # Legacy non-EFI BIOS\n      filename \"bios/x86_64/pxelinux.0\";\n    }\n  }\n}\n</code></pre>"},{"location":"pxe/dhcp.html#_3","title":"\u9a8c\u8bc1","text":"<p>\u200b\u6d4b\u8bd5\u200b\u662f\u5426\u200b\u53ef\u200b\u83b7\u53d6\u200b\u5230\u200b\u52a8\u6001\u200b IP</p> <pre><code>sudo nmap --script broadcast-dhcp-discover\n\n# \u200b\u6307\u5b9a\u200b\u7279\u5b9a\u200b\u7f51\u5361\u200b\nsudo nmap --script broadcast-dhcp-discover -e eth0\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b IP</p> <pre><code>dhcp-lease-list\n</code></pre>"},{"location":"pxe/dhcp.html#_4","title":"\u67e5\u770b\u200b\u65e5\u5fd7","text":"<p>\u200b\u5f00\u542f\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u529f\u80fd\u200b</p> <pre><code># /etc/dhcp/dhcpd.conf\nlog-facility local7;\n</code></pre> <p>\u200b\u914d\u7f6e\u200b rsyslog \u200b\u6536\u96c6\u200b\u65e5\u5fd7\u200b</p> <pre><code># /etc/rsyslog.d/dhcp-relay.conf\nlocal7.* -/var/log/dhcp-relay.log\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u65e5\u5fd7\u200b</p> <pre><code>tail -f /var/log/syslog | grep dhcp\n</code></pre>"},{"location":"pxe/dhcp.html#_5","title":"\u9ad8\u7ea7\u200b\u914d\u7f6e","text":"<p>\u200b\u53ea\u200b\u76d1\u542c\u200b\u6307\u5b9a\u200b\u7f51\u5361\u200b</p> <pre><code># /etc/default/isc-dhcp-server\nINTERFACESv4=\"eth0\"\n</code></pre>"},{"location":"pxe/dhcp.html#_6","title":"\u53c2\u8003","text":"<ul> <li>dhcp-relay custom log file</li> </ul>"},{"location":"pxe/faq.html","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li>\u200b\u8bb0\u200b\u4e00\u6b21\u200bARM\u200b\u670d\u52a1\u5668\u200b(\u200b\u9cb2\u9e4f\u200b920)\u200b\u7684\u200bPXE\u200b\u6279\u91cf\u200b\u88c5\u673a\u200b\u9047\u5230\u200b\u7684\u200b\u5751\u200b</li> <li>Configuring active/backup bonded interfaces on CentOS Linux hosts</li> <li>Logging %pre during kickstart - logfile doesn't exist after boot</li> <li>Logging all the commands executed during a kickstart installation to file and screen</li> <li>RHEL \u2013 How to Identify Logical and Physical Network Interface Names While Installing the OS</li> <li>nmcli - command line means to delete all wifi / wlan0 connections</li> <li>zhangguanzhang/Installer</li> <li>How to execute script after system reboot by using kickstart</li> <li>Have a kickstart file run an independent script file from its %post section</li> <li>How to set hostname using hostnamectl during kickstart in Red Hat Enterprise Linux 7?</li> <li>How to set hostname during kickstart installation (CentOS/RHEL 5,6,7)</li> <li>CentOS 7 kickstart file set hostname with hostnamectl</li> <li>kickstart-tests</li> <li>Noppy/KickStart</li> <li>Why does kickstart installation of Red Hat Enterprise Linux fail with error \"Specified nonexistent disk sda in partition command\" ?</li> </ol>"},{"location":"pxe/tftp.html","title":"TFTP","text":""},{"location":"pxe/tftp.html#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo apt install tftpd-hpa\n</code></pre>"},{"location":"pxe/tftp.html#_2","title":"\u914d\u7f6e","text":"<p>\u200b\u8bb0\u5f55\u200b\u4f20\u8f93\u200b\u65e5\u5fd7\u200b\uff0c<code>TFTP_OPTIONS</code> \u200b\u53c2\u6570\u200b\u52a0\u4e0a\u200b <code>-vvv</code></p> <pre><code># /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/srv/tftp\"\nTFTP_ADDRESS=\":69\"\nTFTP_OPTIONS=\"--secure -vvv\"\n</code></pre>"},{"location":"pxe/tftp.html#pxe","title":"\u51c6\u5907\u200b PXE \u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6587\u4ef6","text":"<p>\u200b\u53ea\u200b\u652f\u6301\u200b BIOS \u200b\u65b9\u5f0f\u200b\u542f\u52a8\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6587\u4ef6\u200b</p> <pre><code># \u200b\u51c6\u5907\u200b pxelinux.0 \u200b\u548c\u200b vesamenu.c32 \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\nmkdir /srv/tftp/pxelinux\ncp usr/share/syslinux/pxelinux.0 /srv/tftp/pxelinux/\ncp usr/share/syslinux/vesamenu.c32 /srv/tftp/pxelinux/\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/pxelinux/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz /srv/tftp/pxelinux/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/pxelinux/images/rhel79\n\n# \u200b\u51c6\u5907\u200b default \u200b\u6587\u4ef6\u200b\nmkdir /srv/tftp/pxelinux/pxelinux.cfg\ncp /var/www/html/rhel79/x86_64/base/isolinux/isolinux.cfg /srv/tftp/pxelinux/pxelinux.cfg/default\nvim /srv/tftp/pxelinux/pxelinux.cfg/default\n\ndefault vesamenu.c32\ntimeout 600\n\nlabel local\n  menu label Boot from ^local drive\n  menu default\n  localboot 0xffff\n\nlabel rhel79\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel79.cfg quiet\n\nlabel rhel83\n  menu label ^Install Red Hat Enterprise Linux 8.3\n  kernel images/rhel83/vmlinuz\n  append initrd=images/rhel83/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel83.cfg quiet\n\nlabel v10sp1\n  menu label ^Install Kylin Linux Advanced Server V10 SP1\n  kernel images/v10sp1/vmlinuz\n  append initrd=images/v10sp1/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg quiet\n\nlabel v10sp2\n  menu label ^Install Kylin Linux Advanced Server V10 SP2\n  kernel images/v10sp2/vmlinuz\n  append initrd=images/v10sp2/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg quiet\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp\n\u2514\u2500\u2500 pxelinux\n    \u251c\u2500\u2500 images\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel83\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n    \u251c\u2500\u2500 pxelinux.0\n    \u251c\u2500\u2500 pxelinux.cfg\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n    \u2514\u2500\u2500 vesamenu.c32\n</code></pre> <p>\u200b\u540c\u65f6\u200b\u652f\u6301\u200b BIOS \u200b\u548c\u200b UEFI \u200b\u4e24\u79cd\u200b\u542f\u52a8\u200b\u65b9\u5f0f\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6587\u4ef6\u200b</p> <pre><code># \u200b\u521b\u5efa\u200b BIOS \u200b\u76ee\u5f55\u200b\nmkdir -p /srv/tftp/bios/x86_64\n\n# \u200b\u51c6\u5907\u200b pxelinux.0 \u200b\u548c\u200b vesamenu.c32 \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/Packages/syslinux-4.05-15.el7.x86_64.rpm .\nrpm2cpio syslinux-4.05-15.el7.x86_64.rpm | cpio -dimv\ncp usr/share/syslinux/pxelinux.0 /srv/tftp/bios/x86_64/\ncp usr/share/syslinux/vesamenu.c32 /srv/tftp/bios/x86_64/\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz //srv/tftp/bios/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/bios/x86_64/images/rhel79\n\n# \u200b\u51c6\u5907\u200b default \u200b\u6587\u4ef6\u200b\nmkdir /srv/tftp/bios/x86_64/pxelinux.cfg\ncp /var/www/html/rhel79/x86_64/base/isolinux/isolinux.cfg /srv/tftp/bios/x86_64/pxelinux.cfg/default\nvim /srv/tftp/bios/x86_64/pxelinux.cfg/default\n\ndefault vesamenu.c32\ntimeout 600\n\nlabel local\n  menu label Boot from ^local drive\n  menu default\n  localboot 0xffff\n\nlabel rhel79\n  menu label ^Install Red Hat Enterprise Linux 7.9\n  kernel images/rhel79/vmlinuz\n  append initrd=images/rhel79/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel79.cfg quiet\n\nlabel rhel83\n  menu label ^Install Red Hat Enterprise Linux 8.3\n  kernel images/rhel83/vmlinuz\n  append initrd=images/rhel83/initrd.img inst.ks=http://10.0.0.1/kickstart/rhel83.cfg quiet\n\nlabel v10sp1\n  menu label ^Install Kylin Linux Advanced Server V10 SP1\n  kernel images/v10sp1/vmlinuz\n  append initrd=images/v10sp1/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg quiet\n\nlabel v10sp2\n  menu label ^Install Kylin Linux Advanced Server V10 SP2\n  kernel images/v10sp2/vmlinuz\n  append initrd=images/v10sp2/initrd.img inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg quiet\n\n# BIOS \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp/bios\n\u2514\u2500\u2500 x86_64\n    \u251c\u2500\u2500 images\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n    \u251c\u2500\u2500 pxelinux.0\n    \u251c\u2500\u2500 pxelinux.cfg\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n    \u2514\u2500\u2500 vesamenu.c32\n\n# \u200b\u521b\u5efa\u200b UEFI \u200b\u76ee\u5f55\u200b\nmkdir -p efi/x86_64\n\n# \u200b\u51c6\u5907\u200b BOOTX64.EFI\u3001grubx64.efi \u200b\u548c\u200b grub.cfg \u200b\u6587\u4ef6\u200b\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/BOOTX64.EFI /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grubx64.efi /srv/tftp/efi/x86_64/\ncp /var/www/html/rhel79/x86_64/base/EFI/BOOT/grub.cfg /srv/tftp/efi/x86_64/\nchmod 644 /srv/tftp/efi/x86_64/BOOTX64.EFI\nchmod 644 /srv/tftp/efi/x86_64/grubx64.efi\n\n# \u200b\u51c6\u5907\u200b vmlinuz \u200b\u548c\u200b initrd.img \u200b\u6587\u4ef6\u200b\nmkdir -p /srv/tftp/efi/x86_64/images/rhel79\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/vmlinuz /srv/tftp/efi/x86_64/images/rhel79/\ncp /var/www/html/rhel79/x86_64/base/images/pxeboot/initrd.img /srv/tftp/efi/x86_64/images/rhel79/\n\n# \u200b\u51c6\u5907\u200b grub.cfg \u200b\u6587\u4ef6\u200b\nvim /srv/tftp/efi/x86_64/grub.cfg\n\nset timeout=5\nset default=0\n\nmenuentry 'Install Red Hat Enterprise Linux 7.9' {\n  linuxefi efi/x86_64/images/rhel79/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/rhel79.cfg\n  initrdefi efi/x86_64/images/rhel79/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP1' {\n  linuxefi efi/x86_64/images/v10sp1/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp1.cfg\n  initrdefi efi/x86_64/images/v10sp1/initrd.img\n}\n\nmenuentry 'Install Kylin Linux Advanced Server V10 SP2' {\n  linuxefi efi/x86_64/images/v10sp2/vmlinuz ip=dhcp inst.ks=http://10.0.0.1/kickstart/v10sp2.cfg\n  initrdefi efi/x86_64/images/v10sp2/initrd.img\n\n# \u200b\u6700\u7ec8\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\n/srv/tftp\n\u251c\u2500\u2500 bios\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 x86_64\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 images\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 rhel79\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 v10sp1\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 v10sp2\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 initrd.img\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 vmlinuz\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.0\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 pxelinux.cfg\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 vesamenu.c32\n\u2514\u2500\u2500 efi\n    \u2514\u2500\u2500 x86_64\n        \u251c\u2500\u2500 BOOTX64.EFI\n        \u251c\u2500\u2500 grub.cfg\n        \u251c\u2500\u2500 grubx64.efi\n        \u2514\u2500\u2500 images\n            \u251c\u2500\u2500 rhel79\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u251c\u2500\u2500 v10sp1\n            \u2502\u00a0\u00a0 \u251c\u2500\u2500 initrd.img\n            \u2502\u00a0\u00a0 \u2514\u2500\u2500 vmlinuz\n            \u2514\u2500\u2500 v10sp2\n                \u251c\u2500\u2500 initrd.img\n                \u2514\u2500\u2500 vmlinuz\n</code></pre>"},{"location":"pxe/tftp.html#_3","title":"\u67e5\u770b\u200b\u65e5\u5fd7","text":"<pre><code>sudo tail -f /var/log/syslog | grep tftp\n</code></pre>"},{"location":"security/index.html","title":"\u5b89\u5168","text":"<ul> <li>https://www.cvedetails.com/</li> </ul>"},{"location":"vmware/faq.html","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"vmware/faq.html#cheetsheet","title":"CheetSheet","text":"<pre><code># \u200b\u6dfb\u52a0\u200b\u78c1\u76d8\u200b\u540e\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u91cd\u542f\u200b\u865a\u62df\u673a\u200b\necho \"- - -\" | tee /sys/class/scsi_host/host*/scan\n\n# \u200b\u8c03\u6574\u200b NAT \u200b\u7f51\u6bb5\u200b\nSelect Edit &gt; Virtual Network Editor.\nSelect the host-only or NAT network.\nTo change the subnet IP address, type a new value in the Subnet IP text box.\n\n# \u200b\u4ece\u200b\u7f51\u7edc\u200b\u542f\u52a8\u200b\n\u200b\u5f00\u673a\u200b\uff0c\u200b\u6309\u200b F12\n</code></pre>"},{"location":"vmware/faq.html#before-you-can-run-vmware-several-modules-must-be-compiled","title":"Before you can run VMware several modules must be compiled","text":"<p>\u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b</p> <pre><code>sudo vmware-modconfig --console --install-all\n</code></pre>"},{"location":"vmware/faq.html#_2","title":"\u53c2\u8003","text":"<ul> <li>Before you can run VMware several modules must be compiled</li> <li>Change the Subnet Settings for a Host-Only or NAT Network on a Windows Host</li> <li>VMware\u200b\u7684\u200b\u865a\u62df\u200b\u7f51\u7edc\u200b\u7f16\u8f91\u5668\u200b\uff0c\u200b\u5728\u200b\u914d\u7f6e\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u6865\u63a5\u200b\u6a21\u5f0f\u200b\uff01</li> <li>Network Boot of Virtual Machines (1322)</li> </ul>"},{"location":"vmware/install.html","title":"\u5b89\u88c5","text":""},{"location":"vmware/install.html#_2","title":"\u4e0b\u8f7d\u200b\u4ecb\u8d28","text":"<p>https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html</p>"},{"location":"vmware/install.html#_3","title":"\u6fc0\u6d3b\u7801","text":"<p>VMware Workstation 15.5 Pro </p> <pre><code>5F29M-48312-8ZDF9-A8A5K-2AM0Z\n5A02H-AU243-TZJ49-GTC7K-3C61\nFF35R-DLX13-48DRZ-66M5V-XQ294\nVY5DH-D0GE0-0814Z-AXZGT-Y3UA6\nAV102-05Y9H-M89MQ-5ZN79-MZHR4\n</code></pre> <p>VMware Workstation 17 Pro</p> <pre><code>JU090-6039P-08409-8J0QH-2YR7F\n4A4RR-813DK-M81A9-4U35H-06KND\nNZ4RR-FTK5H-H81C1-Q30QH-1V2LA\n4Y09U-AJK97-089Z0-A3054-83KLA\n4C21U-2KK9Q-M8130-4V2QH-CF810\nMC60H-DWHD5-H80U9-6V85M-8280D\nZA30U-DXF84-4850Q-UMMXZ-W6K8F\nAC590-2XW97-48EFZ-TZPQE-MYHEA\nYF39K-DLFE5-H856Z-6NWZE-XQ2XD\nAC15R-FNZ16-H8DWQ-WFPNV-M28E2\nCZ1J8-A0D82-489LZ-ZMZQT-P3KX6\nYA11K-6YE8H-H89ZZ-EXM59-Y6AR0\n</code></pre>"},{"location":"was/index.html","title":"\u5b89\u88c5","text":""},{"location":"was/index.html#_2","title":"\u540d\u8bcd\u89e3\u91ca","text":"<pre><code>IIM IBM Installation Manager \u200b\u5b89\u88c5\u200b\u548c\u200b\u914d\u7f6e\u200b WAS \u200b\u9700\u8981\u200b\u7528\u5230\u200b\uff0c\u200b\u8ddf\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6ca1\u6709\u200b\u5173\u7cfb\u200b \nWAS IBM WebSphere Application Server\nFP FixPack\nIHS IBM HTTP Server\nDmgr Deployment Manager\nNodeAgent \u200b\u5b89\u88c5\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u53d7\u200b\u7ba1\u7406\u200b\u8282\u70b9\u200b\uff08managed node\uff09\u200b\u4e0a\u200b\uff0cApplication Server \u200b\u4e5f\u200b\u5b89\u88c5\u200b\u5728\u200b\u8282\u70b9\u200b\u4e0a\u200b\u3002\n</code></pre>"},{"location":"was/index.html#_3","title":"\u5b89\u88c5\u200b\u6b65\u9aa4","text":"<pre><code># \u200b\u4ecb\u8d28\u200b\u5b58\u653e\u200b\u76ee\u5f55\u200b\nmkdir /opt/IBM/soft/iim -p\nmkdir /opt/IBM/soft/was -p\n\n# \u200b\u4ecb\u8d28\u200b\u4f4d\u7f6e\u200b\n# tree /opt/IBM/soft\n.\n\u251c\u2500\u2500 iim\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 agent.installer.linux.gtk.x86_64_1.8.5000.20160506_1125.zip\n\u2514\u2500\u2500 was\n    \u251c\u2500\u2500 WAS_ND_V8.5.5_1_OF_3.zip\n    \u251c\u2500\u2500 WAS_ND_V8.5.5_2_OF_3.zip\n    \u2514\u2500\u2500 WAS_ND_V8.5.5_3_OF_3.zip\n\n# \u200b\u5b89\u88c5\u200b\u76ee\u5f55\u200b\nmkdir /opt/IBM/InstallationManager -p\nmkdir /opt/IBM/WebSphere/AppServer -p\nmkdir /wasdump\n\n# \u200b\u521b\u5efa\u200b\u8fd0\u884c\u200b\u7528\u6237\u200b\nuseradd wasadmin\nchown -R wasadmin:wasadmin /opt/IBM\nsudo su - wasadmin\n\n# !! \u200b\u8282\u70b9\u200b\u95f4\u200b\u662f\u200b\u901a\u8fc7\u200b\u4e3b\u673a\u540d\u200b\u8fdb\u884c\u200b\u901a\u8bb8\u200b\uff0c\u200b\u5fc5\u987b\u200b\u652f\u6301\u200b\n# \u200b\u5982\u200b\u901a\u8fc7\u200b\u914d\u7f6e\u200b /etc/hosts\n10.0.0.24 dmgr\n10.0.0.13 wasnode01\n</code></pre>"},{"location":"was/index.html#was","title":"\u5b89\u88c5\u200b WAS","text":"<p>\u200b\u6240\u6709\u200b\u8282\u70b9\u200b\u90fd\u200b\u9700\u200b\u5b89\u88c5\u200b WAS\uff0c\u200b\u5305\u62ec\u200b DMGR \u200b\u8282\u70b9\u200b\u548c\u200b managed node\u3002</p> <pre><code># \u200b\u5b89\u88c5\u200b IIM\n/opt/IBM/soft/iim/userinstc -acceptLicense -installationDirectory /opt/IBM/InstallationManager -log ./log.xml -silent\n\n# \u200b\u67e5\u770b\u200b\u7248\u672c\u4fe1\u606f\u200b\n/opt/IBM/InstallationManager/eclipse/tools/imcl listAvailablePackages -repositories /opt/IBM/soft/was/repository.config -features -long\n\n# \u200b\u5b89\u88c5\u200b WAS\n/opt/IBM/InstallationManager/eclipse/tools/imcl install com.ibm.websphere.ND.v85_8.5.5000.20130514_1044 -repositories /opt/IBM/soft/was/repository.config -installationDirectory /opt/IBM/WebSphere/AppServer -acceptLicense\n\n# \u200b\u67e5\u770b\u200b\u7248\u672c\u200b\n# \u200b\u7f3a\u200b\u4f9d\u8d56\u200b\u65f6\u9700\u200b\u6267\u884c\u200b yum install libnsl\n/opt/IBM/WebSphere/AppServer/bin/versionInfo.sh\n</code></pre>"},{"location":"was/index.html#dmgr","title":"\u5b89\u88c5\u200b DMGR","text":"<p>\u200b\u4ec5\u200b\u9700\u200b\u5728\u200b DMGR \u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b</p> <pre><code># \u200b\u5b89\u88c5\u200b DMGR\nyum install psmisc\n/opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh \\\n  -create \\\n  -profileName Dmgr01 \\\n  -profilePath /opt/IBM/WebSphere/AppServer/profiles/Dmgr01 \\\n  -templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/management \\\n  -nodeName DmgrNode01 \\\n  -personalCertValidityPeriod 10 \\\n  -hostName dmgr\n\n# \u200b\u5982\u200b\u5b89\u88c5\u200b\u5931\u8d25\u200b\uff0c\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u6e05\u7406\u200b\n# /opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh -delete -profileName Dmgr01\n# rm -rf /opt/IBM/WebSphere/AppServer/profiles/Dmgr01\n\n# \u200b\u542f\u52a8\u200b DMGR\uff08\u200b\u5728\u200b\u7ba1\u7406\u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b\uff09\n/opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin/startManager.sh\n</code></pre>"},{"location":"was/index.html#nodeagent","title":"\u5b89\u88c5\u200b NodeAgent","text":"<p>\u200b\u4ec5\u200b\u9700\u200b\u5728\u200b NodeAgent \u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b</p> <pre><code># \u200b\u521b\u5efa\u200b NodeAgents\n/opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh \\\n  -create \\\n  -profileName AppSrv01 \\\n  -profilePath /opt/IBM/WebSphere/AppServer/profiles/AppSrv01 \\\n  -templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/managed \\\n  -nodeName AppSrv01 \\\n  -personalCertValidityPeriod 10 \\\n  -hostName wasnode01\n\n/opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh \\\n  -create \\\n  -profileName AppSrv02 \\\n  -profilePath /opt/IBM/WebSphere/AppServer/profiles/AppSrv02 \\\n  -templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/managed \\\n  -nodeName AppSrv02 \\\n  -personalCertValidityPeriod 10 \\\n  -hostName wasnode01\n\n# \u200b\u5982\u200b\u5b89\u88c5\u200b\u5931\u8d25\u200b\uff0c\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u6e05\u7406\u200b\n# /opt/IBM/WebSphere/AppServer/bin/manageprofiles.sh -delete -profileName AppSrv01\n# rm -rf /opt/IBM/WebSphere/AppServer/profiles/AppSrv01\n\n# \u200b\u5411\u200b DMGR \u200b\u8282\u70b9\u200b\u6ce8\u518c\u200b\u672c\u200b\u8282\u70b9\u200b\n/opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin/addNode.sh dmgr 8879\n\n# addNode \u200b\u5c31\u200b\u4f1a\u200b\u81ea\u52a8\u200b NodeAgent \u200b\u6216\u8005\u200b\u624b\u5de5\u200b\u542f\u52a8\u200b\uff08\u200b\u5728\u200b\u53d7\u7ba1\u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b\uff09\n# /opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin/startNode.sh\n</code></pre>"},{"location":"was/index.html#_4","title":"\u6d4b\u8bd5\u200b\u9a8c\u8bc1","text":"<p>\u200b\u6d4f\u89c8\u5668\u200b\u6253\u5f00\u200b http://{DMGR_IP}:9060/admin \u200b\u8f93\u5165\u200b\u4efb\u610f\u200b\u7528\u6237\u540d\u200b\u767b\u5f55\u200b\u3002</p>"},{"location":"was/index.html#_5","title":"\u5176\u4ed6","text":"<pre><code># \u200b\u65e5\u5fd7\u200b\u76ee\u5f55\u200b\n/opt/IBM/WebSphere/AppServer/profiles/AppSrv01/logs\n\n# \u200b\u67e5\u770b\u200b\u5e94\u7528\u200b\u9ed8\u8ba4\u200b\u7aef\u53e3\u200b\nMiddleware servers &gt; server01 &gt; Ports\n9080\n\n# \u200b\u8c03\u6574\u200b JVM \u200b\u5185\u5b58\u5927\u5c0f\u200b\nMiddleware servers &gt; server01 &gt; Process definition &gt; Java Virtual Machine\nInitial heap size 2048MB\nMaximum heap size 4096MB\n\n# \u200b\u8c03\u6574\u200b JVM \u200b\u7ebf\u7a0b\u200b\nMiddleware servers &gt; server01 &gt; Thread pools &gt; WebContainer\nMinimum Size  100\nMaximum Size  300\n\n# \u200b\u8c03\u8bd5\u200b JDBC \u200b\u7ebf\u7a0b\u200b\u6c60\u200b\nJDBC providers &gt; Oracle JDBC Driver (XA)\n\nContents of  /opt/IBM/WebSphere/AppServer/installableApps\nPerfServletApp.ear\n</code></pre>"},{"location":"was/index.html#_6","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li>\u200b\u7248\u672c\u4fe1\u606f\u200b</li> <li>Implementing IBM WebSphere Application Server clustering</li> <li>Encountering 'error while loading shared libraries: libnsl.so.1' using a new ITX installation</li> <li>Creating profiles in WAS 8559 on CentOS 7</li> <li>Deleted Profile shows in profile management tool of IBM Websphere</li> <li>WebSphere Application Server: \u200b\u6982\u8ff0\u200b</li> <li>was9\u200b\u5b89\u88c5\u200b\u4e0e\u200bwas8.5\u200b\u533a\u522b\u200b</li> </ul>"},{"location":"windows/tools.html","title":"\u5de5\u5177","text":""},{"location":"windows/tools.html#_2","title":"\u7cfb\u7edf\u200b\u6fc0\u6d3b","text":"<ul> <li>Microsoft-Activation-Scripts</li> </ul>"},{"location":"windows/tools.html#_3","title":"\u5f55\u5c4f\u200b\u622a\u56fe","text":"<ul> <li>LICEcap</li> </ul>"},{"location":"windows/wsl.html","title":"WSL","text":""},{"location":"windows/wsl.html#cheetsheet","title":"Cheetsheet","text":"<pre><code># View the list of distros and their current state:\nwsl.exe -l -v\n\n# Shutdown everything\nwsl.exe --shutdown\n\n# Terminate a specific distro:\nwsl.exe -t &lt;DistroName&gt;\n\n# Boot up a specific distro: \nwsl.exe -d &lt;DistroName&gt;\n</code></pre>"},{"location":"windows/wsl.html#_1","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"windows/wsl.html#wsl-ubuntu-error-0x80004002","title":"WSL Ubuntu error 0x80004002","text":"<p>\u200b\u4f7f\u7528\u200b Adminstrator \u200b\u6253\u5f00\u200b PowerShell\uff0c\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux\n</code></pre>"},{"location":"windows/wsl.html#phpstorm-wsl2","title":"PHPStorm \u200b\u8bbf\u95ee\u200b WSL2 \u200b\u4e2d\u200b\u7684\u200b\u6587\u4ef6","text":"<pre><code>\\\\wsl$\\Ubuntu\\opt\\www\\invo\n</code></pre>"},{"location":"windows/wsl.html#ubuntu","title":"\u65b0\u200b\u6807\u7b7e\u200b\u9ed8\u8ba4\u200b\u6253\u5f00\u200b Ubuntu","text":"<p>\u200b\u8bbe\u7f6e\u200b -&gt; \u200b\u542f\u52a8\u200b -&gt; \u200b\u9ed8\u8ba4\u200b\u914d\u7f6e\u6587\u4ef6\u200b -&gt; \u200b\u9009\u62e9\u200b Ubuntu -&gt; \u200b\u4fdd\u5b58\u200b</p>"},{"location":"windows/wsl.html#wsl-hyper-v","title":"\u4ece\u200b WSL \u200b\u8bbf\u95ee\u200b Hyper-V \u200b\u6240\u200b\u521b\u5efa\u200b\u7684\u200b\u865a\u62df\u673a","text":"<pre><code>Get-NetIPInterface | where {$_.InterfaceAlias -eq 'vEthernet (WSL)' -or $_.InterfaceAlias -eq 'vEthernet (Default Switch)'} | Set-NetIPInterface -Forwarding Enabled\n</code></pre>"},{"location":"windows/wsl.html#wsl-ip","title":"\u8bbe\u7f6e\u200b WSL \u200b\u9759\u6001\u200b IP","text":"<ol> <li>\u200b\u6253\u5f00\u200b\u6ce8\u518c\u8868\u200b\u7f16\u8f91\u5668\u200b\uff0c\u200b\u8f93\u5165\u200b <code>reg</code></li> <li>\u200b\u8fdb\u5165\u200b\u76ee\u5f55\u200b <code>\u200b\u8ba1\u7b97\u673a\u200b\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Lxss\\</code></li> <li>\u200b\u4fee\u6539\u200b WSL \u200b\u7f51\u6bb5\u200b\u4fe1\u606f\u200b <code>NatNetwork</code></li> <li>\u200b\u4fee\u6539\u200b WSL \u200b\u7f51\u5173\u200b IP \uff08\u200b\u5373\u200b\u4e3b\u673a\u200b\u7684\u200b IP \u200b\u5730\u5740\u200b\uff09<code>NatGatewayIpAddress</code></li> <li>\u200b\u4fee\u6539\u200b WSL Ubuntu \u200b\u7684\u200b IP <code>NatIpAddress</code></li> </ol>"},{"location":"windows/wsl.html#_2","title":"\u53c2\u8003","text":"<ol> <li>Windows Subsystem for Linux Documentation</li> <li>WSL Ubuntu error 0x80004002</li> <li>Open a project stored in the WSL file system</li> <li>Connect Hyper-V VM from WSL (Ubuntu)</li> <li>Can I set a static ip address for WSL 2?</li> <li>Configuring WSL2 distro for static IPv4 address</li> <li>Rebooting Ubuntu on Windows without rebooting Windows?</li> </ol>"}]}